{"mappings":"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A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;AAsQU,6BAAA,EAAE,EAAA,IAAW;A;A;A;A;AAKb,6BAAA,EAAE,EAAA,IAAW;A;A;A;A;AAKb,6BAAA,EAAE,EAAA,IAAW;A;A;A;A;A;A;A;A;A;A;A;AAYtC,IAAA,CAAC,CACD,IAAM,EAAe,IAAI,CAAC,aAAa,CAAC,qBACxC,GAAc,iBAAiB,QAAS,AAAC,IACrC,EAAE,cAAc,GACD,EAAE,MAAM,CACvB,AAAA,EAAO,EAAE,CAAC,AAnSA,aAmSQ,IACtB,EAEJ,CACA,CACA,eAAe,MAAM,CAAC,iBAAkB,I,I,G,C,EGrTxC,GAAiB,IAAA,IAAoB,2CAAA,YAAA,GAAA,EAA4C,QAAQ,EDGzF,OAAM,WAAiB,YACnB,aAAa,CACT,KAAK,EACT,CACA,mBAAmB,CACf,IAAI,CAAC,MAAM,EAEf,CACA,QAAQ,CACR,IAAI,EAAQ,OAAO,QAAQ,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,AAClD,CAAA,IAAI,CAAC,SAAS,CAAC;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;A;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","sources":["<anon>","node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-8f2f34a7aad4dccd.js","src/frontend/index.ts","src/pages/homepage/index.ts","node_modules/@vaadin/router/src/index.ts","node_modules/@vaadin/router/dist/router.js","node_modules/@vaadin/router/src/router.ts","node_modules/@vaadin/router/node_modules/path-to-regexp/dist.es2015/index.js","node_modules/@vaadin/router/node_modules/path-to-regexp/src/index.ts","node_modules/@vaadin/router/dist/resolver/generateUrls.js","node_modules/@vaadin/router/src/resolver/generateUrls.ts","node_modules/@vaadin/router/dist/resolver/resolver.js","node_modules/@vaadin/router/src/resolver/resolver.ts","node_modules/@vaadin/router/dist/resolver/matchRoute.js","node_modules/@vaadin/router/src/resolver/matchRoute.ts","node_modules/@vaadin/router/dist/resolver/matchPath.js","node_modules/@vaadin/router/src/resolver/matchPath.ts","node_modules/@vaadin/router/dist/resolver/utils.js","node_modules/@vaadin/router/src/resolver/utils.ts","node_modules/@vaadin/router/dist/resolver/resolveRoute.js","node_modules/@vaadin/router/src/resolver/resolveRoute.ts","node_modules/@vaadin/router/src/router-config.ts","node_modules/@vaadin/router/dist/router-meta.js","node_modules/@vaadin/router/scripts/register.js","node_modules/@vaadin/router/src/router-meta.ts","node_modules/@vaadin/vaadin-usage-statistics/vaadin-usage-statistics.js","node_modules/@vaadin/vaadin-usage-statistics/vaadin-usage-statistics-collect.js","node_modules/@vaadin/vaadin-development-mode-detector/vaadin-development-mode-detector.js","node_modules/@vaadin/router/dist/transitions/animate.js","node_modules/@vaadin/router/src/transitions/animate.ts","node_modules/@vaadin/router/dist/triggers/navigation.js","node_modules/@vaadin/router/src/triggers/navigation.ts","node_modules/@vaadin/router/dist/triggers/click.js","node_modules/@vaadin/router/src/triggers/click.ts","node_modules/@vaadin/router/dist/utils.js","node_modules/@vaadin/router/src/utils.ts","node_modules/@vaadin/router/dist/triggers/popstate.js","node_modules/@vaadin/router/src/triggers/popstate.ts","src/components/header.ts","node_modules/@parcel/runtime-js/lib/runtime-4e9049c4d96aba4c.js","src/pages/chatselection/index.ts","node_modules/@parcel/runtime-js/lib/runtime-40838cfd6c6e4160.js","src/pages/chat/index.ts","node_modules/@parcel/runtime-js/lib/runtime-dd85d6f0f030661a.js","src/frontend/api.ts","src/router.ts"],"sourcesContent":["\nfunction $parcel$export(e, n, v, s) {\n  Object.defineProperty(e, n, {get: v, set: s, enumerable: true, configurable: true});\n}\n\nfunction $parcel$interopDefault(a) {\n  return a && a.__esModule ? a.default : a;\n}\n\n      var $parcel$global = globalThis;\n    \nvar $parcel$modules = {};\nvar $parcel$inits = {};\n\nvar parcelRequire = $parcel$global[\"parcelRequire94c2\"];\n\nif (parcelRequire == null) {\n  parcelRequire = function(id) {\n    if (id in $parcel$modules) {\n      return $parcel$modules[id].exports;\n    }\n    if (id in $parcel$inits) {\n      var init = $parcel$inits[id];\n      delete $parcel$inits[id];\n      var module = {id: id, exports: {}};\n      $parcel$modules[id] = module;\n      init.call(module.exports, module, module.exports);\n      return module.exports;\n    }\n    var err = new Error(\"Cannot find module '\" + id + \"'\");\n    err.code = 'MODULE_NOT_FOUND';\n    throw err;\n  };\n\n  parcelRequire.register = function register(id, init) {\n    $parcel$inits[id] = init;\n  };\n\n  $parcel$global[\"parcelRequire94c2\"] = parcelRequire;\n}\n\nvar parcelRegister = parcelRequire.register;\nparcelRegister(\"27Lyk\", function(module, exports) {\n\n$parcel$export(module.exports, \"register\", () => $18c11f3350a906ea$export$6503ec6e8aabbaf, (v) => $18c11f3350a906ea$export$6503ec6e8aabbaf = v);\nvar $18c11f3350a906ea$export$6503ec6e8aabbaf;\nvar $18c11f3350a906ea$export$f7ad0328861e2f03;\n\"use strict\";\nvar $18c11f3350a906ea$var$mapping = new Map();\nfunction $18c11f3350a906ea$var$register(baseUrl, manifest) {\n    for(var i = 0; i < manifest.length - 1; i += 2)$18c11f3350a906ea$var$mapping.set(manifest[i], {\n        baseUrl: baseUrl,\n        path: manifest[i + 1]\n    });\n}\nfunction $18c11f3350a906ea$var$resolve(id) {\n    var resolved = $18c11f3350a906ea$var$mapping.get(id);\n    if (resolved == null) throw new Error('Could not resolve bundle with id ' + id);\n    return new URL(resolved.path, resolved.baseUrl).toString();\n}\n$18c11f3350a906ea$export$6503ec6e8aabbaf = $18c11f3350a906ea$var$register;\n$18c11f3350a906ea$export$f7ad0328861e2f03 = $18c11f3350a906ea$var$resolve;\n\n});\n\nvar $6f7346d1238f2b1d$exports = {};\n\n(parcelRequire(\"27Lyk\")).register(new URL(\"\", import.meta.url).toString(), JSON.parse(\"[\\\"inzCo\\\",\\\"index.898e3a20.js\\\",\\\"bQSRt\\\",\\\"person-icon.82649727.png\\\",\\\"eRQEx\\\",\\\"logo-bckg-removed.217b7931.png\\\",\\\"ax8AL\\\",\\\"send-icon2.da343077.png\\\"]\"));\n\n/**\n * Tokenize input string.\n */ function $aee334e867208ba0$var$lexer(str) {\n    var tokens = [];\n    var i = 0;\n    while(i < str.length){\n        var char = str[i];\n        if (char === \"*\" || char === \"+\" || char === \"?\") {\n            tokens.push({\n                type: \"MODIFIER\",\n                index: i,\n                value: str[i++]\n            });\n            continue;\n        }\n        if (char === \"\\\\\") {\n            tokens.push({\n                type: \"ESCAPED_CHAR\",\n                index: i++,\n                value: str[i++]\n            });\n            continue;\n        }\n        if (char === \"{\") {\n            tokens.push({\n                type: \"OPEN\",\n                index: i,\n                value: str[i++]\n            });\n            continue;\n        }\n        if (char === \"}\") {\n            tokens.push({\n                type: \"CLOSE\",\n                index: i,\n                value: str[i++]\n            });\n            continue;\n        }\n        if (char === \":\") {\n            var name = \"\";\n            var j = i + 1;\n            while(j < str.length){\n                var code = str.charCodeAt(j);\n                if (// `0-9`\n                code >= 48 && code <= 57 || // `A-Z`\n                code >= 65 && code <= 90 || // `a-z`\n                code >= 97 && code <= 122 || // `_`\n                code === 95) {\n                    name += str[j++];\n                    continue;\n                }\n                break;\n            }\n            if (!name) throw new TypeError(\"Missing parameter name at \".concat(i));\n            tokens.push({\n                type: \"NAME\",\n                index: i,\n                value: name\n            });\n            i = j;\n            continue;\n        }\n        if (char === \"(\") {\n            var count = 1;\n            var pattern = \"\";\n            var j = i + 1;\n            if (str[j] === \"?\") throw new TypeError(\"Pattern cannot start with \\\"?\\\" at \".concat(j));\n            while(j < str.length){\n                if (str[j] === \"\\\\\") {\n                    pattern += str[j++] + str[j++];\n                    continue;\n                }\n                if (str[j] === \")\") {\n                    count--;\n                    if (count === 0) {\n                        j++;\n                        break;\n                    }\n                } else if (str[j] === \"(\") {\n                    count++;\n                    if (str[j + 1] !== \"?\") throw new TypeError(\"Capturing groups are not allowed at \".concat(j));\n                }\n                pattern += str[j++];\n            }\n            if (count) throw new TypeError(\"Unbalanced pattern at \".concat(i));\n            if (!pattern) throw new TypeError(\"Missing pattern at \".concat(i));\n            tokens.push({\n                type: \"PATTERN\",\n                index: i,\n                value: pattern\n            });\n            i = j;\n            continue;\n        }\n        tokens.push({\n            type: \"CHAR\",\n            index: i,\n            value: str[i++]\n        });\n    }\n    tokens.push({\n        type: \"END\",\n        index: i,\n        value: \"\"\n    });\n    return tokens;\n}\nfunction $aee334e867208ba0$export$98e6a39c04603d36(str, options) {\n    if (options === void 0) options = {};\n    var tokens = $aee334e867208ba0$var$lexer(str);\n    var _a = options.prefixes, prefixes = _a === void 0 ? \"./\" : _a, _b = options.delimiter, delimiter = _b === void 0 ? \"/#?\" : _b;\n    var result = [];\n    var key = 0;\n    var i = 0;\n    var path = \"\";\n    var tryConsume = function(type) {\n        if (i < tokens.length && tokens[i].type === type) return tokens[i++].value;\n    };\n    var mustConsume = function(type) {\n        var value = tryConsume(type);\n        if (value !== undefined) return value;\n        var _a = tokens[i], nextType = _a.type, index = _a.index;\n        throw new TypeError(\"Unexpected \".concat(nextType, \" at \").concat(index, \", expected \").concat(type));\n    };\n    var consumeText = function() {\n        var result = \"\";\n        var value;\n        while(value = tryConsume(\"CHAR\") || tryConsume(\"ESCAPED_CHAR\"))result += value;\n        return result;\n    };\n    var isSafe = function(value) {\n        for(var _i = 0, delimiter_1 = delimiter; _i < delimiter_1.length; _i++){\n            var char = delimiter_1[_i];\n            if (value.indexOf(char) > -1) return true;\n        }\n        return false;\n    };\n    var safePattern = function(prefix) {\n        var prev = result[result.length - 1];\n        var prevText = prefix || (prev && typeof prev === \"string\" ? prev : \"\");\n        if (prev && !prevText) throw new TypeError(\"Must have text between two parameters, missing text after \\\"\".concat(prev.name, \"\\\"\"));\n        if (!prevText || isSafe(prevText)) return \"[^\".concat($aee334e867208ba0$var$escapeString(delimiter), \"]+?\");\n        return \"(?:(?!\".concat($aee334e867208ba0$var$escapeString(prevText), \")[^\").concat($aee334e867208ba0$var$escapeString(delimiter), \"])+?\");\n    };\n    while(i < tokens.length){\n        var char = tryConsume(\"CHAR\");\n        var name = tryConsume(\"NAME\");\n        var pattern = tryConsume(\"PATTERN\");\n        if (name || pattern) {\n            var prefix = char || \"\";\n            if (prefixes.indexOf(prefix) === -1) {\n                path += prefix;\n                prefix = \"\";\n            }\n            if (path) {\n                result.push(path);\n                path = \"\";\n            }\n            result.push({\n                name: name || key++,\n                prefix: prefix,\n                suffix: \"\",\n                pattern: pattern || safePattern(prefix),\n                modifier: tryConsume(\"MODIFIER\") || \"\"\n            });\n            continue;\n        }\n        var value = char || tryConsume(\"ESCAPED_CHAR\");\n        if (value) {\n            path += value;\n            continue;\n        }\n        if (path) {\n            result.push(path);\n            path = \"\";\n        }\n        var open = tryConsume(\"OPEN\");\n        if (open) {\n            var prefix = consumeText();\n            var name_1 = tryConsume(\"NAME\") || \"\";\n            var pattern_1 = tryConsume(\"PATTERN\") || \"\";\n            var suffix = consumeText();\n            mustConsume(\"CLOSE\");\n            result.push({\n                name: name_1 || (pattern_1 ? key++ : \"\"),\n                pattern: name_1 && !pattern_1 ? safePattern(prefix) : pattern_1,\n                prefix: prefix,\n                suffix: suffix,\n                modifier: tryConsume(\"MODIFIER\") || \"\"\n            });\n            continue;\n        }\n        mustConsume(\"END\");\n    }\n    return result;\n}\nfunction $aee334e867208ba0$export$ef7acd7185315e22(str, options) {\n    return $aee334e867208ba0$export$5b9bad9e403cf3d9($aee334e867208ba0$export$98e6a39c04603d36(str, options), options);\n}\nfunction $aee334e867208ba0$export$5b9bad9e403cf3d9(tokens, options) {\n    if (options === void 0) options = {};\n    var reFlags = $aee334e867208ba0$var$flags(options);\n    var _a = options.encode, encode = _a === void 0 ? function(x) {\n        return x;\n    } : _a, _b = options.validate, validate = _b === void 0 ? true : _b;\n    // Compile all the tokens into regexps.\n    var matches = tokens.map(function(token) {\n        if (typeof token === \"object\") return new RegExp(\"^(?:\".concat(token.pattern, \")$\"), reFlags);\n    });\n    return function(data) {\n        var path = \"\";\n        for(var i = 0; i < tokens.length; i++){\n            var token = tokens[i];\n            if (typeof token === \"string\") {\n                path += token;\n                continue;\n            }\n            var value = data ? data[token.name] : undefined;\n            var optional = token.modifier === \"?\" || token.modifier === \"*\";\n            var repeat = token.modifier === \"*\" || token.modifier === \"+\";\n            if (Array.isArray(value)) {\n                if (!repeat) throw new TypeError(\"Expected \\\"\".concat(token.name, \"\\\" to not repeat, but got an array\"));\n                if (value.length === 0) {\n                    if (optional) continue;\n                    throw new TypeError(\"Expected \\\"\".concat(token.name, \"\\\" to not be empty\"));\n                }\n                for(var j = 0; j < value.length; j++){\n                    var segment = encode(value[j], token);\n                    if (validate && !matches[i].test(segment)) throw new TypeError(\"Expected all \\\"\".concat(token.name, \"\\\" to match \\\"\").concat(token.pattern, \"\\\", but got \\\"\").concat(segment, \"\\\"\"));\n                    path += token.prefix + segment + token.suffix;\n                }\n                continue;\n            }\n            if (typeof value === \"string\" || typeof value === \"number\") {\n                var segment = encode(String(value), token);\n                if (validate && !matches[i].test(segment)) throw new TypeError(\"Expected \\\"\".concat(token.name, \"\\\" to match \\\"\").concat(token.pattern, \"\\\", but got \\\"\").concat(segment, \"\\\"\"));\n                path += token.prefix + segment + token.suffix;\n                continue;\n            }\n            if (optional) continue;\n            var typeOfMessage = repeat ? \"an array\" : \"a string\";\n            throw new TypeError(\"Expected \\\"\".concat(token.name, \"\\\" to be \").concat(typeOfMessage));\n        }\n        return path;\n    };\n}\nfunction $aee334e867208ba0$export$4659b591c19bdf3d(str, options) {\n    var keys = [];\n    var re = $aee334e867208ba0$export$71304158c7e35877(str, keys, options);\n    return $aee334e867208ba0$export$968e97c88708237a(re, keys, options);\n}\nfunction $aee334e867208ba0$export$968e97c88708237a(re, keys, options) {\n    if (options === void 0) options = {};\n    var _a = options.decode, decode = _a === void 0 ? function(x) {\n        return x;\n    } : _a;\n    return function(pathname) {\n        var m = re.exec(pathname);\n        if (!m) return false;\n        var path = m[0], index = m.index;\n        var params = Object.create(null);\n        var _loop_1 = function(i) {\n            if (m[i] === undefined) return \"continue\";\n            var key = keys[i - 1];\n            if (key.modifier === \"*\" || key.modifier === \"+\") params[key.name] = m[i].split(key.prefix + key.suffix).map(function(value) {\n                return decode(value, key);\n            });\n            else params[key.name] = decode(m[i], key);\n        };\n        for(var i = 1; i < m.length; i++)_loop_1(i);\n        return {\n            path: path,\n            index: index,\n            params: params\n        };\n    };\n}\n/**\n * Escape a regular expression string.\n */ function $aee334e867208ba0$var$escapeString(str) {\n    return str.replace(/([.+*?=^!:${}()[\\]|/\\\\])/g, \"\\\\$1\");\n}\n/**\n * Get the flags for a regexp from the options.\n */ function $aee334e867208ba0$var$flags(options) {\n    return options && options.sensitive ? \"\" : \"i\";\n}\n/**\n * Pull out keys from a regexp.\n */ function $aee334e867208ba0$var$regexpToRegexp(path, keys) {\n    if (!keys) return path;\n    var groupsRegex = /\\((?:\\?<(.*?)>)?(?!\\?)/g;\n    var index = 0;\n    var execResult = groupsRegex.exec(path.source);\n    while(execResult){\n        keys.push({\n            // Use parenthesized substring match if available, index otherwise\n            name: execResult[1] || index++,\n            prefix: \"\",\n            suffix: \"\",\n            modifier: \"\",\n            pattern: \"\"\n        });\n        execResult = groupsRegex.exec(path.source);\n    }\n    return path;\n}\n/**\n * Transform an array into a regexp.\n */ function $aee334e867208ba0$var$arrayToRegexp(paths, keys, options) {\n    var parts = paths.map(function(path) {\n        return $aee334e867208ba0$export$71304158c7e35877(path, keys, options).source;\n    });\n    return new RegExp(\"(?:\".concat(parts.join(\"|\"), \")\"), $aee334e867208ba0$var$flags(options));\n}\n/**\n * Create a path regexp from string input.\n */ function $aee334e867208ba0$var$stringToRegexp(path, keys, options) {\n    return $aee334e867208ba0$export$9a9303716def6456($aee334e867208ba0$export$98e6a39c04603d36(path, options), keys, options);\n}\nfunction $aee334e867208ba0$export$9a9303716def6456(tokens, keys, options) {\n    if (options === void 0) options = {};\n    var _a = options.strict, strict = _a === void 0 ? false : _a, _b = options.start, start = _b === void 0 ? true : _b, _c = options.end, end = _c === void 0 ? true : _c, _d = options.encode, encode = _d === void 0 ? function(x) {\n        return x;\n    } : _d, _e = options.delimiter, delimiter = _e === void 0 ? \"/#?\" : _e, _f = options.endsWith, endsWith = _f === void 0 ? \"\" : _f;\n    var endsWithRe = \"[\".concat($aee334e867208ba0$var$escapeString(endsWith), \"]|$\");\n    var delimiterRe = \"[\".concat($aee334e867208ba0$var$escapeString(delimiter), \"]\");\n    var route = start ? \"^\" : \"\";\n    // Iterate over the tokens and create our regexp string.\n    for(var _i = 0, tokens_1 = tokens; _i < tokens_1.length; _i++){\n        var token = tokens_1[_i];\n        if (typeof token === \"string\") route += $aee334e867208ba0$var$escapeString(encode(token));\n        else {\n            var prefix = $aee334e867208ba0$var$escapeString(encode(token.prefix));\n            var suffix = $aee334e867208ba0$var$escapeString(encode(token.suffix));\n            if (token.pattern) {\n                if (keys) keys.push(token);\n                if (prefix || suffix) {\n                    if (token.modifier === \"+\" || token.modifier === \"*\") {\n                        var mod = token.modifier === \"*\" ? \"?\" : \"\";\n                        route += \"(?:\".concat(prefix, \"((?:\").concat(token.pattern, \")(?:\").concat(suffix).concat(prefix, \"(?:\").concat(token.pattern, \"))*)\").concat(suffix, \")\").concat(mod);\n                    } else route += \"(?:\".concat(prefix, \"(\").concat(token.pattern, \")\").concat(suffix, \")\").concat(token.modifier);\n                } else {\n                    if (token.modifier === \"+\" || token.modifier === \"*\") throw new TypeError(\"Can not repeat \\\"\".concat(token.name, \"\\\" without a prefix and suffix\"));\n                    route += \"(\".concat(token.pattern, \")\").concat(token.modifier);\n                }\n            } else route += \"(?:\".concat(prefix).concat(suffix, \")\").concat(token.modifier);\n        }\n    }\n    if (end) {\n        if (!strict) route += \"\".concat(delimiterRe, \"?\");\n        route += !options.endsWith ? \"$\" : \"(?=\".concat(endsWithRe, \")\");\n    } else {\n        var endToken = tokens[tokens.length - 1];\n        var isEndDelimited = typeof endToken === \"string\" ? delimiterRe.indexOf(endToken[endToken.length - 1]) > -1 : endToken === undefined;\n        if (!strict) route += \"(?:\".concat(delimiterRe, \"(?=\").concat(endsWithRe, \"))?\");\n        if (!isEndDelimited) route += \"(?=\".concat(delimiterRe, \"|\").concat(endsWithRe, \")\");\n    }\n    return new RegExp(route, $aee334e867208ba0$var$flags(options));\n}\nfunction $aee334e867208ba0$export$71304158c7e35877(path, keys, options) {\n    if (path instanceof RegExp) return $aee334e867208ba0$var$regexpToRegexp(path, keys);\n    if (Array.isArray(path)) return $aee334e867208ba0$var$arrayToRegexp(path, keys, options);\n    return $aee334e867208ba0$var$stringToRegexp(path, keys, options);\n}\n\n\n\n\nfunction $d9d3e6e22f6ea036$export$a6cdc56e425d0d0a(o) {\n    return typeof o === \"object\" && !!o;\n}\nfunction $d9d3e6e22f6ea036$export$f6e2535fb5126e54(f) {\n    return typeof f === \"function\";\n}\nfunction $d9d3e6e22f6ea036$export$844ec244b1367d54(s) {\n    return typeof s === \"string\";\n}\nfunction $d9d3e6e22f6ea036$export$45b10814cc054894(value = []) {\n    return Array.isArray(value) ? value : [\n        value\n    ];\n}\nfunction $d9d3e6e22f6ea036$export$bef1f36f5486a6a3(msg) {\n    return `[Vaadin.Router] ${msg}`;\n}\nclass $d9d3e6e22f6ea036$export$78c95b58762d2106 extends Error {\n    code;\n    context;\n    constructor(context){\n        super($d9d3e6e22f6ea036$export$bef1f36f5486a6a3(`Page not found (${context.pathname})`));\n        this.context = context;\n        this.code = 404;\n    }\n}\nconst $d9d3e6e22f6ea036$export$264e4f112ccbf139 = Symbol(\"NotFoundResult\");\nfunction $d9d3e6e22f6ea036$export$8e53f060cd8fee7c(context) {\n    return new $d9d3e6e22f6ea036$export$78c95b58762d2106(context);\n}\nfunction $d9d3e6e22f6ea036$export$b09f2ff0bbcb43c7(path) {\n    return (Array.isArray(path) ? path[0] : path) ?? \"\";\n}\nfunction $d9d3e6e22f6ea036$export$9085faa507254a1c(route) {\n    return $d9d3e6e22f6ea036$export$b09f2ff0bbcb43c7(route?.path);\n}\nfunction $d9d3e6e22f6ea036$export$211bb381e74b95a1(children) {\n    return Array.isArray(children) && children.length > 0 ? children : void 0;\n}\n\n\nconst $5827ae9c1dc37950$var$cache = /* @__PURE__ */ new Map();\n$5827ae9c1dc37950$var$cache.set(\"|false\", {\n    keys: [],\n    pattern: /(?:)/u\n});\nfunction $5827ae9c1dc37950$var$decodeParam(val) {\n    try {\n        return decodeURIComponent(val);\n    } catch  {\n        return val;\n    }\n}\nfunction $5827ae9c1dc37950$var$matchPath(routePath, path, exact = false, parentKeys = [], parentParams) {\n    const cacheKey = `${routePath}|${String(exact)}`;\n    const _path = (0, $d9d3e6e22f6ea036$export$b09f2ff0bbcb43c7)(path);\n    let regexp = $5827ae9c1dc37950$var$cache.get(cacheKey);\n    if (!regexp) {\n        const keys = [];\n        regexp = {\n            keys: keys,\n            pattern: (0, $aee334e867208ba0$export$71304158c7e35877)(routePath, keys, {\n                end: exact,\n                strict: routePath === \"\"\n            })\n        };\n        $5827ae9c1dc37950$var$cache.set(cacheKey, regexp);\n    }\n    const m = regexp.pattern.exec(_path);\n    if (!m) return null;\n    const params = {\n        ...parentParams\n    };\n    for(let i = 1; i < m.length; i++){\n        const key = regexp.keys[i - 1];\n        const prop = key.name;\n        const value = m[i];\n        if (value !== void 0 || !Object.hasOwn(params, prop)) {\n            if (key.modifier === \"+\" || key.modifier === \"*\") params[prop] = value ? value.split(/[/?#]/u).map($5827ae9c1dc37950$var$decodeParam) : [];\n            else params[prop] = value ? $5827ae9c1dc37950$var$decodeParam(value) : value;\n        }\n    }\n    return {\n        keys: [\n            ...parentKeys,\n            ...regexp.keys\n        ],\n        params: params,\n        path: m[0]\n    };\n}\nvar $5827ae9c1dc37950$export$2e2bcd8739ae039 = $5827ae9c1dc37950$var$matchPath;\n\n\n\nfunction $33b86c3940475ac4$var$matchRoute(route, pathname, ignoreLeadingSlash, parentKeys, parentParams) {\n    let match;\n    let childMatches;\n    let childIndex = 0;\n    let routepath = (0, $d9d3e6e22f6ea036$export$9085faa507254a1c)(route);\n    if (routepath.startsWith(\"/\")) {\n        if (ignoreLeadingSlash) routepath = routepath.substring(1);\n        ignoreLeadingSlash = true;\n    }\n    return {\n        next (routeToSkip) {\n            if (route === routeToSkip) return {\n                done: true,\n                value: void 0\n            };\n            route.__children ??= (0, $d9d3e6e22f6ea036$export$211bb381e74b95a1)(route.children);\n            const children = route.__children ?? [];\n            const exact = !route.__children && !route.children;\n            if (!match) {\n                match = (0, $5827ae9c1dc37950$export$2e2bcd8739ae039)(routepath, pathname, exact, parentKeys, parentParams);\n                if (match) return {\n                    value: {\n                        keys: match.keys,\n                        params: match.params,\n                        path: match.path,\n                        route: route\n                    }\n                };\n            }\n            if (match && children.length > 0) while(childIndex < children.length){\n                if (!childMatches) {\n                    const childRoute = children[childIndex];\n                    childRoute.parent = route;\n                    let matchedLength = match.path.length;\n                    if (matchedLength > 0 && pathname.charAt(matchedLength) === \"/\") matchedLength += 1;\n                    childMatches = $33b86c3940475ac4$var$matchRoute(childRoute, pathname.substring(matchedLength), ignoreLeadingSlash, match.keys, match.params);\n                }\n                const childMatch = childMatches.next(routeToSkip);\n                if (!childMatch.done) return {\n                    done: false,\n                    value: childMatch.value\n                };\n                childMatches = null;\n                childIndex += 1;\n            }\n            return {\n                done: true,\n                value: void 0\n            };\n        }\n    };\n}\nvar $33b86c3940475ac4$export$2e2bcd8739ae039 = $33b86c3940475ac4$var$matchRoute;\n\n\n\nfunction $6c597e935b3ed056$export$2e2bcd8739ae039(context) {\n    if ((0, $d9d3e6e22f6ea036$export$f6e2535fb5126e54)(context.route.action)) return context.route.action(context);\n    return void 0;\n}\n\n\n\nfunction $330a99cf2659a530$var$isDescendantRoute(route, maybeParent) {\n    let _route = route;\n    while(_route){\n        _route = _route.parent;\n        if (_route === maybeParent) return true;\n    }\n    return false;\n}\nfunction $330a99cf2659a530$var$isRouteContext(value) {\n    return !!value && typeof value === \"object\" && \"next\" in value && \"params\" in value && \"result\" in value && \"route\" in value;\n}\nclass $330a99cf2659a530$export$b5e98c7d6c2b9496 extends Error {\n    code;\n    context;\n    constructor(context, options){\n        let errorMessage = `Path '${context.pathname}' is not properly resolved due to an error.`;\n        const routePath = (0, $d9d3e6e22f6ea036$export$9085faa507254a1c)(context.route);\n        if (routePath) errorMessage += ` Resolution had failed on route: '${routePath}'`;\n        super(errorMessage, options);\n        this.code = options?.code;\n        this.context = context;\n    }\n    warn() {\n        console.warn(this.message);\n    }\n}\nfunction $330a99cf2659a530$var$updateChainForRoute(context, match) {\n    const { path: path, route: route } = match;\n    if (route && !route.__synthetic) {\n        const item = {\n            path: path,\n            route: route\n        };\n        if (route.parent && context.chain) for(let i = context.chain.length - 1; i >= 0; i--){\n            if (context.chain[i].route === route.parent) break;\n            context.chain.pop();\n        }\n        context.chain?.push(item);\n    }\n}\nclass $330a99cf2659a530$export$2e2bcd8739ae039 {\n    /**\n   * The base URL for all routes in the router instance. By default,\n   * if the base element exists in the `<head>`, vaadin-router\n   * takes the `<base href>` attribute value, resolved against the current\n   * `document.URL`.\n   */ baseUrl;\n    #context;\n    errorHandler;\n    resolveRoute;\n    #root;\n    constructor(routes, { baseUrl: baseUrl = \"\", context: context, errorHandler: errorHandler, resolveRoute: resolveRoute = (0, $6c597e935b3ed056$export$2e2bcd8739ae039) } = {}){\n        if (Object(routes) !== routes) throw new TypeError(\"Invalid routes\");\n        this.baseUrl = baseUrl;\n        this.errorHandler = errorHandler;\n        this.resolveRoute = resolveRoute;\n        if (Array.isArray(routes)) this.#root = {\n            __children: routes,\n            __synthetic: true,\n            action: ()=>void 0,\n            path: \"\"\n        };\n        else this.#root = {\n            ...routes,\n            parent: void 0\n        };\n        this.#context = {\n            ...context,\n            hash: \"\",\n            // eslint-disable-next-line @typescript-eslint/require-await\n            async next () {\n                return 0, $d9d3e6e22f6ea036$export$264e4f112ccbf139;\n            },\n            params: {},\n            pathname: \"\",\n            resolver: this,\n            route: this.#root,\n            search: \"\",\n            chain: []\n        };\n    }\n    get root() {\n        return this.#root;\n    }\n    get context() {\n        return this.#context;\n    }\n    /**\n   * If the baseUrl property is set, transforms the baseUrl and returns the full\n   * actual `base` string for using in the `new URL(path, base);` and for\n   * prepernding the paths with. The returned base ends with a trailing slash.\n   *\n   * Otherwise, returns empty string.\n   */ get __effectiveBaseUrl() {\n        return this.baseUrl ? new URL(this.baseUrl, document.baseURI || document.URL).href.replace(/[^/]*$/u, \"\") : \"\";\n    }\n    /**\n   * Returns the current list of routes (as a shallow copy). Adding / removing\n   * routes to / from the returned array does not affect the routing config,\n   * but modifying the route objects does.\n   *\n   * @public\n   */ getRoutes() {\n        return [\n            ...this.#root.__children ?? []\n        ];\n    }\n    /**\n   * Removes all existing routes from the routing config.\n   *\n   * @public\n   */ removeRoutes() {\n        this.#root.__children = [];\n    }\n    /**\n   * Asynchronously resolves the given pathname, i.e. finds all routes matching\n   * the pathname and tries resolving them one after another in the order they\n   * are listed in the routes config until the first non-null result.\n   *\n   * Returns a promise that is fulfilled with the return value of an object that consists of the first\n   * route handler result that returns something other than `null` or `undefined` and context used to get this result.\n   *\n   * If no route handlers return a non-null result, or if no route matches the\n   * given pathname the returned promise is rejected with a 'page not found'\n   * `Error`.\n   *\n   * @param pathnameOrContext - the pathname to\n   *    resolve or a context object with a `pathname` property and other\n   *    properties to pass to the route resolver functions.\n   */ async resolve(pathnameOrContext) {\n        const self = this;\n        const context = {\n            ...this.#context,\n            ...(0, $d9d3e6e22f6ea036$export$844ec244b1367d54)(pathnameOrContext) ? {\n                pathname: pathnameOrContext\n            } : pathnameOrContext,\n            next: // eslint-disable-next-line @typescript-eslint/no-use-before-define\n            next\n        };\n        const match = (0, $33b86c3940475ac4$export$2e2bcd8739ae039)(this.#root, this.__normalizePathname(context.pathname) ?? context.pathname, !!this.baseUrl);\n        const resolve = this.resolveRoute;\n        let matches = null;\n        let nextMatches = null;\n        let currentContext = context;\n        async function next(resume = false, parent = matches?.value?.route, prevResult) {\n            const routeToSkip = prevResult === null ? matches?.value?.route : void 0;\n            matches = nextMatches ?? match.next(routeToSkip);\n            nextMatches = null;\n            if (!resume) {\n                if (!!matches.done || !$330a99cf2659a530$var$isDescendantRoute(matches.value.route, parent)) {\n                    nextMatches = matches;\n                    return 0, $d9d3e6e22f6ea036$export$264e4f112ccbf139;\n                }\n            }\n            if (matches.done) throw (0, $d9d3e6e22f6ea036$export$8e53f060cd8fee7c)(context);\n            currentContext = {\n                ...context,\n                params: matches.value.params,\n                route: matches.value.route,\n                chain: currentContext.chain?.slice()\n            };\n            $330a99cf2659a530$var$updateChainForRoute(currentContext, matches.value);\n            const resolution = await resolve(currentContext);\n            if (resolution !== null && resolution !== void 0 && resolution !== (0, $d9d3e6e22f6ea036$export$264e4f112ccbf139)) {\n                currentContext.result = $330a99cf2659a530$var$isRouteContext(resolution) ? resolution.result : resolution;\n                self.#context = currentContext;\n                return currentContext;\n            }\n            return await next(resume, parent, resolution);\n        }\n        try {\n            return await next(true, this.#root);\n        } catch (error) {\n            const _error = error instanceof (0, $d9d3e6e22f6ea036$export$78c95b58762d2106) ? error : new $330a99cf2659a530$export$b5e98c7d6c2b9496(currentContext, {\n                code: 500,\n                cause: error\n            });\n            if (this.errorHandler) {\n                currentContext.result = this.errorHandler(_error);\n                return currentContext;\n            }\n            throw error;\n        }\n    }\n    /**\n   * Sets the routing config (replacing the existing one).\n   *\n   * @param routes - a single route or an array of those\n   *    (the array is shallow copied)\n   */ setRoutes(routes) {\n        this.#root.__children = [\n            ...(0, $d9d3e6e22f6ea036$export$45b10814cc054894)(routes)\n        ];\n    }\n    /**\n   * If the baseUrl is set, matches the pathname with the routers baseUrl,\n   * and returns the local pathname with the baseUrl stripped out.\n   *\n   * If the pathname does not match the baseUrl, returns undefined.\n   *\n   * If the `baseUrl` is not set, returns the unmodified pathname argument.\n   */ __normalizePathname(pathname) {\n        if (!this.baseUrl) return pathname;\n        const base = this.__effectiveBaseUrl;\n        const url = pathname.startsWith(\"/\") ? new URL(base).origin + pathname : `./${pathname}`;\n        const normalizedUrl = new URL(url, base).href;\n        if (normalizedUrl.startsWith(base)) return normalizedUrl.slice(base.length);\n        return void 0;\n    }\n    /**\n   * Appends one or several routes to the routing config and returns the\n   * effective routing config after the operation.\n   *\n   * @param routes - a single route or an array of those\n   *    (the array is shallow copied)\n   */ addRoutes(routes) {\n        this.#root.__children = [\n            ...this.#root.__children ?? [],\n            ...(0, $d9d3e6e22f6ea036$export$45b10814cc054894)(routes)\n        ];\n        return this.getRoutes();\n    }\n}\n\n\n\nfunction $41c693d437999aea$var$cacheRoutes(routesByName, route, routes, cacheKeyProvider) {\n    const name = route.name ?? cacheKeyProvider?.(route);\n    if (name) {\n        if (routesByName.has(name)) routesByName.get(name)?.push(route);\n        else routesByName.set(name, [\n            route\n        ]);\n    }\n    if (Array.isArray(routes)) for (const childRoute of routes){\n        childRoute.parent = route;\n        $41c693d437999aea$var$cacheRoutes(routesByName, childRoute, childRoute.__children ?? childRoute.children, cacheKeyProvider);\n    }\n}\nfunction $41c693d437999aea$var$getRouteByName(routesByName, routeName) {\n    const routes = routesByName.get(routeName);\n    if (routes) {\n        if (routes.length > 1) throw new Error(`Duplicate route with name \"${routeName}\". Try seting unique 'name' route properties.`);\n        return routes[0];\n    }\n    return void 0;\n}\nfunction $41c693d437999aea$var$generateUrls(resolver, options = {}) {\n    if (!(resolver instanceof (0, $330a99cf2659a530$export$2e2bcd8739ae039))) throw new TypeError(\"An instance of Resolver is expected\");\n    const cache = /* @__PURE__ */ new Map();\n    const routesByName = /* @__PURE__ */ new Map();\n    return (routeName, params)=>{\n        let route = $41c693d437999aea$var$getRouteByName(routesByName, routeName);\n        if (!route) {\n            routesByName.clear();\n            $41c693d437999aea$var$cacheRoutes(routesByName, resolver.root, resolver.root.__children, options.cacheKeyProvider);\n            route = $41c693d437999aea$var$getRouteByName(routesByName, routeName);\n            if (!route) throw new Error(`Route \"${routeName}\" not found`);\n        }\n        let cached = route.fullPath ? cache.get(route.fullPath) : void 0;\n        if (!cached) {\n            let fullPath = (0, $d9d3e6e22f6ea036$export$9085faa507254a1c)(route);\n            let rt = route.parent;\n            while(rt){\n                const path = (0, $d9d3e6e22f6ea036$export$9085faa507254a1c)(rt);\n                if (path) fullPath = `${path.replace(/\\/$/u, \"\")}/${fullPath.replace(/^\\//u, \"\")}`;\n                rt = rt.parent;\n            }\n            const tokens = (0, $aee334e867208ba0$export$98e6a39c04603d36)(fullPath);\n            const keys = /* @__PURE__ */ Object.create(null);\n            for (const item of tokens)if (!(0, $d9d3e6e22f6ea036$export$844ec244b1367d54)(item)) keys[item.name] = true;\n            cached = {\n                keys: keys,\n                tokens: tokens\n            };\n            cache.set(fullPath, cached);\n            route.fullPath = fullPath;\n        }\n        const toPath = (0, $aee334e867208ba0$export$5b9bad9e403cf3d9)(cached.tokens, {\n            encode: encodeURIComponent,\n            ...options\n        });\n        let url = toPath(params) || \"/\";\n        if (options.stringifyQueryParams && params) {\n            const queryParams = {};\n            for (const [key, value] of Object.entries(params))if (!(key in cached.keys) && value) queryParams[key] = value;\n            const query = options.stringifyQueryParams(queryParams);\n            if (query) url += query.startsWith(\"?\") ? query : `?${query}`;\n        }\n        return url;\n    };\n}\nvar $41c693d437999aea$export$2e2bcd8739ae039 = $41c693d437999aea$var$generateUrls;\n\n\n\n/* This file is autogenerated from src/vaadin-usage-statistics.tpl.html */ /*\n\nThis script gathers usage statistics from the application running in development mode.\n\nStatistics gathering is automatically disabled and excluded from production builds.\n\nFor details and to opt-out, see https://github.com/vaadin/vaadin-usage-statistics.\n\n*/ /*\n  FIXME(polymer-modulizer): the above comments were extracted\n  from HTML and may be out of place here. Review them and\n  then delete this comment!\n*/ const $ce7a05f478de2e36$var$DEV_MODE_CODE_REGEXP = /\\/\\*[\\*!]\\s+vaadin-dev-mode:start([\\s\\S]*)vaadin-dev-mode:end\\s+\\*\\*\\//i;\nconst $ce7a05f478de2e36$var$FlowClients = window.Vaadin && window.Vaadin.Flow && window.Vaadin.Flow.clients;\nfunction $ce7a05f478de2e36$var$isMinified() {\n    function test() {\n        /** vaadin-dev-mode:start\n    return false;\n    vaadin-dev-mode:end **/ return true;\n    }\n    return $ce7a05f478de2e36$var$uncommentAndRun(test);\n}\nfunction $ce7a05f478de2e36$var$isDevelopmentMode() {\n    try {\n        if ($ce7a05f478de2e36$var$isForcedDevelopmentMode()) return true;\n        if (!$ce7a05f478de2e36$var$isLocalhost()) return false;\n        if ($ce7a05f478de2e36$var$FlowClients) return !$ce7a05f478de2e36$var$isFlowProductionMode();\n        return !$ce7a05f478de2e36$var$isMinified();\n    } catch (e) {\n        // Some error in this code, assume production so no further actions will be taken\n        return false;\n    }\n}\nfunction $ce7a05f478de2e36$var$isForcedDevelopmentMode() {\n    return localStorage.getItem(\"vaadin.developmentmode.force\");\n}\nfunction $ce7a05f478de2e36$var$isLocalhost() {\n    return [\n        \"localhost\",\n        \"127.0.0.1\"\n    ].indexOf(window.location.hostname) >= 0;\n}\nfunction $ce7a05f478de2e36$var$isFlowProductionMode() {\n    if ($ce7a05f478de2e36$var$FlowClients) {\n        const productionModeApps = Object.keys($ce7a05f478de2e36$var$FlowClients).map((key)=>$ce7a05f478de2e36$var$FlowClients[key]).filter((client)=>client.productionMode);\n        if (productionModeApps.length > 0) return true;\n    }\n    return false;\n}\nfunction $ce7a05f478de2e36$var$uncommentAndRun(callback, args) {\n    if (typeof callback !== 'function') return;\n    const match = $ce7a05f478de2e36$var$DEV_MODE_CODE_REGEXP.exec(callback.toString());\n    if (match) try {\n        // requires CSP: script-src 'unsafe-eval'\n        callback = new Function(match[1]);\n    } catch (e) {\n        // eat the exception\n        console.log('vaadin-development-mode-detector: uncommentAndRun() failed', e);\n    }\n    return callback(args);\n}\n// A guard against polymer-modulizer removing the window.Vaadin\n// initialization above.\nwindow['Vaadin'] = window['Vaadin'] || {};\nconst $ce7a05f478de2e36$export$75b841fa655dc08 = function(callback, args) {\n    if (window.Vaadin.developmentMode) return $ce7a05f478de2e36$var$uncommentAndRun(callback, args);\n};\nif (window.Vaadin.developmentMode === undefined) window.Vaadin.developmentMode = $ce7a05f478de2e36$var$isDevelopmentMode();\n\n\nfunction $37ebb7e6256db562$var$maybeGatherAndSendStats() {\n/*! vaadin-dev-mode:start\n  (function () {\n'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar getPolymerVersion = function getPolymerVersion() {\n  return window.Polymer && window.Polymer.version;\n};\n\nvar StatisticsGatherer = function () {\n  function StatisticsGatherer(logger) {\n    classCallCheck(this, StatisticsGatherer);\n\n    this.now = new Date().getTime();\n    this.logger = logger;\n  }\n\n  createClass(StatisticsGatherer, [{\n    key: 'frameworkVersionDetectors',\n    value: function frameworkVersionDetectors() {\n      return {\n        'Flow': function Flow() {\n          if (window.Vaadin && window.Vaadin.Flow && window.Vaadin.Flow.clients) {\n            var flowVersions = Object.keys(window.Vaadin.Flow.clients).map(function (key) {\n              return window.Vaadin.Flow.clients[key];\n            }).filter(function (client) {\n              return client.getVersionInfo;\n            }).map(function (client) {\n              return client.getVersionInfo().flow;\n            });\n            if (flowVersions.length > 0) {\n              return flowVersions[0];\n            }\n          }\n        },\n        'Vaadin Framework': function VaadinFramework() {\n          if (window.vaadin && window.vaadin.clients) {\n            var frameworkVersions = Object.values(window.vaadin.clients).filter(function (client) {\n              return client.getVersionInfo;\n            }).map(function (client) {\n              return client.getVersionInfo().vaadinVersion;\n            });\n            if (frameworkVersions.length > 0) {\n              return frameworkVersions[0];\n            }\n          }\n        },\n        'AngularJs': function AngularJs() {\n          if (window.angular && window.angular.version && window.angular.version) {\n            return window.angular.version.full;\n          }\n        },\n        'Angular': function Angular() {\n          if (window.ng) {\n            var tags = document.querySelectorAll(\"[ng-version]\");\n            if (tags.length > 0) {\n              return tags[0].getAttribute(\"ng-version\");\n            }\n            return \"Unknown\";\n          }\n        },\n        'Backbone.js': function BackboneJs() {\n          if (window.Backbone) {\n            return window.Backbone.VERSION;\n          }\n        },\n        'React': function React() {\n          var reactSelector = '[data-reactroot], [data-reactid]';\n          if (!!document.querySelector(reactSelector)) {\n            // React does not publish the version by default\n            return \"unknown\";\n          }\n        },\n        'Ember': function Ember() {\n          if (window.Em && window.Em.VERSION) {\n            return window.Em.VERSION;\n          } else if (window.Ember && window.Ember.VERSION) {\n            return window.Ember.VERSION;\n          }\n        },\n        'jQuery': function (_jQuery) {\n          function jQuery() {\n            return _jQuery.apply(this, arguments);\n          }\n\n          jQuery.toString = function () {\n            return _jQuery.toString();\n          };\n\n          return jQuery;\n        }(function () {\n          if (typeof jQuery === 'function' && jQuery.prototype.jquery !== undefined) {\n            return jQuery.prototype.jquery;\n          }\n        }),\n        'Polymer': function Polymer() {\n          var version = getPolymerVersion();\n          if (version) {\n            return version;\n          }\n        },\n        'LitElement': function LitElement() {\n          var version = window.litElementVersions && window.litElementVersions[0];\n          if (version) {\n            return version;\n          }\n        },\n        'LitHtml': function LitHtml() {\n          var version = window.litHtmlVersions && window.litHtmlVersions[0];\n          if (version) {\n            return version;\n          }\n        },\n        'Vue.js': function VueJs() {\n          if (window.Vue) {\n            return window.Vue.version;\n          }\n        }\n      };\n    }\n  }, {\n    key: 'getUsedVaadinElements',\n    value: function getUsedVaadinElements(elements) {\n      var version = getPolymerVersion();\n      var elementClasses = void 0;\n      // NOTE: In case you edit the code here, YOU MUST UPDATE any statistics reporting code in Flow.\n      // Check all locations calling the method getEntries() in\n      // https://github.com/vaadin/flow/blob/master/flow-server/src/main/java/com/vaadin/flow/internal/UsageStatistics.java#L106\n      // Currently it is only used by BootstrapHandler.\n      if (version && version.indexOf('2') === 0) {\n        // Polymer 2: components classes are stored in window.Vaadin\n        elementClasses = Object.keys(window.Vaadin).map(function (c) {\n          return window.Vaadin[c];\n        }).filter(function (c) {\n          return c.is;\n        });\n      } else {\n        // Polymer 3: components classes are stored in window.Vaadin.registrations\n        elementClasses = window.Vaadin.registrations || [];\n      }\n      elementClasses.forEach(function (klass) {\n        var version = klass.version ? klass.version : \"0.0.0\";\n        elements[klass.is] = { version: version };\n      });\n    }\n  }, {\n    key: 'getUsedVaadinThemes',\n    value: function getUsedVaadinThemes(themes) {\n      ['Lumo', 'Material'].forEach(function (themeName) {\n        var theme;\n        var version = getPolymerVersion();\n        if (version && version.indexOf('2') === 0) {\n          // Polymer 2: themes are stored in window.Vaadin\n          theme = window.Vaadin[themeName];\n        } else {\n          // Polymer 3: themes are stored in custom element registry\n          theme = customElements.get('vaadin-' + themeName.toLowerCase() + '-styles');\n        }\n        if (theme && theme.version) {\n          themes[themeName] = { version: theme.version };\n        }\n      });\n    }\n  }, {\n    key: 'getFrameworks',\n    value: function getFrameworks(frameworks) {\n      var detectors = this.frameworkVersionDetectors();\n      Object.keys(detectors).forEach(function (framework) {\n        var detector = detectors[framework];\n        try {\n          var version = detector();\n          if (version) {\n            frameworks[framework] = { version: version };\n          }\n        } catch (e) {}\n      });\n    }\n  }, {\n    key: 'gather',\n    value: function gather(storage) {\n      var storedStats = storage.read();\n      var gatheredStats = {};\n      var types = [\"elements\", \"frameworks\", \"themes\"];\n\n      types.forEach(function (type) {\n        gatheredStats[type] = {};\n        if (!storedStats[type]) {\n          storedStats[type] = {};\n        }\n      });\n\n      var previousStats = JSON.stringify(storedStats);\n\n      this.getUsedVaadinElements(gatheredStats.elements);\n      this.getFrameworks(gatheredStats.frameworks);\n      this.getUsedVaadinThemes(gatheredStats.themes);\n\n      var now = this.now;\n      types.forEach(function (type) {\n        var keys = Object.keys(gatheredStats[type]);\n        keys.forEach(function (key) {\n          if (!storedStats[type][key] || _typeof(storedStats[type][key]) != _typeof({})) {\n            storedStats[type][key] = { firstUsed: now };\n          }\n          // Discards any previously logged version number\n          storedStats[type][key].version = gatheredStats[type][key].version;\n          storedStats[type][key].lastUsed = now;\n        });\n      });\n\n      var newStats = JSON.stringify(storedStats);\n      storage.write(newStats);\n      if (newStats != previousStats && Object.keys(storedStats).length > 0) {\n        this.logger.debug(\"New stats: \" + newStats);\n      }\n    }\n  }]);\n  return StatisticsGatherer;\n}();\n\nvar StatisticsStorage = function () {\n  function StatisticsStorage(key) {\n    classCallCheck(this, StatisticsStorage);\n\n    this.key = key;\n  }\n\n  createClass(StatisticsStorage, [{\n    key: 'read',\n    value: function read() {\n      var localStorageStatsString = localStorage.getItem(this.key);\n      try {\n        return JSON.parse(localStorageStatsString ? localStorageStatsString : '{}');\n      } catch (e) {\n        return {};\n      }\n    }\n  }, {\n    key: 'write',\n    value: function write(data) {\n      localStorage.setItem(this.key, data);\n    }\n  }, {\n    key: 'clear',\n    value: function clear() {\n      localStorage.removeItem(this.key);\n    }\n  }, {\n    key: 'isEmpty',\n    value: function isEmpty() {\n      var storedStats = this.read();\n      var empty = true;\n      Object.keys(storedStats).forEach(function (key) {\n        if (Object.keys(storedStats[key]).length > 0) {\n          empty = false;\n        }\n      });\n\n      return empty;\n    }\n  }]);\n  return StatisticsStorage;\n}();\n\nvar StatisticsSender = function () {\n  function StatisticsSender(url, logger) {\n    classCallCheck(this, StatisticsSender);\n\n    this.url = url;\n    this.logger = logger;\n  }\n\n  createClass(StatisticsSender, [{\n    key: 'send',\n    value: function send(data, errorHandler) {\n      var logger = this.logger;\n\n      if (navigator.onLine === false) {\n        logger.debug(\"Offline, can't send\");\n        errorHandler();\n        return;\n      }\n      logger.debug(\"Sending data to \" + this.url);\n\n      var req = new XMLHttpRequest();\n      req.withCredentials = true;\n      req.addEventListener(\"load\", function () {\n        // Stats sent, nothing more to do\n        logger.debug(\"Response: \" + req.responseText);\n      });\n      req.addEventListener(\"error\", function () {\n        logger.debug(\"Send failed\");\n        errorHandler();\n      });\n      req.addEventListener(\"abort\", function () {\n        logger.debug(\"Send aborted\");\n        errorHandler();\n      });\n      req.open(\"POST\", this.url);\n      req.setRequestHeader(\"Content-Type\", \"application/json\");\n      req.send(data);\n    }\n  }]);\n  return StatisticsSender;\n}();\n\nvar StatisticsLogger = function () {\n  function StatisticsLogger(id) {\n    classCallCheck(this, StatisticsLogger);\n\n    this.id = id;\n  }\n\n  createClass(StatisticsLogger, [{\n    key: '_isDebug',\n    value: function _isDebug() {\n      return localStorage.getItem(\"vaadin.\" + this.id + \".debug\");\n    }\n  }, {\n    key: 'debug',\n    value: function debug(msg) {\n      if (this._isDebug()) {\n        console.info(this.id + \": \" + msg);\n      }\n    }\n  }]);\n  return StatisticsLogger;\n}();\n\nvar UsageStatistics = function () {\n  function UsageStatistics() {\n    classCallCheck(this, UsageStatistics);\n\n    this.now = new Date();\n    this.timeNow = this.now.getTime();\n    this.gatherDelay = 10; // Delay between loading this file and gathering stats\n    this.initialDelay = 24 * 60 * 60;\n\n    this.logger = new StatisticsLogger(\"statistics\");\n    this.storage = new StatisticsStorage(\"vaadin.statistics.basket\");\n    this.gatherer = new StatisticsGatherer(this.logger);\n    this.sender = new StatisticsSender(\"https://tools.vaadin.com/usage-stats/submit\", this.logger);\n  }\n\n  createClass(UsageStatistics, [{\n    key: 'maybeGatherAndSend',\n    value: function maybeGatherAndSend() {\n      var _this = this;\n\n      if (localStorage.getItem(UsageStatistics.optOutKey)) {\n        return;\n      }\n      this.gatherer.gather(this.storage);\n      setTimeout(function () {\n        _this.maybeSend();\n      }, this.gatherDelay * 1000);\n    }\n  }, {\n    key: 'lottery',\n    value: function lottery() {\n      return true;\n    }\n  }, {\n    key: 'currentMonth',\n    value: function currentMonth() {\n      return this.now.getYear() * 12 + this.now.getMonth();\n    }\n  }, {\n    key: 'maybeSend',\n    value: function maybeSend() {\n      var firstUse = Number(localStorage.getItem(UsageStatistics.firstUseKey));\n      var monthProcessed = Number(localStorage.getItem(UsageStatistics.monthProcessedKey));\n\n      if (!firstUse) {\n        // Use a grace period to avoid interfering with tests, incognito mode etc\n        firstUse = this.timeNow;\n        localStorage.setItem(UsageStatistics.firstUseKey, firstUse);\n      }\n\n      if (this.timeNow < firstUse + this.initialDelay * 1000) {\n        this.logger.debug(\"No statistics will be sent until the initial delay of \" + this.initialDelay + \"s has passed\");\n        return;\n      }\n      if (this.currentMonth() <= monthProcessed) {\n        this.logger.debug(\"This month has already been processed\");\n        return;\n      }\n      localStorage.setItem(UsageStatistics.monthProcessedKey, this.currentMonth());\n      // Use random sampling\n      if (this.lottery()) {\n        this.logger.debug(\"Congratulations, we have a winner!\");\n      } else {\n        this.logger.debug(\"Sorry, no stats from you this time\");\n        return;\n      }\n\n      this.send();\n    }\n  }, {\n    key: 'send',\n    value: function send() {\n      // Ensure we have the latest data\n      this.gatherer.gather(this.storage);\n\n      // Read, send and clean up\n      var data = this.storage.read();\n      data[\"firstUse\"] = Number(localStorage.getItem(UsageStatistics.firstUseKey));\n      data[\"usageStatisticsVersion\"] = UsageStatistics.version;\n      var info = 'This request contains usage statistics gathered from the application running in development mode. \\n\\nStatistics gathering is automatically disabled and excluded from production builds.\\n\\nFor details and to opt-out, see https://github.com/vaadin/vaadin-usage-statistics.\\n\\n\\n\\n';\n      var self = this;\n      this.sender.send(info + JSON.stringify(data), function () {\n        // Revert the 'month processed' flag\n        localStorage.setItem(UsageStatistics.monthProcessedKey, self.currentMonth() - 1);\n      });\n    }\n  }], [{\n    key: 'version',\n    get: function get$1() {\n      return '2.1.2';\n    }\n  }, {\n    key: 'firstUseKey',\n    get: function get$1() {\n      return 'vaadin.statistics.firstuse';\n    }\n  }, {\n    key: 'monthProcessedKey',\n    get: function get$1() {\n      return 'vaadin.statistics.monthProcessed';\n    }\n  }, {\n    key: 'optOutKey',\n    get: function get$1() {\n      return 'vaadin.statistics.optout';\n    }\n  }]);\n  return UsageStatistics;\n}();\n\ntry {\n  window.Vaadin = window.Vaadin || {};\n  window.Vaadin.usageStatsChecker = window.Vaadin.usageStatsChecker || new UsageStatistics();\n  window.Vaadin.usageStatsChecker.maybeGatherAndSend();\n} catch (e) {\n  // Intentionally ignored as this is not a problem in the app being developed\n}\n\n}());\n\n  vaadin-dev-mode:end **/ }\nconst $37ebb7e6256db562$export$32d884d7346a67c0 = function() {\n    if (typeof (0, $ce7a05f478de2e36$export$75b841fa655dc08) === 'function') return (0, $ce7a05f478de2e36$export$75b841fa655dc08)($37ebb7e6256db562$var$maybeGatherAndSendStats);\n};\n\n\n\n\nfunction $aa000bcaed4d108c$var$__REGISTER__(feature, vaadinObj = window.Vaadin ??= {}) {\n    vaadinObj.registrations ??= [];\n    vaadinObj.registrations.push({\n        is: feature ? `${\"@vaadin/router\"}/${feature}` : \"@vaadin/router\",\n        version: \"2.0.0\"\n    });\n}\n$aa000bcaed4d108c$var$__REGISTER__();\n(0, $37ebb7e6256db562$export$32d884d7346a67c0)();\n\n\n\n\n\nconst $807fa8d631faba60$var$willAnimate = (elem)=>{\n    const name = getComputedStyle(elem).getPropertyValue(\"animation-name\");\n    return name && name !== \"none\";\n};\nconst $807fa8d631faba60$var$waitForAnimation = (elem, cb)=>{\n    const listener = ()=>{\n        elem.removeEventListener(\"animationend\", listener);\n        cb();\n    };\n    elem.addEventListener(\"animationend\", listener);\n};\nasync function $807fa8d631faba60$var$animate(elem, className) {\n    elem.classList.add(className);\n    return await new Promise((resolve)=>{\n        if ($807fa8d631faba60$var$willAnimate(elem)) {\n            const rect = elem.getBoundingClientRect();\n            const size = `height: ${rect.bottom - rect.top}px; width: ${rect.right - rect.left}px`;\n            elem.setAttribute(\"style\", `position: absolute; ${size}`);\n            $807fa8d631faba60$var$waitForAnimation(elem, ()=>{\n                elem.classList.remove(className);\n                elem.removeAttribute(\"style\");\n                resolve();\n            });\n        } else {\n            elem.classList.remove(className);\n            resolve();\n        }\n    });\n}\nvar $807fa8d631faba60$export$2e2bcd8739ae039 = $807fa8d631faba60$var$animate;\n\n\n\n\nfunction $f24d6edca6b27d4b$export$c05151d780e05e08(route) {\n    if (!route || !(0, $d9d3e6e22f6ea036$export$844ec244b1367d54)(route.path)) throw new Error((0, $d9d3e6e22f6ea036$export$bef1f36f5486a6a3)(`Expected route config to be an object with a \"path\" string property, or an array of such objects`));\n    if (!(0, $d9d3e6e22f6ea036$export$f6e2535fb5126e54)(route.action) && !Array.isArray(route.children) && !(0, $d9d3e6e22f6ea036$export$f6e2535fb5126e54)(route.children) && !(0, $d9d3e6e22f6ea036$export$844ec244b1367d54)(route.component) && !(0, $d9d3e6e22f6ea036$export$844ec244b1367d54)(route.redirect)) throw new Error((0, $d9d3e6e22f6ea036$export$bef1f36f5486a6a3)(`Expected route config \"${route.path}\" to include either \"component, redirect\" or \"action\" function but none found.`));\n    if (route.redirect) [\n        \"bundle\",\n        \"component\"\n    ].forEach((overriddenProp)=>{\n        if (overriddenProp in route) console.warn((0, $d9d3e6e22f6ea036$export$bef1f36f5486a6a3)(`Route config \"${String(route.path)}\" has both \"redirect\" and \"${overriddenProp}\" properties, and \"redirect\" will always override the latter. Did you mean to only use \"${overriddenProp}\"?`));\n    });\n}\nfunction $f24d6edca6b27d4b$export$a288cdf6a1a81f15(routes) {\n    (0, $d9d3e6e22f6ea036$export$45b10814cc054894)(routes).forEach((route)=>$f24d6edca6b27d4b$export$c05151d780e05e08(route));\n}\nfunction $f24d6edca6b27d4b$export$e6d2a4c9ec201d2d({ next: _, ...context }) {\n    return context;\n}\nfunction $f24d6edca6b27d4b$export$f0514b59ea71bf5a(pathname, router) {\n    const base = router.__effectiveBaseUrl;\n    return base ? new URL(pathname.replace(/^\\//u, \"\"), base).pathname : pathname;\n}\nfunction $f24d6edca6b27d4b$export$4b553d2ff8d0a311(pathItems) {\n    return pathItems.map((pathItem)=>pathItem.path).reduce((a, b)=>{\n        if (b.length) return `${a.replace(/\\/$/u, \"\")}/${b.replace(/^\\//u, \"\")}`;\n        return a;\n    }, \"\");\n}\nfunction $f24d6edca6b27d4b$export$9085faa507254a1c(chain) {\n    return $f24d6edca6b27d4b$export$4b553d2ff8d0a311(chain.map((chainItem)=>chainItem.route));\n}\nfunction $f24d6edca6b27d4b$export$90c043f1c57770b8({ chain: chain = [], hash: hash = \"\", params: params = {}, pathname: pathname = \"\", redirectFrom: redirectFrom, resolver: resolver, search: search = \"\" }, route) {\n    const routes = chain.map((item)=>item.route);\n    return {\n        baseUrl: resolver?.baseUrl ?? \"\",\n        getUrl: (userParams = {})=>resolver ? $f24d6edca6b27d4b$export$f0514b59ea71bf5a((0, $aee334e867208ba0$export$ef7acd7185315e22)($f24d6edca6b27d4b$export$9085faa507254a1c(chain))({\n                ...params,\n                ...userParams\n            }), resolver) : \"\",\n        hash: hash,\n        params: params,\n        pathname: pathname,\n        redirectFrom: redirectFrom,\n        route: route ?? (Array.isArray(routes) ? routes.at(-1) : void 0) ?? null,\n        routes: routes,\n        search: search,\n        searchParams: new URLSearchParams(search)\n    };\n}\nfunction $f24d6edca6b27d4b$export$9f7e219408b475f6(context, pathname) {\n    const params = {\n        ...context.params\n    };\n    return {\n        redirect: {\n            from: context.pathname,\n            params: params,\n            pathname: pathname\n        }\n    };\n}\nfunction $f24d6edca6b27d4b$export$d544df0d2baa9f2c(context, element) {\n    element.location = $f24d6edca6b27d4b$export$90c043f1c57770b8(context);\n    if (context.chain) {\n        const index = context.chain.map((item)=>item.route).indexOf(context.route);\n        context.chain[index].element = element;\n    }\n    return element;\n}\nfunction $f24d6edca6b27d4b$export$904cfe4529b56dee(callback, thisArg, ...args) {\n    if (typeof callback === \"function\") return callback.apply(thisArg, args);\n    return void 0;\n}\nfunction $f24d6edca6b27d4b$export$38f45d231404a8d9(fn, obj, ...args) {\n    return (result)=>{\n        if (result && (0, $d9d3e6e22f6ea036$export$a6cdc56e425d0d0a)(result) && (\"cancel\" in result || \"redirect\" in result)) return result;\n        return $f24d6edca6b27d4b$export$904cfe4529b56dee(obj?.[fn], obj, ...args);\n    };\n}\nfunction $f24d6edca6b27d4b$export$bc9bdda4f446720(newChildren, route) {\n    if (!Array.isArray(newChildren) && !(0, $d9d3e6e22f6ea036$export$a6cdc56e425d0d0a)(newChildren)) throw new Error((0, $d9d3e6e22f6ea036$export$bef1f36f5486a6a3)(`Incorrect \"children\" value for the route ${String(route.path)}: expected array or object, but got ${String(newChildren)}`));\n    const children = (0, $d9d3e6e22f6ea036$export$45b10814cc054894)(newChildren);\n    children.forEach((child)=>$f24d6edca6b27d4b$export$c05151d780e05e08(child));\n    route.__children = children;\n}\nfunction $f24d6edca6b27d4b$export$36dd1de443a195bb(type, detail) {\n    return !window.dispatchEvent(new CustomEvent(`vaadin-router-${type}`, {\n        cancelable: type === \"go\",\n        detail: detail\n    }));\n}\nfunction $f24d6edca6b27d4b$export$ab42fa42352c1f05(value) {\n    if (typeof value !== \"object\") return String(value);\n    const [stringType = \"Unknown\"] = / (.*)\\]$/u.exec(String(value)) ?? [];\n    if (stringType === \"Object\" || stringType === \"Array\") return `${stringType} ${JSON.stringify(value)}`;\n    return stringType;\n}\n\n\nfunction $3ea31ff2525bab2b$var$getAnchorOrigin(anchor) {\n    const { port: port, protocol: protocol } = anchor;\n    const defaultHttp = protocol === \"http:\" && port === \"80\";\n    const defaultHttps = protocol === \"https:\" && port === \"443\";\n    const host = defaultHttp || defaultHttps ? anchor.hostname : anchor.host;\n    return `${protocol}//${host}`;\n}\nfunction $3ea31ff2525bab2b$var$getNormalizedNodeName(e) {\n    if (!(e instanceof Element)) return void 0;\n    return e.nodeName.toLowerCase();\n}\nfunction $3ea31ff2525bab2b$var$vaadinRouterGlobalClickHandler(event) {\n    if (event.defaultPrevented) return;\n    if (event.button !== 0) return;\n    if (event.shiftKey || event.ctrlKey || event.altKey || event.metaKey) return;\n    let anchorCandidate = event.target;\n    const path = event instanceof MouseEvent ? event.composedPath() : event.path ?? [];\n    for(let i = 0; i < path.length; i++){\n        const target = path[i];\n        if (\"nodeName\" in target && target.nodeName.toLowerCase() === \"a\") {\n            anchorCandidate = target;\n            break;\n        }\n    }\n    while(anchorCandidate && anchorCandidate instanceof Node && $3ea31ff2525bab2b$var$getNormalizedNodeName(anchorCandidate) !== \"a\")anchorCandidate = anchorCandidate.parentNode;\n    if (!anchorCandidate || $3ea31ff2525bab2b$var$getNormalizedNodeName(anchorCandidate) !== \"a\") return;\n    const anchor = anchorCandidate;\n    if (anchor.target && anchor.target.toLowerCase() !== \"_self\") return;\n    if (anchor.hasAttribute(\"download\")) return;\n    if (anchor.hasAttribute(\"router-ignore\")) return;\n    if (anchor.pathname === window.location.pathname && anchor.hash !== \"\") return;\n    const origin = anchor.origin || $3ea31ff2525bab2b$var$getAnchorOrigin(anchor);\n    if (origin !== window.location.origin) return;\n    const { hash: hash, pathname: pathname, search: search } = anchor;\n    if ((0, $f24d6edca6b27d4b$export$36dd1de443a195bb)(\"go\", {\n        hash: hash,\n        pathname: pathname,\n        search: search\n    }) && event instanceof MouseEvent) {\n        event.preventDefault();\n        if (event.type === \"click\") window.scrollTo(0, 0);\n    }\n}\nconst $3ea31ff2525bab2b$var$CLICK = {\n    activate () {\n        window.document.addEventListener(\"click\", $3ea31ff2525bab2b$var$vaadinRouterGlobalClickHandler);\n    },\n    inactivate () {\n        window.document.removeEventListener(\"click\", $3ea31ff2525bab2b$var$vaadinRouterGlobalClickHandler);\n    }\n};\nvar $3ea31ff2525bab2b$export$2e2bcd8739ae039 = $3ea31ff2525bab2b$var$CLICK;\n\n\n\nfunction $aff71581b687f200$var$vaadinRouterGlobalPopstateHandler(event) {\n    if (event.state === \"vaadin-router-ignore\") return;\n    const { hash: hash, pathname: pathname, search: search } = window.location;\n    (0, $f24d6edca6b27d4b$export$36dd1de443a195bb)(\"go\", {\n        hash: hash,\n        pathname: pathname,\n        search: search\n    });\n}\nconst $aff71581b687f200$var$POPSTATE = {\n    activate () {\n        window.addEventListener(\"popstate\", $aff71581b687f200$var$vaadinRouterGlobalPopstateHandler);\n    },\n    inactivate () {\n        window.removeEventListener(\"popstate\", $aff71581b687f200$var$vaadinRouterGlobalPopstateHandler);\n    }\n};\nvar $aff71581b687f200$export$2e2bcd8739ae039 = $aff71581b687f200$var$POPSTATE;\n\n\nlet $a3fb241618c8c6d9$var$triggers = [];\nconst $a3fb241618c8c6d9$export$527ad8aac0f51e68 = {\n    CLICK: $3ea31ff2525bab2b$export$2e2bcd8739ae039,\n    POPSTATE: $aff71581b687f200$export$2e2bcd8739ae039\n};\nfunction $a3fb241618c8c6d9$export$1612575e5ebd32d3(newTriggers = []) {\n    $a3fb241618c8c6d9$var$triggers.forEach((trigger)=>trigger.inactivate());\n    newTriggers.forEach((trigger)=>trigger.activate());\n    $a3fb241618c8c6d9$var$triggers = newTriggers;\n}\n\n\n\nconst $7c59ada63ffb8a20$var$MAX_REDIRECT_COUNT = 256;\nfunction $7c59ada63ffb8a20$var$prevent() {\n    return {\n        cancel: true\n    };\n}\nconst $7c59ada63ffb8a20$var$rootContext = {\n    __renderId: -1,\n    params: {},\n    route: {\n        __synthetic: true,\n        children: [],\n        path: \"\",\n        action () {\n            return void 0;\n        }\n    },\n    pathname: \"\",\n    // eslint-disable-next-line @typescript-eslint/require-await\n    async next () {\n        return 0, $d9d3e6e22f6ea036$export$264e4f112ccbf139;\n    }\n};\nclass $7c59ada63ffb8a20$export$55185c17a0fcbe46 extends (0, $330a99cf2659a530$export$2e2bcd8739ae039) {\n    /**\n   * Contains read-only information about the current router location:\n   * pathname, active routes, parameters. See the\n   * [Location type declaration](#/classes/RouterLocation)\n   * for more details.\n   */ location = (0, $f24d6edca6b27d4b$export$90c043f1c57770b8)({\n        resolver: this\n    });\n    /**\n   * A promise that is settled after the current render cycle completes. If\n   * there is no render cycle in progress the promise is immediately settled\n   * with the last render cycle result.\n   */ ready = Promise.resolve(this.location);\n    #addedByRouter = /* @__PURE__ */ new WeakSet();\n    #createdByRouter = /* @__PURE__ */ new WeakSet();\n    #navigationEventHandler = this.#onNavigationEvent.bind(this);\n    #lastStartedRenderId = 0;\n    #outlet;\n    __previousContext;\n    #urlForName;\n    #appearingContent = null;\n    #disappearingContent = null;\n    /**\n   * Creates a new Router instance with a given outlet, and\n   * automatically subscribes it to navigation events on the `window`.\n   * Using a constructor argument or a setter for outlet is equivalent:\n   *\n   * ```\n   * const router = new Router();\n   * router.setOutlet(outlet);\n   * ```\n   * @param outlet - a container to render the resolved route\n   * @param options - an optional object with options\n   */ constructor(outlet, options){\n        const baseElement = document.head.querySelector(\"base\");\n        const baseHref = baseElement?.getAttribute(\"href\");\n        super([], {\n            baseUrl: baseHref ? new URL(baseHref, document.URL).href.replace(/[^/]*$/u, \"\") : void 0,\n            ...options,\n            resolveRoute: async (context)=>await this.#resolveRoute(context)\n        });\n        (0, $a3fb241618c8c6d9$export$1612575e5ebd32d3)(Object.values((0, $a3fb241618c8c6d9$export$527ad8aac0f51e68)));\n        this.setOutlet(outlet);\n        this.subscribe();\n    }\n    async #resolveRoute(context) {\n        const { route: route } = context;\n        if ((0, $d9d3e6e22f6ea036$export$f6e2535fb5126e54)(route.children)) {\n            let children = await route.children((0, $f24d6edca6b27d4b$export$e6d2a4c9ec201d2d)(context));\n            if (!(0, $d9d3e6e22f6ea036$export$f6e2535fb5126e54)(route.children)) ({ children: children } = route);\n            (0, $f24d6edca6b27d4b$export$bc9bdda4f446720)(children, route);\n        }\n        const commands = {\n            component: (component)=>{\n                const element = document.createElement(component);\n                this.#createdByRouter.add(element);\n                return element;\n            },\n            prevent: $7c59ada63ffb8a20$var$prevent,\n            redirect: (path)=>(0, $f24d6edca6b27d4b$export$9f7e219408b475f6)(context, path)\n        };\n        return await Promise.resolve().then(async ()=>{\n            if (this.#isLatestRender(context)) return await (0, $f24d6edca6b27d4b$export$904cfe4529b56dee)(route.action, route, context, commands);\n        }).then((result)=>{\n            if (result != null && (typeof result === \"object\" || typeof result === \"symbol\")) {\n                if (result instanceof HTMLElement || result === (0, $d9d3e6e22f6ea036$export$264e4f112ccbf139) || (0, $d9d3e6e22f6ea036$export$a6cdc56e425d0d0a)(result) && \"redirect\" in result) return result;\n            }\n            if ((0, $d9d3e6e22f6ea036$export$844ec244b1367d54)(route.redirect)) return commands.redirect(route.redirect);\n        }).then((result)=>{\n            if (result != null) return result;\n            if ((0, $d9d3e6e22f6ea036$export$844ec244b1367d54)(route.component)) return commands.component(route.component);\n        });\n    }\n    /**\n   * Sets the router outlet (the DOM node where the content for the current\n   * route is inserted). Any content pre-existing in the router outlet is\n   * removed at the end of each render pass.\n   *\n   * @remarks\n   * This method is automatically invoked first time when creating a new Router\n   * instance.\n   *\n   * @param outlet - the DOM node where the content for the current route is\n   * inserted.\n   */ setOutlet(outlet) {\n        if (outlet) this.#ensureOutlet(outlet);\n        this.#outlet = outlet;\n    }\n    /**\n   * Returns the current router outlet. The initial value is `undefined`.\n   *\n   * @returns the current router outlet (or `undefined`)\n   */ getOutlet() {\n        return this.#outlet;\n    }\n    /**\n   * Sets the routing config (replacing the existing one) and triggers a\n   * navigation event so that the router outlet is refreshed according to the\n   * current `window.location` and the new routing config.\n   *\n   * Each route object may have the following properties, listed here in the processing order:\n   * * `path`  the route path (relative to the parent route if any) in the\n   * [express.js syntax](https://expressjs.com/en/guide/routing.html#route-paths).\n   *\n   * * `children`  an array of nested routes or a function that provides this\n   * array at the render time. The function can be synchronous or asynchronous:\n   * in the latter case the render is delayed until the returned promise is\n   * resolved. The `children` function is executed every time when this route is\n   * being rendered. This allows for dynamic route structures (e.g. backend-defined),\n   * but it might have a performance impact as well. In order to avoid calling\n   * the function on subsequent renders, you can override the `children` property\n   * of the route object and save the calculated array there\n   * (via `context.route.children = [ route1, route2, ...];`).\n   * Parent routes are fully resolved before resolving the children. Children\n   * 'path' values are relative to the parent ones.\n   *\n   * * `action`  the action that is executed before the route is resolved.\n   * The value for this property should be a function, accepting `context`\n   * and `commands` parameters described below. If present, this function is\n   * always invoked first, disregarding of the other properties' presence.\n   * The action can return a result directly or within a `Promise`, which\n   * resolves to the result. If the action result is an `HTMLElement` instance,\n   * a `commands.component(name)` result, a `commands.redirect(path)` result,\n   * or a `context.next()` result, the current route resolution is finished,\n   * and other route config properties are ignored.\n   * See also **Route Actions** section in [Live Examples](#/classes/Router/demos/demo/index.html).\n   *\n   * * `redirect`  other route's path to redirect to. Passes all route parameters to the redirect target.\n   * The target route should also be defined.\n   * See also **Redirects** section in [Live Examples](#/classes/Router/demos/demo/index.html).\n   *\n   * * `component`  the tag name of the Web Component to resolve the route to.\n   * The property is ignored when either an `action` returns the result or `redirect` property is present.\n   * If route contains the `component` property (or an action that return a component)\n   * and its child route also contains the `component` property, child route's component\n   * will be rendered as a light dom child of a parent component.\n   *\n   * * `name`  the string name of the route to use in the\n   * [`router.urlForName(name, params)`](#/classes/Router#method-urlForName)\n   * navigation helper method.\n   *\n   * For any route function (`action`, `children`) defined, the corresponding `route` object is available inside the\n   * callback through the `this` reference. If you need to access it, make sure you define the callback as a non-arrow\n   * function because arrow functions do not have their own `this` reference.\n   *\n   * `context` object that is passed to `action` function holds the following properties:\n   * * `context.pathname`  string with the pathname being resolved\n   *\n   * * `context.search`  search query string\n   *\n   * * `context.hash`  hash string\n   *\n   * * `context.params`  object with route parameters\n   *\n   * * `context.route`  object that holds the route that is currently being rendered.\n   *\n   * * `context.next()`  function for asynchronously getting the next route\n   * contents from the resolution chain (if any)\n   *\n   * `commands` object that is passed to `action` function has\n   * the following methods:\n   *\n   * * `commands.redirect(path)`  function that creates a redirect data\n   * for the path specified.\n   *\n   * * `commands.component(component)`  function that creates a new HTMLElement\n   * with current context. Note: the component created by this function is reused if visiting the same path twice in\n   * row.\n   *\n   * @param routes - a single route or an array of those\n   * @param skipRender - configure the router but skip rendering the\n   *     route corresponding to the current `window.location` values\n   */ // eslint-disable-next-line @typescript-eslint/no-misused-promises\n    async setRoutes(routes, skipRender = false) {\n        this.__previousContext = void 0;\n        this.#urlForName = void 0;\n        (0, $f24d6edca6b27d4b$export$a288cdf6a1a81f15)(routes);\n        super.setRoutes(routes);\n        if (!skipRender) this.#onNavigationEvent();\n        return await this.ready;\n    }\n    addRoutes(routes) {\n        (0, $f24d6edca6b27d4b$export$a288cdf6a1a81f15)(routes);\n        return super.addRoutes(routes);\n    }\n    /**\n   * Asynchronously resolves the given pathname and renders the resolved route\n   * component into the router outlet. If no router outlet is set at the time of\n   * calling this method, or at the time when the route resolution is completed,\n   * a `TypeError` is thrown.\n   *\n   * Returns a promise that is fulfilled with the router outlet DOM Element | DocumentFragment after\n   * the route component is created and inserted into the router outlet, or\n   * rejected if no route matches the given path.\n   *\n   * If another render pass is started before the previous one is completed, the\n   * result of the previous render pass is ignored.\n   *\n   * @param pathnameOrContext - the pathname to render or a context object with\n   * a `pathname` property, optional `search` and `hash` properties, and other\n   * properties to pass to the resolver.\n   * @param shouldUpdateHistory - update browser history with the rendered\n   * location\n   */ async render(pathnameOrContext, shouldUpdateHistory = false) {\n        this.#lastStartedRenderId += 1;\n        const renderId = this.#lastStartedRenderId;\n        const context = {\n            ...$7c59ada63ffb8a20$var$rootContext,\n            ...(0, $d9d3e6e22f6ea036$export$844ec244b1367d54)(pathnameOrContext) ? {\n                hash: \"\",\n                search: \"\",\n                pathname: pathnameOrContext\n            } : pathnameOrContext,\n            __renderId: renderId\n        };\n        this.ready = this.#doRender(context, shouldUpdateHistory);\n        return await this.ready;\n    }\n    async #doRender(context, shouldUpdateHistory) {\n        const { __renderId: renderId } = context;\n        try {\n            const ctx = await this.resolve(context);\n            const contextWithChain = await this.#fullyResolveChain(ctx);\n            if (!this.#isLatestRender(contextWithChain)) return this.location;\n            const previousContext = this.__previousContext;\n            if (contextWithChain === previousContext) {\n                this.#updateBrowserHistory(previousContext, true);\n                return this.location;\n            }\n            this.location = (0, $f24d6edca6b27d4b$export$90c043f1c57770b8)(contextWithChain);\n            if (shouldUpdateHistory) this.#updateBrowserHistory(contextWithChain, renderId === 1);\n            (0, $f24d6edca6b27d4b$export$36dd1de443a195bb)(\"location-changed\", {\n                router: this,\n                location: this.location\n            });\n            if (contextWithChain.__skipAttach) {\n                this.#copyUnchangedElements(contextWithChain, previousContext);\n                this.__previousContext = contextWithChain;\n                return this.location;\n            }\n            this.#addAppearingContent(contextWithChain, previousContext);\n            const animationDone = this.#animateIfNeeded(contextWithChain);\n            this.#runOnAfterEnterCallbacks(contextWithChain);\n            this.#runOnAfterLeaveCallbacks(contextWithChain, previousContext);\n            await animationDone;\n            if (this.#isLatestRender(contextWithChain)) {\n                this.#removeDisappearingContent();\n                this.__previousContext = contextWithChain;\n                return this.location;\n            }\n        } catch (error) {\n            if (renderId === this.#lastStartedRenderId) {\n                if (shouldUpdateHistory) this.#updateBrowserHistory(this.context);\n                for (const child of this.#outlet?.children ?? [])child.remove();\n                this.location = (0, $f24d6edca6b27d4b$export$90c043f1c57770b8)(Object.assign(context, {\n                    resolver: this\n                }));\n                (0, $f24d6edca6b27d4b$export$36dd1de443a195bb)(\"error\", {\n                    router: this,\n                    error: error,\n                    ...context\n                });\n                throw error;\n            }\n        }\n        return this.location;\n    }\n    // `topOfTheChainContextBeforeRedirects` is a context coming from Resolver.resolve().\n    // It would contain a 'redirect' route or the first 'component' route that\n    // matched the pathname. There might be more child 'component' routes to be\n    // resolved and added into the chain. This method would find and add them.\n    // `contextBeforeRedirects` is the context containing such a child component\n    // route. It's only necessary when this method is called recursively (otherwise\n    // it's the same as the 'top of the chain' context).\n    //\n    // Apart from building the chain of child components, this method would also\n    // handle 'redirect' routes, call 'onBefore' callbacks and handle 'prevent'\n    // and 'redirect' callback results.\n    async #fullyResolveChain(topOfTheChainContextBeforeRedirects, contextBeforeRedirects = topOfTheChainContextBeforeRedirects) {\n        const contextAfterRedirects = await this.#findComponentContextAfterAllRedirects(contextBeforeRedirects);\n        const redirectsHappened = contextAfterRedirects !== contextBeforeRedirects;\n        const topOfTheChainContextAfterRedirects = redirectsHappened ? contextAfterRedirects : topOfTheChainContextBeforeRedirects;\n        const matchedPath = (0, $f24d6edca6b27d4b$export$f0514b59ea71bf5a)((0, $f24d6edca6b27d4b$export$4b553d2ff8d0a311)(contextAfterRedirects.chain ?? []), this);\n        const isFound = matchedPath === contextAfterRedirects.pathname;\n        const findNextContextIfAny = async (context, parent = context.route, prevResult)=>{\n            const nextContext2 = await context.next(false, parent, prevResult);\n            if (nextContext2 === null || nextContext2 === (0, $d9d3e6e22f6ea036$export$264e4f112ccbf139)) {\n                if (isFound) return context;\n                else if (parent.parent != null) return await findNextContextIfAny(context, parent.parent, nextContext2);\n                return nextContext2;\n            }\n            return nextContext2;\n        };\n        const nextContext = await findNextContextIfAny(contextAfterRedirects);\n        if (nextContext == null || nextContext === (0, $d9d3e6e22f6ea036$export$264e4f112ccbf139)) throw (0, $d9d3e6e22f6ea036$export$8e53f060cd8fee7c)(topOfTheChainContextAfterRedirects);\n        return nextContext !== contextAfterRedirects ? await this.#fullyResolveChain(topOfTheChainContextAfterRedirects, nextContext) : await this.#amendWithOnBeforeCallbacks(contextAfterRedirects);\n    }\n    async #findComponentContextAfterAllRedirects(context) {\n        const { result: result } = context;\n        if (result instanceof HTMLElement) {\n            (0, $f24d6edca6b27d4b$export$d544df0d2baa9f2c)(context, result);\n            return context;\n        } else if (result && \"redirect\" in result) {\n            const ctx = await this.#redirect(result.redirect, context.__redirectCount, context.__renderId);\n            return await this.#findComponentContextAfterAllRedirects(ctx);\n        }\n        throw result instanceof Error ? result : new Error((0, $d9d3e6e22f6ea036$export$bef1f36f5486a6a3)(`Invalid route resolution result for path \"${context.pathname}\". Expected redirect object or HTML element, but got: \"${(0, $f24d6edca6b27d4b$export$ab42fa42352c1f05)(result)}\". Double check the action return value for the route.`));\n    }\n    async #amendWithOnBeforeCallbacks(contextWithFullChain) {\n        return await this.#runOnBeforeCallbacks(contextWithFullChain).then(async (amendedContext)=>{\n            if (amendedContext === this.__previousContext || amendedContext === contextWithFullChain) return amendedContext;\n            return await this.#fullyResolveChain(amendedContext);\n        });\n    }\n    async #runOnBeforeCallbacks(newContext) {\n        const previousContext = this.__previousContext ?? {};\n        const previousChain = previousContext.chain ?? [];\n        const newChain = newContext.chain ?? [];\n        let callbacks = Promise.resolve(void 0);\n        const redirect = (pathname)=>(0, $f24d6edca6b27d4b$export$9f7e219408b475f6)(newContext, pathname);\n        newContext.__divergedChainIndex = 0;\n        newContext.__skipAttach = false;\n        if (previousChain.length) {\n            for(let i = 0; i < Math.min(previousChain.length, newChain.length); newContext.__divergedChainIndex++, i++){\n                if (previousChain[i].route !== newChain[i].route || previousChain[i].path !== newChain[i].path && previousChain[i].element !== newChain[i].element || !this.#isReusableElement(previousChain[i].element, newChain[i].element)) break;\n            }\n            newContext.__skipAttach = newChain.length === previousChain.length && newContext.__divergedChainIndex === newChain.length && // Same element\n            this.#isReusableElement(newContext.result, previousContext.result);\n            if (newContext.__skipAttach) {\n                for(let i = newChain.length - 1; i >= 0; i--)callbacks = this.#runOnBeforeLeaveCallbacks(callbacks, newContext, {\n                    prevent: $7c59ada63ffb8a20$var$prevent\n                }, previousChain[i]);\n                for(let i = 0; i < newChain.length; i++){\n                    callbacks = this.#runOnBeforeEnterCallbacks(callbacks, newContext, {\n                        prevent: $7c59ada63ffb8a20$var$prevent,\n                        redirect: redirect\n                    }, newChain[i]);\n                    previousChain[i].element.location = (0, $f24d6edca6b27d4b$export$90c043f1c57770b8)(newContext, previousChain[i].route);\n                }\n            } else for(let i = previousChain.length - 1; i >= newContext.__divergedChainIndex; i--)callbacks = this.#runOnBeforeLeaveCallbacks(callbacks, newContext, {\n                prevent: $7c59ada63ffb8a20$var$prevent\n            }, previousChain[i]);\n        }\n        if (!newContext.__skipAttach) for(let i = 0; i < newChain.length; i++){\n            if (i < newContext.__divergedChainIndex) {\n                if (i < previousChain.length && previousChain[i].element) previousChain[i].element.location = (0, $f24d6edca6b27d4b$export$90c043f1c57770b8)(newContext, previousChain[i].route);\n            } else {\n                callbacks = this.#runOnBeforeEnterCallbacks(callbacks, newContext, {\n                    prevent: $7c59ada63ffb8a20$var$prevent,\n                    redirect: redirect\n                }, newChain[i]);\n                if (newChain[i].element) newChain[i].element.location = (0, $f24d6edca6b27d4b$export$90c043f1c57770b8)(newContext, newChain[i].route);\n            }\n        }\n        return await callbacks.then(async (amendmentResult)=>{\n            if (amendmentResult && (0, $d9d3e6e22f6ea036$export$a6cdc56e425d0d0a)(amendmentResult)) {\n                if (\"cancel\" in amendmentResult && this.__previousContext) {\n                    this.__previousContext.__renderId = newContext.__renderId;\n                    return this.__previousContext;\n                }\n                if (\"redirect\" in amendmentResult) return await this.#redirect(amendmentResult.redirect, newContext.__redirectCount, newContext.__renderId);\n            }\n            return newContext;\n        });\n    }\n    async #runOnBeforeLeaveCallbacks(callbacks, newContext, commands, chainElement) {\n        const location = (0, $f24d6edca6b27d4b$export$90c043f1c57770b8)(newContext);\n        let result = await callbacks;\n        if (this.#isLatestRender(newContext)) {\n            const beforeLeaveFunction = (0, $f24d6edca6b27d4b$export$38f45d231404a8d9)(\"onBeforeLeave\", chainElement.element, location, commands, this);\n            result = beforeLeaveFunction(result);\n        }\n        if (!((0, $d9d3e6e22f6ea036$export$a6cdc56e425d0d0a)(result) && \"redirect\" in result)) return result;\n    }\n    async #runOnBeforeEnterCallbacks(callbacks, newContext, commands, chainElement) {\n        const location = (0, $f24d6edca6b27d4b$export$90c043f1c57770b8)(newContext, chainElement.route);\n        const result = await callbacks;\n        if (this.#isLatestRender(newContext)) {\n            const beforeEnterFunction = (0, $f24d6edca6b27d4b$export$38f45d231404a8d9)(\"onBeforeEnter\", chainElement.element, location, commands, this);\n            return beforeEnterFunction(result);\n        }\n    }\n    #isReusableElement(element, otherElement) {\n        if (element instanceof Element && otherElement instanceof Element) return this.#createdByRouter.has(element) && this.#createdByRouter.has(otherElement) ? element.localName === otherElement.localName : element === otherElement;\n        return false;\n    }\n    #isLatestRender(context) {\n        return context.__renderId === this.#lastStartedRenderId;\n    }\n    async #redirect(redirectData, counter = 0, renderId = 0) {\n        if (counter > $7c59ada63ffb8a20$var$MAX_REDIRECT_COUNT) throw new Error((0, $d9d3e6e22f6ea036$export$bef1f36f5486a6a3)(`Too many redirects when rendering ${redirectData.from}`));\n        return await this.resolve({\n            ...$7c59ada63ffb8a20$var$rootContext,\n            pathname: this.urlForPath(redirectData.pathname, redirectData.params),\n            redirectFrom: redirectData.from,\n            __redirectCount: counter + 1,\n            __renderId: renderId\n        });\n    }\n    #ensureOutlet(outlet = this.#outlet) {\n        if (!(outlet instanceof Element || outlet instanceof DocumentFragment)) throw new TypeError((0, $d9d3e6e22f6ea036$export$bef1f36f5486a6a3)(`Expected router outlet to be a valid DOM Element | DocumentFragment (but got ${outlet})`));\n    }\n    // eslint-disable-next-line @typescript-eslint/class-methods-use-this\n    #updateBrowserHistory({ pathname: pathname, search: search = \"\", hash: hash = \"\" }, replace) {\n        if (window.location.pathname !== pathname || window.location.search !== search || window.location.hash !== hash) {\n            const changeState = replace ? \"replaceState\" : \"pushState\";\n            window.history[changeState](null, document.title, pathname + search + hash);\n            window.dispatchEvent(new PopStateEvent(\"popstate\", {\n                state: \"vaadin-router-ignore\"\n            }));\n        }\n    }\n    #copyUnchangedElements(context, previousContext) {\n        let deepestCommonParent = this.#outlet;\n        for(let i = 0; i < (context.__divergedChainIndex ?? 0); i++){\n            const unchangedElement = previousContext?.chain?.[i].element;\n            if (unchangedElement) {\n                if (unchangedElement.parentNode === deepestCommonParent) {\n                    context.chain[i].element = unchangedElement;\n                    deepestCommonParent = unchangedElement;\n                } else break;\n            }\n        }\n        return deepestCommonParent;\n    }\n    #addAppearingContent(context, previousContext) {\n        this.#ensureOutlet();\n        this.#removeAppearingContent();\n        const deepestCommonParent = this.#copyUnchangedElements(context, previousContext);\n        this.#appearingContent = [];\n        this.#disappearingContent = Array.from(deepestCommonParent?.children ?? []).filter(// Only remove layout content that was added by router\n        (e)=>this.#addedByRouter.has(e) && // Do not remove the result element to avoid flickering\n            e !== context.result);\n        let parentElement = deepestCommonParent;\n        for(let i = context.__divergedChainIndex ?? 0; i < (context.chain?.length ?? 0); i++){\n            const elementToAdd = context.chain[i].element;\n            if (elementToAdd) {\n                parentElement?.appendChild(elementToAdd);\n                this.#addedByRouter.add(elementToAdd);\n                if (parentElement === deepestCommonParent) this.#appearingContent.push(elementToAdd);\n                parentElement = elementToAdd;\n            }\n        }\n    }\n    #removeDisappearingContent() {\n        if (this.#disappearingContent) for (const element of this.#disappearingContent)element.remove();\n        this.#disappearingContent = null;\n        this.#appearingContent = null;\n    }\n    #removeAppearingContent() {\n        if (this.#disappearingContent && this.#appearingContent) {\n            for (const element of this.#appearingContent)element.remove();\n            this.#disappearingContent = null;\n            this.#appearingContent = null;\n        }\n    }\n    #runOnAfterLeaveCallbacks(currentContext, targetContext) {\n        if (!targetContext?.chain || currentContext.__divergedChainIndex == null) return;\n        for(let i = targetContext.chain.length - 1; i >= currentContext.__divergedChainIndex; i--){\n            if (!this.#isLatestRender(currentContext)) break;\n            const currentComponent = targetContext.chain[i].element;\n            if (!currentComponent) continue;\n            try {\n                const location = (0, $f24d6edca6b27d4b$export$90c043f1c57770b8)(currentContext);\n                (0, $f24d6edca6b27d4b$export$904cfe4529b56dee)(currentComponent.onAfterLeave, currentComponent, location, {}, this);\n            } finally{\n                if (this.#disappearingContent?.includes(currentComponent)) for (const child of currentComponent.children)child.remove();\n            }\n        }\n    }\n    #runOnAfterEnterCallbacks(currentContext) {\n        if (!currentContext.chain || currentContext.__divergedChainIndex == null) return;\n        for(let i = currentContext.__divergedChainIndex; i < currentContext.chain.length; i++){\n            if (!this.#isLatestRender(currentContext)) break;\n            const currentComponent = currentContext.chain[i].element;\n            if (currentComponent) {\n                const location = (0, $f24d6edca6b27d4b$export$90c043f1c57770b8)(currentContext, currentContext.chain[i].route);\n                (0, $f24d6edca6b27d4b$export$904cfe4529b56dee)(currentComponent.onAfterEnter, currentComponent, location, {}, this);\n            }\n        }\n    }\n    async #animateIfNeeded(context) {\n        const from = this.#disappearingContent?.[0];\n        const to = this.#appearingContent?.[0];\n        const promises = [];\n        const { chain: chain = [] } = context;\n        let config;\n        for(let i = chain.length - 1; i >= 0; i--)if (chain[i].route.animate) {\n            config = chain[i].route.animate;\n            break;\n        }\n        if (from && to && config) {\n            const leave = (0, $d9d3e6e22f6ea036$export$a6cdc56e425d0d0a)(config) && config.leave ? config.leave : \"leaving\";\n            const enter = (0, $d9d3e6e22f6ea036$export$a6cdc56e425d0d0a)(config) && config.enter ? config.enter : \"entering\";\n            promises.push((0, $807fa8d631faba60$export$2e2bcd8739ae039)(from, leave));\n            promises.push((0, $807fa8d631faba60$export$2e2bcd8739ae039)(to, enter));\n        }\n        await Promise.all(promises);\n        return context;\n    }\n    /**\n   * Subscribes this instance to navigation events on the `window`.\n   *\n   * NOTE: beware of resource leaks. For as long as a router instance is\n   * subscribed to navigation events, it won't be garbage collected.\n   */ subscribe() {\n        window.addEventListener(\"vaadin-router-go\", this.#navigationEventHandler);\n    }\n    /**\n   * Removes the subscription to navigation events created in the `subscribe()`\n   * method.\n   */ unsubscribe() {\n        window.removeEventListener(\"vaadin-router-go\", this.#navigationEventHandler);\n    }\n    #onNavigationEvent(event) {\n        const { pathname: pathname, search: search, hash: hash } = event instanceof CustomEvent ? event.detail : window.location;\n        if ((0, $d9d3e6e22f6ea036$export$844ec244b1367d54)(this.__normalizePathname(pathname))) {\n            if (event?.preventDefault) event.preventDefault();\n            this.render({\n                pathname: pathname,\n                search: search,\n                hash: hash\n            }, true);\n        }\n    }\n    /**\n   * Configures what triggers Router navigation events:\n   *  - `POPSTATE`: popstate events on the current `window`\n   *  - `CLICK`: click events on `<a>` links leading to the current page\n   *\n   * This method is invoked with the pre-configured values when creating a new Router instance.\n   * By default, both `POPSTATE` and `CLICK` are enabled. This setup is expected to cover most of the use cases.\n   *\n   * See the `router-config.js` for the default navigation triggers config. Based on it, you can\n   * create the own one and only import the triggers you need, instead of pulling in all the code,\n   * e.g. if you want to handle `click` differently.\n   *\n   * See also **Navigation Triggers** section in [Live Examples](#/classes/Router/demos/demo/index.html).\n   *\n   * @param triggers - navigation triggers\n   */ static setTriggers(...triggers) {\n        (0, $a3fb241618c8c6d9$export$1612575e5ebd32d3)(triggers);\n    }\n    /**\n   * Generates a URL for the route with the given name, optionally performing\n   * substitution of parameters.\n   *\n   * The route is searched in all the Router instances subscribed to\n   * navigation events.\n   *\n   * **Note:** For child route names, only array children are considered.\n   * It is not possible to generate URLs using a name for routes set with\n   * a children function.\n   *\n   * @param name - The route name or the routes `component` name.\n   * @param params - Optional object with route path parameters.\n   * Named parameters are passed by name (`params[name] = value`), unnamed\n   * parameters are passed by index (`params[index] = value`).\n   */ urlForName(name, params) {\n        if (!this.#urlForName) this.#urlForName = (0, $41c693d437999aea$export$2e2bcd8739ae039)(this, {\n            cacheKeyProvider (route) {\n                return \"component\" in route && typeof route.component === \"string\" ? route.component : void 0;\n            }\n        });\n        return (0, $f24d6edca6b27d4b$export$f0514b59ea71bf5a)(this.#urlForName(name, params ?? void 0), this);\n    }\n    /**\n   * Generates a URL for the given route path, optionally performing\n   * substitution of parameters.\n   *\n   * @param path - String route path declared in [express.js\n   * syntax](https://expressjs.com/en/guide/routing.html#route-paths).\n   * @param params - Optional object with route path parameters.\n   * Named parameters are passed by name (`params[name] = value`), unnamed\n   * parameters are passed by index (`params[index] = value`).\n   */ urlForPath(path, params) {\n        return (0, $f24d6edca6b27d4b$export$f0514b59ea71bf5a)((0, $aee334e867208ba0$export$ef7acd7185315e22)(path)(params ?? void 0), this);\n    }\n    /**\n   * Triggers navigation to a new path. Returns a boolean without waiting until\n   * the navigation is complete. Returns `true` if at least one `Router`\n   * has handled the navigation (was subscribed and had `baseUrl` matching\n   * the `path` argument), otherwise returns `false`.\n   *\n   * @param path - A new in-app path string, or an URL-like object with\n   * `pathname` string property, and optional `search` and `hash` string\n   * properties.\n   */ static go(path) {\n        const { pathname: pathname, search: search, hash: hash } = (0, $d9d3e6e22f6ea036$export$844ec244b1367d54)(path) ? new URL(path, \"http://a\") : path;\n        return (0, $f24d6edca6b27d4b$export$36dd1de443a195bb)(\"go\", {\n            pathname: pathname,\n            search: search,\n            hash: hash\n        });\n    }\n}\n\n\n\n\n\nvar $8b2cd5f999582188$exports = {};\n$8b2cd5f999582188$exports = new URL(\"logo-bckg-removed.217b7931.png\", import.meta.url).toString();\n\n\nclass $e7453e1bf0e39a4e$var$ChatHeader extends HTMLElement {\n    constructor(){\n        super();\n        this.attachShadow({\n            mode: \"open\"\n        });\n        this.render();\n    }\n    connectedCallback() {\n        this.render();\n    }\n    render() {\n        const isChatPage = window.location.pathname.includes(\"/chat/\");\n        this.shadowRoot.innerHTML = `\n    <style>\n    div.header{\n        width:100vw;\n        margin:0;\n        padding:0;\n        background: linear-gradient(to bottom,rgb(39, 160, 176),rgba(12, 129, 74, 0.1));\n        height:80px;\n        display:flex;\n        align-items:center;\n        border-bottom: solid rgb(0,0,0,0.1) 1px\n    }\n    \n    img.logo{\n        width:150px; \n        height:48px; \n        margin-left:20px;\n    }\n    @media(width<600px){\n        img.chat-page{\n            margin-left:80px;\n        }\n    \n    }\n    </style>\n\n    <div class=\"header\">\n        <div class=\"logo-img\">\n            <img class=\"logo ${isChatPage ? \"chat-page\" : \"\"} \" src=${0, (/*@__PURE__*/$parcel$interopDefault($8b2cd5f999582188$exports))} alt=\"logo image\" style=\"width:150px; height:48px;\">\n        </div>\n    </div>\n    `;\n    }\n}\ncustomElements.define(\"header-comp\", $e7453e1bf0e39a4e$var$ChatHeader);\n\n\nclass $ecaa8b9711b5322e$var$HomePage extends HTMLElement {\n    constructor(){\n        super();\n        this.attachShadow({\n            mode: \"open\"\n        });\n        this.container = document.createElement(\"div\");\n        this.shadowRoot.appendChild(this.container);\n        this.container.className = \"shadow\";\n        this.name = localStorage.getItem(\"name\");\n        this.warning = ``;\n    }\n    firstVisit() {\n        return this.name === null || undefined;\n    }\n    containsBadWords(text) {\n        const badWords = [\n            \"ass\",\n            \"nig\",\n            \"whore\",\n            \"dick\",\n            \"hole\",\n            \"bitch\",\n            \"pussy\",\n            \"69\",\n            \"suck\",\n            \"cock\",\n            \"sex\",\n            \"fuck\",\n            \"fagg\",\n            \"puta\",\n            \"puto\",\n            \"nazi\",\n            \"gil\",\n            \"polla\",\n            \"pene\",\n            \"verga\",\n            \"subnor\",\n            \"imbecil\",\n            \"foll\",\n            \"co\\xf1i\",\n            \"co\\xf1o\",\n            \"vagin\",\n            \"choch\",\n            \"chucha\",\n            \"hdp\",\n            \"moro\",\n            \"null\",\n            \"undefined\",\n            \"raul\",\n            \"Raul\",\n            \"ra\\xfal\",\n            \"Ra\\xfal\"\n        ];\n        const textLower = text.toLowerCase();\n        return badWords.some((word)=>textLower.includes(word));\n    }\n    connectedCallback() {\n        // the router needs to add empty component, so we insert HTML in connectedCallback() that executes after putting the element in the DOM.\n        this.render();\n    }\n    getNiceRandomColor() {\n        const min = 100;\n        const max = 200;\n        const r = Math.floor(Math.random() * (max - min) + min);\n        const g = Math.floor(Math.random() * (max - min) + min);\n        const b = Math.floor(Math.random() * (max - min) + min);\n        return `rgb(${r}, ${g}, ${b})`;\n    }\n    render() {\n        const initURL = '/live-chat';\n        this.container.innerHTML = `\n    <style>\n    .homepage-body{\n        height:100vh;\n        width: 100vw;\n        background:linear-gradient(to bottom,rgba(114, 232, 222, 0.87) , rgb(12, 129, 74,0.3));\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n    }\n    header-comp{\n        margin-bottom:100px;\n    }\n    h1, h2, p{\n        margin: 0;\n        color: white;\n    }\n    div.titles{\n        display:flex;\n        flex-direction:column;\n        align-items:center;\n        gap:10px;\n        padding-bottom:30px;\n    }\n    \n    @media (width>600px){\n        div.titles{\n            flex-direction:row;\n        }\n    }\n\n    h1{\n        font-size:40px;\n        -webkit-text-stroke: 0.1px rgb(0,0,0,0.5);\n    } \n\n    @media(width>980px){\n        h1{\n            font-size:60px;\n        }\n    }\n\n    div.label-input{\n        display:flex;\n        justify-content:center;\n        margin-bottom:15px;\n    }\n\n    label{\n        font-size:20px;\n        font-weight:bold;\n    \n    }\n    input{\n        width:35vW;\n        height:30px;\n        padding-left:20px;\n        border-radius:50px;\n    }\n\n    button{\n        color:rgb(0,0,0,0.7);\n        background-color: rgba(43, 180, 198, 0.62);\n        border-radius:50px;\n        border:solid 2px rgb(255,255,255,0.5);\n        margin-left:5px;\n        font-weight:bold;\n        font-size:16px;\n        height:50px;\n        width:180px;\n        font-family: \"McLaren\";\n\n    }\n\n    @media(width<600px){\n        .input-button{\n            flex-direction:column;\n        }\n        input{\n            width:200px;\n        }\n    }\n    @media(width>980px){\n        label{\n            font-size:30px;\n            margin-bottom:20px;\n        }\n        input{\n            width:400px;\n            height:30px;\n        }\n        button{\n            font-size:22px;\n            height:55px;\n            width:220px;\n        }\n        \n    }\n\n    h2{\n        display:flex;\n        gap:10px;\n\n    }\n    span.name{\n        background-color:white;\n        color: rgb(39, 160, 176);\n        padding-right:10px;\n        padding-left:10px;\n<<<<<<< HEAD\n=======\n        // font-style: oblique;\n>>>>>>> 6f8fab9ee20e9c26d707603155d0e2565f492358\n        border-radius:50px;\n    }\n    form{\n        width:100vw;\n    }\n    .input-button{\n        display:flex;\n        gap:20px;\n        justify-content:center;\n        align-items:center;\n    }\n    div.badwords{\n        height:100px;\n        width:100vw;\n        display:flex;\n        justify-content:center;\n        padding-top:30px;\n    }\n\n    p.warning{\n        color: #EA253D;\n        opacity:0.7;\n        font-size:20px;\n        font-weight:bold;\n    }\n    \n    @media(width>980px){\n        p.warning{\n            font-size:30px;\n        }\n    }\n\n    .to-chatrooms{\n        margin-top:20px;\n        color-background:;\n    }\n    \n    .change-name{\n        margin-top:20px;\n    }\n\n    </style>\n\n\n    <div class=\"homepage-body\">\n    <header-comp></header-comp>\n        <div class=\"titles\">\n            <h1 class=\"main_title-welcome\">Welcome to </h1>\n            <h1 class=\"main_title-livechat\"> Raul's LiveChat</h1>\n        </div>\n    ${this.firstVisit() ? `<form class=\"form\">\n            <div class=\"label-input\">\n                <label class=\"enter_name\">Enter your name</label>\n            </div> \n            <div class=\"input-button\">\n                <input class=\"input_name\" type=\"text\" name=\"name\" placeholder=\"Name\">\n                <button class=\"form_button\">Start LiveChat</button>\n            </div>\n        </form>       \n        <div class=\"badwords\">` + this.warning + `</div>\n        ` : `<h2 class=\"subtitle\">Welcome back    <span class=\"name\">${this.name}</span>!</h2>    \n        <button class=\"to-chatrooms\">Start LiveChat</button>\n        <button class=\"change-name\">Change Name</button>\n        </div>`}`;\n        //set the form \n        const formEl = this.container.querySelector(\".form\");\n        if (formEl) formEl?.addEventListener(\"submit\", (e)=>{\n            e.preventDefault();\n            const target = e.target;\n            const nameInput = target.elements.name.value.trim();\n            if (this.containsBadWords(nameInput) || nameInput === \"\") {\n                this.warning = `<p class=\"warning\">Please, use other words as a name.</p>`;\n                this.render();\n            } else {\n                localStorage.setItem(\"name\", nameInput);\n                localStorage.setItem(\"color\", this.getNiceRandomColor());\n                this.name = nameInput;\n                (0, $7c59ada63ffb8a20$export$55185c17a0fcbe46).go(initURL + \"/chatrooms\");\n            }\n        });\n        //button to chatrooms\n        const divToChat = this.container.querySelector(\".to-chatrooms\");\n        if (divToChat) divToChat.addEventListener(\"click\", (e)=>{\n            e.preventDefault();\n            (0, $7c59ada63ffb8a20$export$55185c17a0fcbe46).go(initURL + \"/chatrooms\");\n        });\n        //button change name\n        const buttonDeleteEl = this.container.querySelector(\".change-name\");\n        if (buttonDeleteEl) buttonDeleteEl?.addEventListener(\"click\", (e)=>{\n            e.preventDefault();\n            const target = e.target;\n            localStorage.removeItem(\"name\");\n            this.name = null;\n            this.render();\n        });\n    }\n}\ncustomElements.define(\"home-page\", $ecaa8b9711b5322e$var$HomePage);\n\n\n\nvar $93f5404284e15007$exports = {};\n$93f5404284e15007$exports = new URL(\"person-icon.82649727.png\", import.meta.url).toString();\n\n\nclass $ce4ca84d4ceca81d$var$Chatrooms extends HTMLElement {\n    constructor(){\n        super();\n    }\n    connectedCallback() {\n        this.render();\n    }\n    render() {\n        const initURL = '/live-chat';\n        this.innerHTML = `\n    <style>\n    \n    .private-buttons{\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        justify-content: center;\n        gap:10px;\n        padding-top: 5px;\n        width:80vw;\n    }\n\n    .public-buttons{\n            \n        display: flex;\n        flex-direction: row;\n        align-items: center;\n        justify-content: center;\n        padding-top: 5px;\n        width:80vw;\n    }\n    .pc-counts{\n        display:flex;\n        flex-direction:column;\n        gap:30px;   \n    }\n    @media(width>980px){\n        .pc-counts{\n            gap:22px;   \n        }\n    }\n    .chatselection-body{\n        height:100vh;\n        width: 100vw;\n        background:linear-gradient(to bottom,rgba(114, 232, 222, 0.87) , rgb(12, 129, 74,0.3));\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n    }\n\n    h1{\n        margin-top: 60px;\n        color: rgb(255, 255, 255);\n        text-align: center;\n        -webkit-text-stroke: 0.1px rgb(0,0,0,0.5);\n    }\n\n    h3{\n        margin-top: 8px;\n        color: white;\n        text-align: center;\n        font-size: 25px;\n\n    }\n\n    @media(width>980px){\n        .chatselection-body{\n            \n        }\n        h1{\n            font-size:40px;\n            margin-top:30px;\n        }\n        h3{\n            font-size:30px;\n        }\n    }\n\n\n    button{\n        min-width:unset;\n        height:50px;\n        width:180px;\n        color:rgb(0,0,0,0.7);\n        background-color: rgba(43, 180, 198, 0.62);\n        border-radius:50px;\n        border:solid 2px rgb(255,255,255,0.5);\n        font-weight: bold;\n        font-size: 18px;\n        flex-shrink: 0;\n    }\n    @media(width>980px){\n        button{\n            font-size:22px;\n            height:55px;\n            width:220px;\n        }\n    }\n    .back-home-button{\n        position:absolute;\n        margin-top:110px;\n        left:20px;\n        min-width:unset;\n        width:60px;\n        height:30px;\n        background-color: rgba(43, 180, 198, 0.62);\n        color:rgb(0,0,0,0.7);\n        border-radius:50px;\n        border:solid 0.5px rgb(255,255,255,0.1);\n        font-weight: bold;\n        font-size:13px;\n    }\n    h2.pc-total, h2.pc1-participants, h2.pc2-participants, h2.pc3-participants{\n        text-align:right;\n        color:grey;\n        min-width:14px;\n        font-size:14px;\n        margin:0;\n        padding:0;\n        }\n    @media(width>980px){\n        h2.pc-total, h2.pc1-participants, h2.pc2-participants, h2.pc3-participants{\n            min-width:30px;\n            font-size:24px;\n        }\n    }\n    div.pc1-count, div.pc2-count, div.pc3-count{\n        display: flex;\n        flex-direction: row;\n        align-items:center;\n        justify-content:center;\n        width:100%;\n        margin:0;\n        padding:0;\n    }\n\n    div.popup-container{\n        display:flex;\n        align-items:center;\n        justify-content:center;\n        position:absolute;\n        z-index:100;\n        top:200px;\n        width:260px;\n    }\n    @media(width>600px){\n        div.popup-container{\n            width:50%;\n        \n        }\n    }\n    div.popup-join{\n        display:flex;\n        flex-direction:column;\n        width:100%;\n        height:100%;\n        border:solid 5px rgb(112, 211, 211);\n        border-radius:20px;\n        gap:20px;\n        background: linear-gradient(to bottom,rgba(60, 200, 220),rgb(12, 129, 140));\n    }\n    h2.insert-id{\n        margin:20px 20px 0 20px;\n        padding:0;\n        display:flex;\n        justify-content:center;\n        align-items:center;\n        text-align:center;\n    }\n    .join-form{\n        display:flex;\n        flex-direction:column;\n        align-items:center;\n        justify-content:center;\n        gap:10px;\n    }\n    .id-input{\n        width:70%;\n        // max-width:500px;\n        height:30px;\n        border-radius:5px;\n        padding-left:15px;\n    }\n\n    .button-join-chat{\n        background-color:rgba(114, 232, 222, 0.87);\n        margin-bottom:20px;\n\n    }\n    @media(width<415px){\n        .button-join-chat{\n            background-color:rgba(114, 232, 222, 0.87);\n            margin-bottom:20px;\n        }\n    }      \n\n    button.close-x{\n        all:unset;\n        position: absolute; \n        top: 10px;\n        right: 10px;\n        width: 30px;\n        height: 30px;\n        border: none;\n        border-radius:10px;\n        font-size: 20px;\n        font-weight: bold;\n        text-align: center;\n        line-height: 30px; \n        cursor: pointer;    \n    }\n\n    button.close-x:hover {\n        color:white;\n    }\n    .miss-alert-text{\n        color:#EA253D;\n        opacity:0.8;\n        font-size:20px;\n        font-weight:bold;\n    }\n    .public_chat_1, .public_chat_2, .public_chat_3{\n        margin-left:47px;\n    }\n    @media(width>980px){\n        .public_chat_1, .public_chat_2, .public_chat_3{\n            margin-left:99px;\n        }\n    }\n    \n    .create_private, .join_private{\n        margin-left:99px;\n        margin-right:100px;\n    }\n\n    img{\n        min-width:10px; \n        height:10px;\n        margin-left:5px;\n    }\n    @media(width>980px){\n        img{\n            min-width:20px; \n            height:20px;\n            margin-left:10px;\n        }\n    }\n    </style>\n\n\n    <button class=\"back-home-button\">BACK </button>\n    <div class=\"chatselection-body\">\n        <header-comp></header-comp>\n        <h1 class=\"select_chat\">Select a Chatroom</h1>\n        <h3 class=\"public_title\">Public</h3>\n        <div class=\"public-buttons\">\n            <div class=\"pc-buttons\">\n                <div class=\"pc1-button\">\n                    <button class=\"public_chat_1\">Chatroom 1</button>\n                </div>\n                <div class=\"pc2-button\">\n                    <button class=\"public_chat_2\">Chatroom 2</button>\n                </div>\n                <div class=\"pc3-button\">\n                    <button class=\"public_chat_3\">Chatroom 3</button>\n                </div>\n            </div>\n            <div class=\"pc-counts\">\n                <div class=\"pc1-count\">\n                    <h2 class=\"pc1-participants\">-</h2>\n                    <h2 class=\"pc-total\">/10</h2>\n                    <img src=${0, (/*@__PURE__*/$parcel$interopDefault($93f5404284e15007$exports))}>\n                </div>\n                <div class=\"pc2-count\">\n                    <h2 class=\"pc2-participants\">-</h2>\n                    <h2 class=\"pc-total\">/10</h2>\n                    <img src=${0, (/*@__PURE__*/$parcel$interopDefault($93f5404284e15007$exports))}>\n                </div>\n                <div class=\"pc3-count\">\n                    <h2 class=\"pc3-participants\">-</h2>\n                    <h2 class=\"pc-total\">/10</h2>\n                    <img src=${0, (/*@__PURE__*/$parcel$interopDefault($93f5404284e15007$exports))}>\n                </div>\n            </div>\n        </div>\n        <h3 class=\"private-title\">Private</h3>\n        <div class=\"private-buttons\">\n            <button class=\"create_private\">Create Chatroom</button>\n            <button class=\"join_private\">Join Chatroom</button>\n        </div>\n        <div class=\"popup-container\"></div>\n    </div>\n\n    `;\n        const backbuttonEl = this.querySelector(\".back-home-button\");\n        backbuttonEl?.addEventListener(\"click\", (e)=>{\n            e.preventDefault();\n            const target = e.target;\n            (0, $7c59ada63ffb8a20$export$55185c17a0fcbe46).go(initURL + \"/\");\n        });\n    }\n}\ncustomElements.define(\"chatrooms-page\", $ce4ca84d4ceca81d$var$Chatrooms);\n\n\nvar $4490c55d1790ab5f$exports = {};\n$4490c55d1790ab5f$exports = new URL(\"send-icon2.da343077.png\", import.meta.url).toString();\n\n\nclass $54897bc0fa12a0bd$var$ChatPage extends HTMLElement {\n    constructor(){\n        super();\n    }\n    connectedCallback() {\n        this.render();\n    }\n    render() {\n        var idShort = window.location.pathname.split(\"/\")[2];\n        this.innerHTML = `\n    <style>\n        \n    .chats-body{\n        height:100vh;\n        width: 100vw;\n        background-color:rgba(114, 232, 222, 0.1);\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n    }\n\n    .back-button{\n        position:absolute;\n        margin-top:110px;\n        left:20px;\n        min-width:unset;\n        width:60px;\n        height:30px;\n        background-color: rgba(43, 180, 198);\n        color:rgb(0,0,0,0.7);\n        border-radius:50px;\n        border:solid 0.5px rgb(255,255,255,0.1);\n        font-weight: bold;\n        z-index:1000;\n    }\n    \n    @media(width<600px){\n        button.back-button{\n            margin-top:25px;\n            color:rgb(255,255,255);\n        }\n    }\n\n\n    form.form-send-msg{\n        display:flex;\n        justify-content:center;\n        position:absolute;\n        bottom:20px;\n        width:95vw;\n        max-width:1800px;\n        height:50px;\n        gap:5px;\n        padding-left:10px;\n    }\n\n\n\n    textarea.input-send-msg{\n        flex-grow:1;\n        height:45px;\n        border-radius:50px;\n        padding: 10px 3vw;\n        margin-top:5px;\n        max-width:1000px;\n        overflow-y: auto;\n        resize:none;\n        white-space: pre-wrap;\n        overflow-wrap: break-word;\n    }\n\n    button.button-send-msg{\n        width:50px; \n        height:100%;\n        border:none;\n        background-color: transparent;\n        cursor:pointer;\n        bottom:30px;\n        display:flex;\n        align-items:center;\n        justify-content:center;\n    }\n        \n    img.img-send-msg{\n        width: 40px;\n        height: 40px;\n        max-width: 50px ;\n        max-height: 50px ;\n        object-fit: contain;\n        display: block;\n    }\n\n    h2.id{\n        position:absolute;\n        top:30px;\n        right:5vw;\n        min-width:100px;\n        margin:0;\n        padding:0;\n        color: rgba(0, 140, 160);\n        font-size:20px;\n    }\n\n    \n    @media(width<600px){\n        h2.id{\n            font-size:14px;\n            padding-left:10px;\n        }\n    }\n        \n    .messages-container{\n        // border:solid 3px black;\n        flex-grow:1;\n        overflow-y:auto;\n        width:70vw;\n        max-width:900px;\n        margin-bottom: 75px;\n        display:flex;\n        flex-direction:column;\n    }\n    .message{\n        padding: 8px;\n        border-radius: 10px;\n        margin-bottom: 5px;\n        margin-left: 10px;\n        width: fit-content;\n        height: fit-content;\n        max-width: 80%;\n        word-wrap: break-word;\n        background:rgb(227, 253, 233);\n        align-self: flex-end;\n    }\n    .message.user {\n        background: #e3f2fd;\n        align-self: flex-start;\n    }\n\n    .user-msg.admin{\n        background:none;\n        font-weight: bold;\n        align-self: flex-end;\n    }\n    .user-msg{\n        background:none;\n        font-weight: bold;\n        align-self: flex-start;\n        padding-left:20px;\n        padding-top:10px;\n    }\n\n    </style>\n\n    <div class=\"chats-body\">\n        <header-comp></header-comp>\n        <h2 class=\"id\">ID: ${idShort}</h2>\n        <div class=\"messages-container\">\n        </div>\n        <button class=\"back-button\">BACK </button>\n        <form class=\"form-send-msg\">\n            <textarea  class=\"input-send-msg\" type=\"text\" placeholder=\"Write a message\"></textarea>\n            <button class=\"button-send-msg\">\n                <img class=\"img-send-msg\" src=\"${0, (/*@__PURE__*/$parcel$interopDefault($4490c55d1790ab5f$exports))}\" >\n            </button>\n        </form>\n    </div>\n\n    `;\n    }\n}\ncustomElements.define(\"chats-page\", $54897bc0fa12a0bd$var$ChatPage);\n\n\n\n\n\n\n\n\n// const initURL=''\nconst $e817d3341cf3ea9c$var$initURL = '/live-chat';\nconst $e817d3341cf3ea9c$var$router = new (0, $7c59ada63ffb8a20$export$55185c17a0fcbe46)(document.querySelector(\".root\"), {\n    baseUrl: $e817d3341cf3ea9c$var$initURL\n});\nconsole.log(\"se ha iniciado el router.\");\nconsole.log(\"la abse url del router es: \", $e817d3341cf3ea9c$var$router.baseUrl);\n$e817d3341cf3ea9c$var$router.setRoutes([\n    {\n        path: '/',\n        component: 'home-page'\n    },\n    {\n        path: '/chatrooms',\n        component: 'chatrooms-page'\n    },\n    {\n        path: '/chat/:id',\n        component: 'chats-page'\n    }\n]);\n\n\n// import {rtdb} from \"../backend/db.ts\"\nconst $8765107ad740dd46$var$initURL = '/live-chat';\n// const API_BASE_URL = \"http://localhost:3000\";\nconst $8765107ad740dd46$var$API_BASE_URL = \"https://backend-live-chat.onrender.com\";\n// Check rooms and messages to delete\nfunction $8765107ad740dd46$export$590c8e4e60a086f() {\n    const username = localStorage.getItem(\"name\");\n    const color = localStorage.getItem(\"color\");\n    fetch($8765107ad740dd46$var$API_BASE_URL + \"/checkrooms\", {\n        method: \"PUT\",\n        headers: {\n            \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n            username: username,\n            color: color\n        })\n    }).then((res)=>res.json()).then((data)=>{\n        console.log(data);\n    });\n}\n// Get all users\nfunction $8765107ad740dd46$export$69093b9c569a5b5b() {\n    const username = localStorage.getItem(\"name\");\n    fetch($8765107ad740dd46$var$API_BASE_URL + \"/getusers\", {\n        method: \"GET\",\n        headers: {\n            \"Content-Type\": \"application/json\"\n        }\n    }).then((res)=>res.json()).then((data)=>{\n        console.log(\"All users in chats are:\", data);\n    });\n}\n// Create a chatroom\nfunction $8765107ad740dd46$export$9528c8f8fb52de08() {\n    const username = localStorage.getItem(\"name\");\n    const color = localStorage.getItem(\"color\");\n    fetch($8765107ad740dd46$var$API_BASE_URL + \"/createchat\", {\n        method: \"POST\",\n        headers: {\n            \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n            name: username,\n            color: color\n        })\n    }).then((res)=>res.json()).then((data)=>{\n        console.log(\"Room created with ID:\", data.idShort);\n        (0, $7c59ada63ffb8a20$export$55185c17a0fcbe46).go($8765107ad740dd46$var$initURL + \"/chat/\" + data.idShort);\n    });\n}\n// Add a participant to the db\nasync function $8765107ad740dd46$export$1a58a31768717a0c(idShort) {\n    const username = localStorage.getItem(\"name\");\n    const color = localStorage.getItem(\"color\");\n    const data = await $8765107ad740dd46$export$d301f6f8f77a2a94(idShort);\n    const fullid = data.idFull;\n    fetch($8765107ad740dd46$var$API_BASE_URL + \"/chat/\" + idShort + \"/addparticipant\", {\n        method: \"PUT\",\n        headers: {\n            \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n            name: username,\n            color: color,\n            idShort: idShort,\n            fullid: fullid\n        })\n    }).then((res)=>res.json()).then((data)=>{\n        console.log(\"The room \" + idShort + \" added the participant:\", username);\n    });\n}\n// Remove a participant from the db\nasync function $8765107ad740dd46$export$971a7382b074b466() {\n    const username = localStorage.getItem(\"name\");\n    const idShort = window.location.pathname.split(\"/\")[2];\n    const data = await $8765107ad740dd46$export$d301f6f8f77a2a94(idShort);\n    const fullid = data.idFull;\n    await fetch($8765107ad740dd46$var$API_BASE_URL + \"/chat/\" + idShort + \"/removeparticipant\", {\n        method: \"PUT\",\n        headers: {\n            \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n            name: username,\n            idShort: idShort,\n            fullid: fullid\n        })\n    });\n    console.log(\"The room \" + idShort + \" removed the participant:\", username);\n    await $8765107ad740dd46$export$7c3f85fd24d3f52(idShort);\n}\n// Delete empty room\nasync function $8765107ad740dd46$export$7c3f85fd24d3f52(idShort) {\n    const dataRoom = await $8765107ad740dd46$export$d301f6f8f77a2a94(idShort);\n    const numPart = dataRoom.chatroom.participants ? Object.keys(dataRoom.chatroom.participants).length : 0;\n    const fullid = dataRoom.idFull;\n    if (numPart == 1) fetch($8765107ad740dd46$var$API_BASE_URL + \"/chat/\" + idShort + \"/deletechatroom\", {\n        method: \"PUT\",\n        headers: {\n            \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n            idShort: idShort,\n            fullid: fullid\n        })\n    }).then((res)=>res.json()).then((data)=>{\n        console.log(\"The room \" + idShort + \" is deleted\");\n    });\n}\n// Listen changes in a specific room\nasync function $8765107ad740dd46$export$d301f6f8f77a2a94(idShort) {\n    try {\n        const response = await fetch($8765107ad740dd46$var$API_BASE_URL + \"/chat/\" + idShort, {\n            method: \"GET\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            }\n        });\n        if (!response.ok) throw new Error(\"Error en la solicitud\");\n        const data = await response.json();\n        return data;\n    } catch (error) {\n        console.log(\"ERROR at listening room\");\n        return null;\n    }\n}\nfunction $8765107ad740dd46$export$cd380920575d3d6a() {\n    $8765107ad740dd46$export$83659e7c1ad7cc7d(\"22338437\");\n    $8765107ad740dd46$export$83659e7c1ad7cc7d(\"4f94d8d9\");\n    $8765107ad740dd46$export$83659e7c1ad7cc7d(\"96479775\");\n}\n// Listen to change in participant numbers \nasync function $8765107ad740dd46$export$83659e7c1ad7cc7d(idShort) {\n    const roomData = await $8765107ad740dd46$export$d301f6f8f77a2a94(idShort);\n    const fullid = roomData.idFull;\n    const numPart = Object.keys(roomData.chatroom.participants).length - 1;\n    if (idShort == \"22338437\") {\n        const counterEl = document.querySelector(\".pc1-participants\");\n        if (counterEl) counterEl.textContent = JSON.stringify(numPart);\n    } else if (idShort == \"4f94d8d9\") {\n        const counterEl = document.querySelector(\".pc2-participants\");\n        if (counterEl) counterEl.textContent = JSON.stringify(numPart);\n    } else if (idShort == \"96479775\") {\n        const counterEl = document.querySelector(\".pc3-participants\");\n        if (counterEl) counterEl.textContent = JSON.stringify(numPart);\n    }\n    return numPart;\n}\n// Write messages in the database\nasync function $8765107ad740dd46$export$dd0c7f4308217d35(user, message) {\n    const idShort = window.location.pathname.split(\"/\")[2];\n    const time = Date.now();\n    const color = localStorage.getItem(\"color\");\n    const roomData = await $8765107ad740dd46$export$d301f6f8f77a2a94(idShort);\n    const fullid = roomData.idFull;\n    fetch($8765107ad740dd46$var$API_BASE_URL + `/chat/${idShort}/writemessages`, {\n        method: \"PUT\",\n        headers: {\n            \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n            idShort: idShort,\n            fullid: fullid,\n            user: user,\n            message: message,\n            timestamp: time,\n            color: color\n        })\n    }).then((res)=>res.json()).then((data)=>{\n        console.log(\"The message has been written.\");\n    });\n}\n// Listen messages on change\nasync function $8765107ad740dd46$export$6563956773976c90(idShort) {\n    const roomData = await $8765107ad740dd46$export$d301f6f8f77a2a94(idShort);\n    const fullid = roomData.idFull;\n    const username = localStorage.getItem(\"name\");\n    console.log(\"the username is:\", username);\n    const eventSource = new EventSource(`${$8765107ad740dd46$var$API_BASE_URL}/chat/${idShort}/listenmessages?fullid=${fullid}`);\n    eventSource.onmessage = (event)=>{\n        const data = JSON.parse(event.data);\n        if (data.messages != null) {\n            console.log(\"Messages updated:\", data.messages);\n            $8765107ad740dd46$var$renderMessages(data.messages);\n        }\n    };\n    eventSource.onerror = (error)=>{\n        console.error(\"Error in the SSE:\", error);\n        eventSource.close();\n    };\n}\nfunction $8765107ad740dd46$var$renderMessages(messages) {\n    const container = document.querySelector(\".messages-container\");\n    container.innerHTML = \"\";\n    let previousUserMsg = \"\";\n    let n = 0;\n    Object.entries(messages).forEach(([idTime, msgData])=>{\n        if (idTime != \"0\") {\n            const messageEl = document.createElement(\"div\");\n            messageEl.classList.add(\"message\");\n            if (msgData.username == localStorage.getItem(\"name\") && msgData.color == localStorage.getItem(\"color\")) var userAdmin = \"admin\";\n            else var userAdmin = \"user\";\n            messageEl.classList.add(`${userAdmin}`);\n            messageEl.textContent = msgData.message;\n            const userEl = document.createElement(\"p\");\n            userEl.classList.add(\"user-msg\");\n            userEl.classList.add(`${userAdmin}`);\n            const colorUser = msgData.color;\n            if (colorUser != null) userEl.style.color = colorUser;\n            if (userAdmin == \"user\" && previousUserMsg != msgData.username) userEl.textContent = msgData.username;\n            container.appendChild(userEl);\n            container.appendChild(messageEl);\n            previousUserMsg = msgData.username;\n            n += 1;\n        }\n    });\n    if (container) container.scrollTop = container.scrollHeight;\n}\n\n\nconst $0844466ed0f7159c$var$listurl = window.location.pathname.split(\"/\");\nconst $0844466ed0f7159c$var$idShort = $0844466ed0f7159c$var$listurl[$0844466ed0f7159c$var$listurl.length - 1];\nconst $0844466ed0f7159c$var$initURL = '/live-chat';\n// const initURL=''\nwindow.addEventListener('popstate', (event)=>{\n    console.log('The URL changed to: ', window.location.pathname);\n    const listurl = window.location.pathname.split(\"/\");\n    const idShort = listurl[listurl.length - 1];\n    if (window.location.pathname.startsWith($0844466ed0f7159c$var$initURL + \"/chatrooms\")) {\n        (0, $8765107ad740dd46$export$cd380920575d3d6a)();\n        (0, $8765107ad740dd46$export$590c8e4e60a086f)();\n        setInterval(()=>{\n            if (window.location.pathname.startsWith($0844466ed0f7159c$var$initURL + \"/chatrooms\")) (0, $8765107ad740dd46$export$cd380920575d3d6a)();\n        }, 3000);\n    }\n    if (window.location.pathname.startsWith($0844466ed0f7159c$var$initURL + \"/chat/\" + idShort)) window.addEventListener(\"DOMContentLoaded\", ()=>{\n        (0, $8765107ad740dd46$export$1a58a31768717a0c)(idShort);\n    });\n    if (window.location.pathname.startsWith($0844466ed0f7159c$var$initURL + \"/chat/\")) (0, $8765107ad740dd46$export$6563956773976c90)(idShort);\n});\nif (window.location.pathname.startsWith($0844466ed0f7159c$var$initURL + \"/chatrooms\")) {\n    const name = localStorage.getItem(\"name\");\n    const color = localStorage.getItem(\"color\");\n    if (!name && !color) (0, $7c59ada63ffb8a20$export$55185c17a0fcbe46).go(\"/\");\n    (0, $8765107ad740dd46$export$cd380920575d3d6a)();\n    (0, $8765107ad740dd46$export$590c8e4e60a086f)();\n    setInterval(()=>{\n        if (window.location.pathname.startsWith($0844466ed0f7159c$var$initURL + \"/chatrooms\")) (0, $8765107ad740dd46$export$cd380920575d3d6a)();\n    }, 3000);\n}\nif (window.location.pathname.startsWith($0844466ed0f7159c$var$initURL + \"/chat/\" + $0844466ed0f7159c$var$idShort)) {\n    const name = localStorage.getItem(\"name\");\n    const color = localStorage.getItem(\"color\");\n    if (!name && !color) (0, $7c59ada63ffb8a20$export$55185c17a0fcbe46).go(\"/\");\n    window.addEventListener(\"DOMContentLoaded\", ()=>{\n        (0, $8765107ad740dd46$export$1a58a31768717a0c)($0844466ed0f7159c$var$idShort);\n    });\n}\ndocument.addEventListener(\"submit\", async (event)=>{\n    const target = event.target;\n    if (target.classList.contains(\"form-send-msg\")) {\n        event.preventDefault();\n        const inputEl = document.querySelector(\".input-send-msg\");\n        const inputValue = inputEl.value;\n        const username = localStorage.getItem(\"name\");\n        (0, $8765107ad740dd46$export$dd0c7f4308217d35)(username, inputValue);\n        inputEl.value = \"\";\n    }\n});\ndocument.addEventListener(\"keydown\", function(e) {\n    const target = e.target;\n    if (target.classList.contains(\"input-send-msg\")) {\n        const textarea = document.querySelector(\".input-send-msg\");\n        const inputValue = textarea.value;\n        const username = localStorage.getItem(\"name\");\n        if (username && e.key === \"Enter\" && !e.shiftKey) {\n            e.preventDefault();\n            (0, $8765107ad740dd46$export$dd0c7f4308217d35)(username, inputValue);\n            textarea.value = \"\";\n        }\n    }\n});\nif (window.location.pathname.startsWith($0844466ed0f7159c$var$initURL + \"/chat/\")) (0, $8765107ad740dd46$export$6563956773976c90)($0844466ed0f7159c$var$idShort);\ndocument.addEventListener(\"click\", async (event)=>{\n    const target = event.target;\n    if (target.classList.contains(\"create_private\")) {\n        event.preventDefault();\n        (0, $8765107ad740dd46$export$9528c8f8fb52de08)();\n    } else if (target.classList.contains(\"back-button\")) {\n        event.preventDefault();\n        (0, $8765107ad740dd46$export$971a7382b074b466)();\n        (0, $7c59ada63ffb8a20$export$55185c17a0fcbe46).go($0844466ed0f7159c$var$initURL + \"/chatrooms\");\n    } else if (target.classList.contains(\"public_chat_1\")) {\n        event.preventDefault();\n        const participantsText = document.querySelector(\".pc1-participants\");\n        if (participantsText && participantsText.textContent) {\n            const participantsCount = parseInt(participantsText.textContent, 10);\n            if (!isNaN(participantsCount) && participantsCount <= 10) {\n                const idShort = \"22338437\";\n                (0, $7c59ada63ffb8a20$export$55185c17a0fcbe46).go($0844466ed0f7159c$var$initURL + \"/chat/\" + idShort);\n                (0, $8765107ad740dd46$export$1a58a31768717a0c)(idShort);\n            }\n        }\n    } else if (target.classList.contains(\"public_chat_2\")) {\n        event.preventDefault();\n        const participantsText = document.querySelector(\".pc2-participants\");\n        if (participantsText && participantsText.textContent) {\n            const participantsCount = parseInt(participantsText.textContent, 10);\n            if (!isNaN(participantsCount) && participantsCount <= 10) {\n                const idShort = \"4f94d8d9\";\n                (0, $7c59ada63ffb8a20$export$55185c17a0fcbe46).go($0844466ed0f7159c$var$initURL + \"/chat/\" + idShort);\n                (0, $8765107ad740dd46$export$1a58a31768717a0c)(idShort);\n            }\n        }\n    } else if (target.classList.contains(\"public_chat_3\")) {\n        event.preventDefault();\n        const participantsText = document.querySelector(\".pc3-participants\");\n        if (participantsText && participantsText.textContent) {\n            const participantsCount = parseInt(participantsText.textContent, 10);\n            if (!isNaN(participantsCount) && participantsCount <= 10) {\n                const idShort = \"96479775\";\n                (0, $7c59ada63ffb8a20$export$55185c17a0fcbe46).go($0844466ed0f7159c$var$initURL + \"/chat/\" + idShort);\n                (0, $8765107ad740dd46$export$1a58a31768717a0c)(idShort);\n            }\n        }\n    } else if (target.classList.contains(\"join_private\")) {\n        event.preventDefault();\n        const popupJoinEl = document.querySelector(\".popup-container\");\n        popupJoinEl.innerHTML = `\n        <div class=\"popup-join\">\n            <h2 class=\"insert-id\">Insert ChatRoom ID to join</h2>\n            <form class=\"join-form\">\n                <input class=\"id-input\" placeholder=\"ID: 12345678\">\n                <div class=\"id-miss-alert\"></div>\n                <button class=\"button-join-chat\">Enter ChatRoom </button>\n            </form>\n            <button type=\"submit\" class=\"close-x\">x</button>\n        </div>\n        `;\n    } else if (target.classList.contains(\"close-x\")) {\n        event.preventDefault();\n        const popupJoinEl = document.querySelector(\".popup-container\");\n        popupJoinEl.innerHTML = ``;\n    } else if (target.classList.contains(\"button-join-chat\")) {\n        event.preventDefault();\n        const inputElement = document.querySelector(\".id-input\");\n        const idShort = inputElement.value;\n        if (idShort.length != 8) {\n            const alertEl = document.querySelector(\".id-miss-alert\");\n            alertEl.innerHTML = `<p class=\"miss-alert-text\">The ID must have 8 characters.</p>`;\n        } else {\n            const test = await (0, $8765107ad740dd46$export$d301f6f8f77a2a94)(idShort);\n            const numPart = test ? Object.keys(test.chatroom.participants).length - 1 : 0;\n            if (test != null && numPart < 1) {\n                // The room exists and it is not full\n                console.log(\"you entered to the room with the idShort:\", idShort);\n                (0, $7c59ada63ffb8a20$export$55185c17a0fcbe46).go($0844466ed0f7159c$var$initURL + \"/chat/\" + idShort);\n                (0, $8765107ad740dd46$export$1a58a31768717a0c)(idShort);\n            } else if (numPart == 1) {\n                const alertEl = document.querySelector(\".id-miss-alert\");\n                alertEl.innerHTML = `<p class=\"miss-alert-text\">The room is full. Please try again later!</p>`;\n            } else {\n                const alertEl = document.querySelector(\".id-miss-alert\");\n                alertEl.innerHTML = `<p class=\"miss-alert-text\">The Chatroom does not exist!</p>`;\n            }\n        }\n    }\n});\n\n\n//# sourceMappingURL=index.898e3a20.js.map\n","\"use strict\";\n\nvar mapping = new Map();\nfunction register(baseUrl, manifest) {\n  for (var i = 0; i < manifest.length - 1; i += 2) {\n    mapping.set(manifest[i], {\n      baseUrl: baseUrl,\n      path: manifest[i + 1]\n    });\n  }\n}\nfunction resolve(id) {\n  var resolved = mapping.get(id);\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n  return new URL(resolved.path, resolved.baseUrl).toString();\n}\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(new __parcel__URL__(\"\").toString(),JSON.parse(\"[\\\"inzCo\\\",\\\"index.898e3a20.js\\\",\\\"bQSRt\\\",\\\"person-icon.82649727.png\\\",\\\"eRQEx\\\",\\\"logo-bckg-removed.217b7931.png\\\",\\\"ax8AL\\\",\\\"send-icon2.da343077.png\\\"]\"));","import \"../pages/homepage/index.ts\"\r\nimport \"../pages/chatselection/index.ts\"\r\nimport \"../pages/chat/index.ts\"\r\nimport {Router} from \"@vaadin/router\"\r\n\r\nimport {listenRoom, createChatroom, writeMessages, removeParticipant, addParticipant, \r\n    listenToParticipants, publicParticipantsLoad, checkAndDeleteChatroom, listenMessages,\r\n    getAllUsers, checkRooms}\r\nfrom \"./api.ts\"\r\n\r\nconst listurl=window.location.pathname.split(\"/\")\r\nconst idShort=listurl[listurl.length-1]\r\n\r\nconst initURL='/live-chat'\r\n// const initURL=''\r\n\r\nwindow.addEventListener('popstate', (event) => {\r\n    console.log('The URL changed to: ', window.location.pathname);\r\n    const listurl=window.location.pathname.split(\"/\")\r\n    const idShort=listurl[listurl.length-1]\r\n\r\n    if (window.location.pathname.startsWith(initURL+\"/chatrooms\")) {\r\n        publicParticipantsLoad(); \r\n        checkRooms();\r\n\r\n    setInterval(() => {\r\n        if (window.location.pathname.startsWith(initURL+\"/chatrooms\")){\r\n            publicParticipantsLoad(); \r\n        }\r\n    }, 3000);\r\n    }\r\n    if (window.location.pathname.startsWith(initURL+\"/chat/\"+idShort)) {\r\n        window.addEventListener(\"DOMContentLoaded\", () => {\r\n            addParticipant(idShort);\r\n        });\r\n    }\r\n    if (window.location.pathname.startsWith(initURL+\"/chat/\")) {\r\n        listenMessages(idShort); \r\n    }\r\n});\r\n\r\nif (window.location.pathname.startsWith(initURL+\"/chatrooms\")) {\r\n    const name=localStorage.getItem(\"name\")\r\n    const color=localStorage.getItem(\"color\")\r\n    if (!name&&!color){\r\n        Router.go(\"/\")\r\n    }\r\n    publicParticipantsLoad(); \r\n    checkRooms();\r\n    \r\n    setInterval(() => {\r\n        if (window.location.pathname.startsWith(initURL+\"/chatrooms\")){\r\n            publicParticipantsLoad(); \r\n        }\r\n    }, 3000);\r\n}\r\nif (window.location.pathname.startsWith(initURL+\"/chat/\"+idShort)) {\r\n    const name=localStorage.getItem(\"name\")\r\n    const color=localStorage.getItem(\"color\")\r\n    if (!name&&!color){\r\n        Router.go(\"/\")\r\n    }\r\n\r\n\r\n    window.addEventListener(\"DOMContentLoaded\", () => {\r\n        addParticipant(idShort);\r\n    });\r\n}\r\n\r\n\r\ndocument.addEventListener(\"submit\", async (event) => {\r\n    const target = event.target as HTMLElement;\r\n\r\n    if (target.classList.contains(\"form-send-msg\")) {\r\n        event.preventDefault();\r\n        const inputEl = document.querySelector(\".input-send-msg\") as HTMLInputElement\r\n        const inputValue = inputEl.value;\r\n        const username=localStorage.getItem(\"name\")!\r\n        writeMessages(username, inputValue)\r\n        inputEl.value=\"\";\r\n    }\r\n})   \r\n\r\ndocument!.addEventListener(\"keydown\", function (e) {\r\n    const target = e.target as HTMLElement;\r\n\r\n    if (target.classList.contains(\"input-send-msg\")) {\r\n        const textarea = document.querySelector(\".input-send-msg\") as HTMLInputElement\r\n        const inputValue = textarea.value;\r\n        const username=localStorage.getItem(\"name\")\r\n        if (username && e.key === \"Enter\" && !e.shiftKey) {\r\n            e.preventDefault(); \r\n            writeMessages(username, inputValue)\r\n            textarea.value=\"\";\r\n  }\r\n}\r\n});\r\n\r\n\r\nif (window.location.pathname.startsWith(initURL+\"/chat/\")) {\r\n    listenMessages(idShort); \r\n}\r\n\r\ndocument.addEventListener(\"click\", async (event) => {\r\n    const target = event.target as HTMLElement;\r\n    \r\n    if (target.classList.contains(\"create_private\")) {\r\n        event.preventDefault();\r\n        createChatroom();\r\n    }\r\n    else if (target.classList.contains(\"back-button\")) {\r\n        event.preventDefault();\r\n        removeParticipant();\r\n        Router.go(initURL+\"/chatrooms\")\r\n    }\r\n    else if (target.classList.contains(\"public_chat_1\")) {\r\n        event.preventDefault();\r\n        const participantsText = document.querySelector(\".pc1-participants\")!;\r\n        if (participantsText && participantsText.textContent) {\r\n        const participantsCount = parseInt(participantsText.textContent, 10);\r\n        if (!isNaN(participantsCount) && participantsCount <= 10) {\r\n            const idShort=\"22338437\"\r\n            Router.go(initURL+\"/chat/\"+idShort);\r\n            addParticipant(idShort);\r\n        }}\r\n      }\r\n    else if (target.classList.contains(\"public_chat_2\")) {\r\n        event.preventDefault();\r\n        const participantsText = document.querySelector(\".pc2-participants\")!;\r\n        if (participantsText && participantsText.textContent) {\r\n        const participantsCount = parseInt(participantsText.textContent, 10);\r\n        if (!isNaN(participantsCount) && participantsCount <= 10) {\r\n            const idShort=\"4f94d8d9\"\r\n            Router.go(initURL+\"/chat/\"+idShort);\r\n            addParticipant(idShort);\r\n        }}\r\n      }\r\n    else if (target.classList.contains(\"public_chat_3\")) {\r\n        event.preventDefault();\r\n        const participantsText = document.querySelector(\".pc3-participants\")!;\r\n        if (participantsText && participantsText.textContent) {\r\n        const participantsCount = parseInt(participantsText.textContent, 10);\r\n        if (!isNaN(participantsCount) && participantsCount <= 10) {\r\n            const idShort=\"96479775\"\r\n            Router.go(initURL+\"/chat/\"+idShort);\r\n            addParticipant(idShort);\r\n        }}\r\n      }\r\n    else if (target.classList.contains(\"join_private\")) {\r\n        event.preventDefault();\r\n        const popupJoinEl=document.querySelector(\".popup-container\")\r\n        popupJoinEl!.innerHTML=`\r\n        <div class=\"popup-join\">\r\n            <h2 class=\"insert-id\">Insert ChatRoom ID to join</h2>\r\n            <form class=\"join-form\">\r\n                <input class=\"id-input\" placeholder=\"ID: 12345678\">\r\n                <div class=\"id-miss-alert\"></div>\r\n                <button class=\"button-join-chat\">Enter ChatRoom </button>\r\n            </form>\r\n            <button type=\"submit\" class=\"close-x\">x</button>\r\n        </div>\r\n        `\r\n      }\r\n    else if (target.classList.contains(\"close-x\")) {\r\n        event.preventDefault();\r\n        const popupJoinEl=document.querySelector(\".popup-container\")\r\n        popupJoinEl!.innerHTML=``\r\n      }\r\n    else if (target.classList.contains(\"button-join-chat\")) {\r\n        event.preventDefault();\r\n        const inputElement = document.querySelector(\".id-input\")! as HTMLInputElement\r\n        const idShort=inputElement.value\r\n        if (idShort.length!=8){\r\n            const alertEl=document.querySelector(\".id-miss-alert\")\r\n            alertEl!.innerHTML=`<p class=\"miss-alert-text\">The ID must have 8 characters.</p>`\r\n        }else{\r\n            const test=await listenRoom(idShort)\r\n            const numPart=test? Object.keys(test.chatroom.participants).length-1:0\r\n\r\n            if (test!=null && numPart<1){ \r\n                // The room exists and it is not full\r\n                console.log(\"you entered to the room with the idShort:\" ,idShort)\r\n                Router.go(initURL+\"/chat/\"+idShort);\r\n                addParticipant(idShort);\r\n            }else if (numPart ==1){\r\n                const alertEl=document.querySelector(\".id-miss-alert\")\r\n                alertEl!.innerHTML=`<p class=\"miss-alert-text\">The room is full. Please try again later!</p>`\r\n            }else{\r\n                const alertEl=document.querySelector(\".id-miss-alert\")\r\n                alertEl!.innerHTML=`<p class=\"miss-alert-text\">The Chatroom does not exist!</p>`\r\n            }\r\n        }\r\n      }\r\n    ;}\r\n  );\r\n\r\n","import {Router} from \"@vaadin/router\"\r\nimport \"../../components/header.ts\"\r\n\r\nclass HomePage extends HTMLElement{\r\n    name: string|null|undefined\r\n    warning: string|null|undefined\r\n    shadow!: ShadowRoot\r\n    container!: HTMLDivElement;\r\n    constructor(){\r\n        super();\r\n        this.attachShadow({ mode: \"open\" })\r\n        this.container=document.createElement(\"div\");\r\n        this.shadowRoot!.appendChild(this.container);\r\n        this.container.className=\"shadow\"\r\n        this.name=localStorage.getItem(\"name\")\r\n        this.warning=``\r\n    }\r\nfirstVisit(){\r\n    return this.name===null||undefined\r\n}\r\ncontainsBadWords(text:string){\r\n    const badWords=[\"ass\", \"nig\", \"whore\", \"dick\", \"hole\", \"bitch\",\"pussy\",\"69\",\"suck\", \"cock\",\"sex\",\"fuck\",\"fagg\",\"puta\",\"puto\",\"nazi\",\r\n        \"gil\",\"polla\",\"pene\",\"verga\",\"subnor\",\"imbecil\",\"foll\",\"coi\",\"coo\",\"vagin\",\"choch\",\"chucha\",\"hdp\", \"moro\",\"null\",\"undefined\",\r\n        \"raul\",\"Raul\",\"ral\",\"Ral\"]\r\n    const textLower=text.toLowerCase();\r\n    return badWords.some(word => textLower.includes(word));\r\n}\r\n\r\nconnectedCallback(){    \r\n    // the router needs to add empty component, so we insert HTML in connectedCallback() that executes after putting the element in the DOM.\r\n    this.render(); \r\n}\r\ngetNiceRandomColor() {\r\n    const min = 100;\r\n    const max = 200;\r\n    const r = Math.floor(Math.random() * (max - min) + min);\r\n    const g = Math.floor(Math.random() * (max - min) + min);\r\n    const b = Math.floor(Math.random() * (max - min) + min);\r\n    return `rgb(${r}, ${g}, ${b})`;\r\n}\r\n\r\nrender(){\r\n    const initURL='/live-chat'\r\n\r\n    this.container!.innerHTML=`\r\n    <style>\r\n    .homepage-body{\r\n        height:100vh;\r\n        width: 100vw;\r\n        background:linear-gradient(to bottom,rgba(114, 232, 222, 0.87) , rgb(12, 129, 74,0.3));\r\n        display: flex;\r\n        flex-direction: column;\r\n        align-items: center;\r\n    }\r\n    header-comp{\r\n        margin-bottom:100px;\r\n    }\r\n    h1, h2, p{\r\n        margin: 0;\r\n        color: white;\r\n    }\r\n    div.titles{\r\n        display:flex;\r\n        flex-direction:column;\r\n        align-items:center;\r\n        gap:10px;\r\n        padding-bottom:30px;\r\n    }\r\n    \r\n    @media (width>600px){\r\n        div.titles{\r\n            flex-direction:row;\r\n        }\r\n    }\r\n\r\n    h1{\r\n        font-size:40px;\r\n        -webkit-text-stroke: 0.1px rgb(0,0,0,0.5);\r\n    } \r\n\r\n    @media(width>980px){\r\n        h1{\r\n            font-size:60px;\r\n        }\r\n    }\r\n\r\n    div.label-input{\r\n        display:flex;\r\n        justify-content:center;\r\n        margin-bottom:15px;\r\n    }\r\n\r\n    label{\r\n        font-size:20px;\r\n        font-weight:bold;\r\n    \r\n    }\r\n    input{\r\n        width:35vW;\r\n        height:30px;\r\n        padding-left:20px;\r\n        border-radius:50px;\r\n    }\r\n\r\n    button{\r\n        color:rgb(0,0,0,0.7);\r\n        background-color: rgba(43, 180, 198, 0.62);\r\n        border-radius:50px;\r\n        border:solid 2px rgb(255,255,255,0.5);\r\n        margin-left:5px;\r\n        font-weight:bold;\r\n        font-size:16px;\r\n        height:50px;\r\n        width:180px;\r\n        font-family: \"McLaren\";\r\n\r\n    }\r\n\r\n    @media(width<600px){\r\n        .input-button{\r\n            flex-direction:column;\r\n        }\r\n        input{\r\n            width:200px;\r\n        }\r\n    }\r\n    @media(width>980px){\r\n        label{\r\n            font-size:30px;\r\n            margin-bottom:20px;\r\n        }\r\n        input{\r\n            width:400px;\r\n            height:30px;\r\n        }\r\n        button{\r\n            font-size:22px;\r\n            height:55px;\r\n            width:220px;\r\n        }\r\n        \r\n    }\r\n\r\n    h2{\r\n        display:flex;\r\n        gap:10px;\r\n\r\n    }\r\n    span.name{\r\n        background-color:white;\r\n        color: rgb(39, 160, 176);\r\n        padding-right:10px;\r\n        padding-left:10px;\r\n<<<<<<< HEAD\r\n=======\r\n        // font-style: oblique;\r\n>>>>>>> 6f8fab9ee20e9c26d707603155d0e2565f492358\r\n        border-radius:50px;\r\n    }\r\n    form{\r\n        width:100vw;\r\n    }\r\n    .input-button{\r\n        display:flex;\r\n        gap:20px;\r\n        justify-content:center;\r\n        align-items:center;\r\n    }\r\n    div.badwords{\r\n        height:100px;\r\n        width:100vw;\r\n        display:flex;\r\n        justify-content:center;\r\n        padding-top:30px;\r\n    }\r\n\r\n    p.warning{\r\n        color: #EA253D;\r\n        opacity:0.7;\r\n        font-size:20px;\r\n        font-weight:bold;\r\n    }\r\n    \r\n    @media(width>980px){\r\n        p.warning{\r\n            font-size:30px;\r\n        }\r\n    }\r\n\r\n    .to-chatrooms{\r\n        margin-top:20px;\r\n        color-background:;\r\n    }\r\n    \r\n    .change-name{\r\n        margin-top:20px;\r\n    }\r\n\r\n    </style>\r\n\r\n\r\n    <div class=\"homepage-body\">\r\n    <header-comp></header-comp>\r\n        <div class=\"titles\">\r\n            <h1 class=\"main_title-welcome\">Welcome to </h1>\r\n            <h1 class=\"main_title-livechat\"> Raul's LiveChat</h1>\r\n        </div>\r\n    ${this.firstVisit()? \r\n        `<form class=\"form\">\r\n            <div class=\"label-input\">\r\n                <label class=\"enter_name\">Enter your name</label>\r\n            </div> \r\n            <div class=\"input-button\">\r\n                <input class=\"input_name\" type=\"text\" name=\"name\" placeholder=\"Name\">\r\n                <button class=\"form_button\">Start LiveChat</button>\r\n            </div>\r\n        </form>       \r\n        <div class=\"badwords\">`+this.warning+`</div>\r\n        `:\r\n        `<h2 class=\"subtitle\">Welcome back    <span class=\"name\">${this.name}</span>!</h2>    \r\n        <button class=\"to-chatrooms\">Start LiveChat</button>\r\n        <button class=\"change-name\">Change Name</button>\r\n        </div>`\r\n    }`\r\n        //set the form \r\n        const formEl = this.container.querySelector(\".form\")\r\n        if (formEl){\r\n        formEl?.addEventListener(\"submit\",((e)=>{\r\n            e.preventDefault();\r\n            const target = e.target as any\r\n            const nameInput=target.elements.name.value.trim()\r\n    \r\n            if (this.containsBadWords(nameInput)||nameInput===\"\"){\r\n                this.warning=`<p class=\"warning\">Please, use other words as a name.</p>`\r\n                this.render()\r\n            }\r\n            else{\r\n                localStorage.setItem(\"name\", nameInput)\r\n                localStorage.setItem(\"color\", this.getNiceRandomColor())\r\n                this.name=nameInput\r\n                Router.go(initURL+\"/chatrooms\"); \r\n            } \r\n        }))}\r\n    \r\n        //button to chatrooms\r\n        const divToChat=this.container.querySelector(\".to-chatrooms\")\r\n        if(divToChat){\r\n    \r\n            divToChat.addEventListener(\"click\",((e)=>{\r\n                e.preventDefault();\r\n                Router.go(initURL+\"/chatrooms\")\r\n            }))\r\n        }\r\n        \r\n        //button change name\r\n        const buttonDeleteEl=this.container.querySelector(\".change-name\")\r\n        if (buttonDeleteEl){\r\n    \r\n            buttonDeleteEl?.addEventListener(\"click\",((e)=>{\r\n                e.preventDefault();\r\n                const target = e.target as any\r\n                localStorage.removeItem(\"name\")\r\n                this.name=null\r\n                this.render()\r\n            }))\r\n        }\r\n    \r\n}\r\n}\r\ncustomElements.define(\"home-page\", HomePage);\r\n","export * from './router.js';\r\nexport type * from './types.js';\r\nexport {\r\n  processNewChildren,\r\n  amend,\r\n  maybeCall,\r\n  renderElement,\r\n  createRedirect,\r\n  createLocation,\r\n  getMatchedPath,\r\n  getPathnameForRouter,\r\n  copyContextWithoutNext,\r\n} from './utils.js';\r\n","import { compile } from \"path-to-regexp\";\nimport generateUrls from \"./resolver/generateUrls.js\";\nimport Resolver from \"./resolver/resolver.js\";\nimport \"./router-config.js\";\nimport { getNotFoundError, isFunction, isObject, isString, log, notFoundResult } from \"./resolver/utils.js\";\nimport animate from \"./transitions/animate.js\";\nimport { DEFAULT_TRIGGERS, setNavigationTriggers } from \"./triggers/navigation.js\";\nimport {\n  amend,\n  copyContextWithoutNext,\n  createLocation,\n  createRedirect,\n  ensureRoutes,\n  fireRouterEvent,\n  getMatchedPath,\n  getPathnameForRouter,\n  logValue,\n  maybeCall,\n  processNewChildren,\n  renderElement\n} from \"./utils.js\";\nconst MAX_REDIRECT_COUNT = 256;\nfunction prevent() {\n  return { cancel: true };\n}\nconst rootContext = {\n  __renderId: -1,\n  params: {},\n  route: {\n    __synthetic: true,\n    children: [],\n    path: \"\",\n    action() {\n      return void 0;\n    }\n  },\n  pathname: \"\",\n  // eslint-disable-next-line @typescript-eslint/require-await\n  async next() {\n    return notFoundResult;\n  }\n};\nclass Router extends Resolver {\n  /**\n   * Contains read-only information about the current router location:\n   * pathname, active routes, parameters. See the\n   * [Location type declaration](#/classes/RouterLocation)\n   * for more details.\n   */\n  location = createLocation({ resolver: this });\n  /**\n   * A promise that is settled after the current render cycle completes. If\n   * there is no render cycle in progress the promise is immediately settled\n   * with the last render cycle result.\n   */\n  ready = Promise.resolve(this.location);\n  #addedByRouter = /* @__PURE__ */ new WeakSet();\n  #createdByRouter = /* @__PURE__ */ new WeakSet();\n  #navigationEventHandler = this.#onNavigationEvent.bind(this);\n  #lastStartedRenderId = 0;\n  #outlet;\n  __previousContext;\n  #urlForName;\n  #appearingContent = null;\n  #disappearingContent = null;\n  /**\n   * Creates a new Router instance with a given outlet, and\n   * automatically subscribes it to navigation events on the `window`.\n   * Using a constructor argument or a setter for outlet is equivalent:\n   *\n   * ```\n   * const router = new Router();\n   * router.setOutlet(outlet);\n   * ```\n   * @param outlet - a container to render the resolved route\n   * @param options - an optional object with options\n   */\n  constructor(outlet, options) {\n    const baseElement = document.head.querySelector(\"base\");\n    const baseHref = baseElement?.getAttribute(\"href\");\n    super([], {\n      baseUrl: baseHref ? new URL(baseHref, document.URL).href.replace(/[^/]*$/u, \"\") : void 0,\n      ...options,\n      resolveRoute: async (context) => await this.#resolveRoute(context)\n    });\n    setNavigationTriggers(Object.values(DEFAULT_TRIGGERS));\n    this.setOutlet(outlet);\n    this.subscribe();\n  }\n  async #resolveRoute(context) {\n    const { route } = context;\n    if (isFunction(route.children)) {\n      let children = await route.children(copyContextWithoutNext(context));\n      if (!isFunction(route.children)) {\n        ({ children } = route);\n      }\n      processNewChildren(children, route);\n    }\n    const commands = {\n      component: (component) => {\n        const element = document.createElement(component);\n        this.#createdByRouter.add(element);\n        return element;\n      },\n      prevent,\n      redirect: (path) => createRedirect(context, path)\n    };\n    return await Promise.resolve().then(async () => {\n      if (this.#isLatestRender(context)) {\n        return await maybeCall(route.action, route, context, commands);\n      }\n    }).then((result) => {\n      if (result != null && (typeof result === \"object\" || typeof result === \"symbol\")) {\n        if (result instanceof HTMLElement || result === notFoundResult || isObject(result) && \"redirect\" in result) {\n          return result;\n        }\n      }\n      if (isString(route.redirect)) {\n        return commands.redirect(route.redirect);\n      }\n    }).then((result) => {\n      if (result != null) {\n        return result;\n      }\n      if (isString(route.component)) {\n        return commands.component(route.component);\n      }\n    });\n  }\n  /**\n   * Sets the router outlet (the DOM node where the content for the current\n   * route is inserted). Any content pre-existing in the router outlet is\n   * removed at the end of each render pass.\n   *\n   * @remarks\n   * This method is automatically invoked first time when creating a new Router\n   * instance.\n   *\n   * @param outlet - the DOM node where the content for the current route is\n   * inserted.\n   */\n  setOutlet(outlet) {\n    if (outlet) {\n      this.#ensureOutlet(outlet);\n    }\n    this.#outlet = outlet;\n  }\n  /**\n   * Returns the current router outlet. The initial value is `undefined`.\n   *\n   * @returns the current router outlet (or `undefined`)\n   */\n  getOutlet() {\n    return this.#outlet;\n  }\n  /**\n   * Sets the routing config (replacing the existing one) and triggers a\n   * navigation event so that the router outlet is refreshed according to the\n   * current `window.location` and the new routing config.\n   *\n   * Each route object may have the following properties, listed here in the processing order:\n   * * `path`  the route path (relative to the parent route if any) in the\n   * [express.js syntax](https://expressjs.com/en/guide/routing.html#route-paths).\n   *\n   * * `children`  an array of nested routes or a function that provides this\n   * array at the render time. The function can be synchronous or asynchronous:\n   * in the latter case the render is delayed until the returned promise is\n   * resolved. The `children` function is executed every time when this route is\n   * being rendered. This allows for dynamic route structures (e.g. backend-defined),\n   * but it might have a performance impact as well. In order to avoid calling\n   * the function on subsequent renders, you can override the `children` property\n   * of the route object and save the calculated array there\n   * (via `context.route.children = [ route1, route2, ...];`).\n   * Parent routes are fully resolved before resolving the children. Children\n   * 'path' values are relative to the parent ones.\n   *\n   * * `action`  the action that is executed before the route is resolved.\n   * The value for this property should be a function, accepting `context`\n   * and `commands` parameters described below. If present, this function is\n   * always invoked first, disregarding of the other properties' presence.\n   * The action can return a result directly or within a `Promise`, which\n   * resolves to the result. If the action result is an `HTMLElement` instance,\n   * a `commands.component(name)` result, a `commands.redirect(path)` result,\n   * or a `context.next()` result, the current route resolution is finished,\n   * and other route config properties are ignored.\n   * See also **Route Actions** section in [Live Examples](#/classes/Router/demos/demo/index.html).\n   *\n   * * `redirect`  other route's path to redirect to. Passes all route parameters to the redirect target.\n   * The target route should also be defined.\n   * See also **Redirects** section in [Live Examples](#/classes/Router/demos/demo/index.html).\n   *\n   * * `component`  the tag name of the Web Component to resolve the route to.\n   * The property is ignored when either an `action` returns the result or `redirect` property is present.\n   * If route contains the `component` property (or an action that return a component)\n   * and its child route also contains the `component` property, child route's component\n   * will be rendered as a light dom child of a parent component.\n   *\n   * * `name`  the string name of the route to use in the\n   * [`router.urlForName(name, params)`](#/classes/Router#method-urlForName)\n   * navigation helper method.\n   *\n   * For any route function (`action`, `children`) defined, the corresponding `route` object is available inside the\n   * callback through the `this` reference. If you need to access it, make sure you define the callback as a non-arrow\n   * function because arrow functions do not have their own `this` reference.\n   *\n   * `context` object that is passed to `action` function holds the following properties:\n   * * `context.pathname`  string with the pathname being resolved\n   *\n   * * `context.search`  search query string\n   *\n   * * `context.hash`  hash string\n   *\n   * * `context.params`  object with route parameters\n   *\n   * * `context.route`  object that holds the route that is currently being rendered.\n   *\n   * * `context.next()`  function for asynchronously getting the next route\n   * contents from the resolution chain (if any)\n   *\n   * `commands` object that is passed to `action` function has\n   * the following methods:\n   *\n   * * `commands.redirect(path)`  function that creates a redirect data\n   * for the path specified.\n   *\n   * * `commands.component(component)`  function that creates a new HTMLElement\n   * with current context. Note: the component created by this function is reused if visiting the same path twice in\n   * row.\n   *\n   * @param routes - a single route or an array of those\n   * @param skipRender - configure the router but skip rendering the\n   *     route corresponding to the current `window.location` values\n   */\n  // eslint-disable-next-line @typescript-eslint/no-misused-promises\n  async setRoutes(routes, skipRender = false) {\n    this.__previousContext = void 0;\n    this.#urlForName = void 0;\n    ensureRoutes(routes);\n    super.setRoutes(routes);\n    if (!skipRender) {\n      this.#onNavigationEvent();\n    }\n    return await this.ready;\n  }\n  addRoutes(routes) {\n    ensureRoutes(routes);\n    return super.addRoutes(routes);\n  }\n  /**\n   * Asynchronously resolves the given pathname and renders the resolved route\n   * component into the router outlet. If no router outlet is set at the time of\n   * calling this method, or at the time when the route resolution is completed,\n   * a `TypeError` is thrown.\n   *\n   * Returns a promise that is fulfilled with the router outlet DOM Element | DocumentFragment after\n   * the route component is created and inserted into the router outlet, or\n   * rejected if no route matches the given path.\n   *\n   * If another render pass is started before the previous one is completed, the\n   * result of the previous render pass is ignored.\n   *\n   * @param pathnameOrContext - the pathname to render or a context object with\n   * a `pathname` property, optional `search` and `hash` properties, and other\n   * properties to pass to the resolver.\n   * @param shouldUpdateHistory - update browser history with the rendered\n   * location\n   */\n  async render(pathnameOrContext, shouldUpdateHistory = false) {\n    this.#lastStartedRenderId += 1;\n    const renderId = this.#lastStartedRenderId;\n    const context = {\n      ...rootContext,\n      ...isString(pathnameOrContext) ? { hash: \"\", search: \"\", pathname: pathnameOrContext } : pathnameOrContext,\n      __renderId: renderId\n    };\n    this.ready = this.#doRender(context, shouldUpdateHistory);\n    return await this.ready;\n  }\n  async #doRender(context, shouldUpdateHistory) {\n    const { __renderId: renderId } = context;\n    try {\n      const ctx = await this.resolve(context);\n      const contextWithChain = await this.#fullyResolveChain(ctx);\n      if (!this.#isLatestRender(contextWithChain)) {\n        return this.location;\n      }\n      const previousContext = this.__previousContext;\n      if (contextWithChain === previousContext) {\n        this.#updateBrowserHistory(previousContext, true);\n        return this.location;\n      }\n      this.location = createLocation(contextWithChain);\n      if (shouldUpdateHistory) {\n        this.#updateBrowserHistory(contextWithChain, renderId === 1);\n      }\n      fireRouterEvent(\"location-changed\", {\n        router: this,\n        location: this.location\n      });\n      if (contextWithChain.__skipAttach) {\n        this.#copyUnchangedElements(contextWithChain, previousContext);\n        this.__previousContext = contextWithChain;\n        return this.location;\n      }\n      this.#addAppearingContent(contextWithChain, previousContext);\n      const animationDone = this.#animateIfNeeded(contextWithChain);\n      this.#runOnAfterEnterCallbacks(contextWithChain);\n      this.#runOnAfterLeaveCallbacks(contextWithChain, previousContext);\n      await animationDone;\n      if (this.#isLatestRender(contextWithChain)) {\n        this.#removeDisappearingContent();\n        this.__previousContext = contextWithChain;\n        return this.location;\n      }\n    } catch (error) {\n      if (renderId === this.#lastStartedRenderId) {\n        if (shouldUpdateHistory) {\n          this.#updateBrowserHistory(this.context);\n        }\n        for (const child of this.#outlet?.children ?? []) {\n          child.remove();\n        }\n        this.location = createLocation(Object.assign(context, { resolver: this }));\n        fireRouterEvent(\"error\", {\n          router: this,\n          error,\n          ...context\n        });\n        throw error;\n      }\n    }\n    return this.location;\n  }\n  // `topOfTheChainContextBeforeRedirects` is a context coming from Resolver.resolve().\n  // It would contain a 'redirect' route or the first 'component' route that\n  // matched the pathname. There might be more child 'component' routes to be\n  // resolved and added into the chain. This method would find and add them.\n  // `contextBeforeRedirects` is the context containing such a child component\n  // route. It's only necessary when this method is called recursively (otherwise\n  // it's the same as the 'top of the chain' context).\n  //\n  // Apart from building the chain of child components, this method would also\n  // handle 'redirect' routes, call 'onBefore' callbacks and handle 'prevent'\n  // and 'redirect' callback results.\n  async #fullyResolveChain(topOfTheChainContextBeforeRedirects, contextBeforeRedirects = topOfTheChainContextBeforeRedirects) {\n    const contextAfterRedirects = await this.#findComponentContextAfterAllRedirects(contextBeforeRedirects);\n    const redirectsHappened = contextAfterRedirects !== contextBeforeRedirects;\n    const topOfTheChainContextAfterRedirects = redirectsHappened ? contextAfterRedirects : topOfTheChainContextBeforeRedirects;\n    const matchedPath = getPathnameForRouter(getMatchedPath(contextAfterRedirects.chain ?? []), this);\n    const isFound = matchedPath === contextAfterRedirects.pathname;\n    const findNextContextIfAny = async (context, parent = context.route, prevResult) => {\n      const nextContext2 = await context.next(false, parent, prevResult);\n      if (nextContext2 === null || nextContext2 === notFoundResult) {\n        if (isFound) {\n          return context;\n        } else if (parent.parent != null) {\n          return await findNextContextIfAny(context, parent.parent, nextContext2);\n        }\n        return nextContext2;\n      }\n      return nextContext2;\n    };\n    const nextContext = await findNextContextIfAny(contextAfterRedirects);\n    if (nextContext == null || nextContext === notFoundResult) {\n      throw getNotFoundError(\n        topOfTheChainContextAfterRedirects\n      );\n    }\n    return nextContext !== contextAfterRedirects ? await this.#fullyResolveChain(topOfTheChainContextAfterRedirects, nextContext) : await this.#amendWithOnBeforeCallbacks(contextAfterRedirects);\n  }\n  async #findComponentContextAfterAllRedirects(context) {\n    const { result } = context;\n    if (result instanceof HTMLElement) {\n      renderElement(context, result);\n      return context;\n    } else if (result && \"redirect\" in result) {\n      const ctx = await this.#redirect(result.redirect, context.__redirectCount, context.__renderId);\n      return await this.#findComponentContextAfterAllRedirects(ctx);\n    }\n    throw result instanceof Error ? result : new Error(\n      log(\n        `Invalid route resolution result for path \"${context.pathname}\". Expected redirect object or HTML element, but got: \"${logValue(result)}\". Double check the action return value for the route.`\n      )\n    );\n  }\n  async #amendWithOnBeforeCallbacks(contextWithFullChain) {\n    return await this.#runOnBeforeCallbacks(contextWithFullChain).then(async (amendedContext) => {\n      if (amendedContext === this.__previousContext || amendedContext === contextWithFullChain) {\n        return amendedContext;\n      }\n      return await this.#fullyResolveChain(amendedContext);\n    });\n  }\n  async #runOnBeforeCallbacks(newContext) {\n    const previousContext = this.__previousContext ?? {};\n    const previousChain = previousContext.chain ?? [];\n    const newChain = newContext.chain ?? [];\n    let callbacks = Promise.resolve(void 0);\n    const redirect = (pathname) => createRedirect(newContext, pathname);\n    newContext.__divergedChainIndex = 0;\n    newContext.__skipAttach = false;\n    if (previousChain.length) {\n      for (let i = 0; i < Math.min(previousChain.length, newChain.length); newContext.__divergedChainIndex++, i++) {\n        if (previousChain[i].route !== newChain[i].route || previousChain[i].path !== newChain[i].path && previousChain[i].element !== newChain[i].element || !this.#isReusableElement(\n          previousChain[i].element,\n          newChain[i].element\n        )) {\n          break;\n        }\n      }\n      newContext.__skipAttach = // Same route chain\n      newChain.length === previousChain.length && newContext.__divergedChainIndex === newChain.length && // Same element\n      this.#isReusableElement(newContext.result, previousContext.result);\n      if (newContext.__skipAttach) {\n        for (let i = newChain.length - 1; i >= 0; i--) {\n          callbacks = this.#runOnBeforeLeaveCallbacks(callbacks, newContext, { prevent }, previousChain[i]);\n        }\n        for (let i = 0; i < newChain.length; i++) {\n          callbacks = this.#runOnBeforeEnterCallbacks(\n            callbacks,\n            newContext,\n            {\n              prevent,\n              redirect\n            },\n            newChain[i]\n          );\n          previousChain[i].element.location = createLocation(newContext, previousChain[i].route);\n        }\n      } else {\n        for (let i = previousChain.length - 1; i >= newContext.__divergedChainIndex; i--) {\n          callbacks = this.#runOnBeforeLeaveCallbacks(callbacks, newContext, { prevent }, previousChain[i]);\n        }\n      }\n    }\n    if (!newContext.__skipAttach) {\n      for (let i = 0; i < newChain.length; i++) {\n        if (i < newContext.__divergedChainIndex) {\n          if (i < previousChain.length && previousChain[i].element) {\n            previousChain[i].element.location = createLocation(newContext, previousChain[i].route);\n          }\n        } else {\n          callbacks = this.#runOnBeforeEnterCallbacks(\n            callbacks,\n            newContext,\n            {\n              prevent,\n              redirect\n            },\n            newChain[i]\n          );\n          if (newChain[i].element) {\n            newChain[i].element.location = createLocation(newContext, newChain[i].route);\n          }\n        }\n      }\n    }\n    return await callbacks.then(async (amendmentResult) => {\n      if (amendmentResult && isObject(amendmentResult)) {\n        if (\"cancel\" in amendmentResult && this.__previousContext) {\n          this.__previousContext.__renderId = newContext.__renderId;\n          return this.__previousContext;\n        }\n        if (\"redirect\" in amendmentResult) {\n          return await this.#redirect(amendmentResult.redirect, newContext.__redirectCount, newContext.__renderId);\n        }\n      }\n      return newContext;\n    });\n  }\n  async #runOnBeforeLeaveCallbacks(callbacks, newContext, commands, chainElement) {\n    const location = createLocation(newContext);\n    let result = await callbacks;\n    if (this.#isLatestRender(newContext)) {\n      const beforeLeaveFunction = amend(\"onBeforeLeave\", chainElement.element, location, commands, this);\n      result = beforeLeaveFunction(result);\n    }\n    if (!(isObject(result) && \"redirect\" in result)) {\n      return result;\n    }\n  }\n  async #runOnBeforeEnterCallbacks(callbacks, newContext, commands, chainElement) {\n    const location = createLocation(newContext, chainElement.route);\n    const result = await callbacks;\n    if (this.#isLatestRender(newContext)) {\n      const beforeEnterFunction = amend(\"onBeforeEnter\", chainElement.element, location, commands, this);\n      return beforeEnterFunction(result);\n    }\n  }\n  #isReusableElement(element, otherElement) {\n    if (element instanceof Element && otherElement instanceof Element) {\n      return this.#createdByRouter.has(element) && this.#createdByRouter.has(otherElement) ? element.localName === otherElement.localName : element === otherElement;\n    }\n    return false;\n  }\n  #isLatestRender(context) {\n    return context.__renderId === this.#lastStartedRenderId;\n  }\n  async #redirect(redirectData, counter = 0, renderId = 0) {\n    if (counter > MAX_REDIRECT_COUNT) {\n      throw new Error(log(`Too many redirects when rendering ${redirectData.from}`));\n    }\n    return await this.resolve({\n      ...rootContext,\n      pathname: this.urlForPath(redirectData.pathname, redirectData.params),\n      redirectFrom: redirectData.from,\n      __redirectCount: counter + 1,\n      __renderId: renderId\n    });\n  }\n  #ensureOutlet(outlet = this.#outlet) {\n    if (!(outlet instanceof Element || outlet instanceof DocumentFragment)) {\n      throw new TypeError(\n        log(`Expected router outlet to be a valid DOM Element | DocumentFragment (but got ${outlet})`)\n      );\n    }\n  }\n  // eslint-disable-next-line @typescript-eslint/class-methods-use-this\n  #updateBrowserHistory({ pathname, search = \"\", hash = \"\" }, replace) {\n    if (window.location.pathname !== pathname || window.location.search !== search || window.location.hash !== hash) {\n      const changeState = replace ? \"replaceState\" : \"pushState\";\n      window.history[changeState](null, document.title, pathname + search + hash);\n      window.dispatchEvent(new PopStateEvent(\"popstate\", { state: \"vaadin-router-ignore\" }));\n    }\n  }\n  #copyUnchangedElements(context, previousContext) {\n    let deepestCommonParent = this.#outlet;\n    for (let i = 0; i < (context.__divergedChainIndex ?? 0); i++) {\n      const unchangedElement = previousContext?.chain?.[i].element;\n      if (unchangedElement) {\n        if (unchangedElement.parentNode === deepestCommonParent) {\n          context.chain[i].element = unchangedElement;\n          deepestCommonParent = unchangedElement;\n        } else {\n          break;\n        }\n      }\n    }\n    return deepestCommonParent;\n  }\n  #addAppearingContent(context, previousContext) {\n    this.#ensureOutlet();\n    this.#removeAppearingContent();\n    const deepestCommonParent = this.#copyUnchangedElements(context, previousContext);\n    this.#appearingContent = [];\n    this.#disappearingContent = Array.from(deepestCommonParent?.children ?? []).filter(\n      // Only remove layout content that was added by router\n      (e) => this.#addedByRouter.has(e) && // Do not remove the result element to avoid flickering\n      e !== context.result\n    );\n    let parentElement = deepestCommonParent;\n    for (let i = context.__divergedChainIndex ?? 0; i < (context.chain?.length ?? 0); i++) {\n      const elementToAdd = context.chain[i].element;\n      if (elementToAdd) {\n        parentElement?.appendChild(elementToAdd);\n        this.#addedByRouter.add(elementToAdd);\n        if (parentElement === deepestCommonParent) {\n          this.#appearingContent.push(elementToAdd);\n        }\n        parentElement = elementToAdd;\n      }\n    }\n  }\n  #removeDisappearingContent() {\n    if (this.#disappearingContent) {\n      for (const element of this.#disappearingContent) {\n        element.remove();\n      }\n    }\n    this.#disappearingContent = null;\n    this.#appearingContent = null;\n  }\n  #removeAppearingContent() {\n    if (this.#disappearingContent && this.#appearingContent) {\n      for (const element of this.#appearingContent) {\n        element.remove();\n      }\n      this.#disappearingContent = null;\n      this.#appearingContent = null;\n    }\n  }\n  #runOnAfterLeaveCallbacks(currentContext, targetContext) {\n    if (!targetContext?.chain || currentContext.__divergedChainIndex == null) {\n      return;\n    }\n    for (let i = targetContext.chain.length - 1; i >= currentContext.__divergedChainIndex; i--) {\n      if (!this.#isLatestRender(currentContext)) {\n        break;\n      }\n      const currentComponent = targetContext.chain[i].element;\n      if (!currentComponent) {\n        continue;\n      }\n      try {\n        const location = createLocation(currentContext);\n        maybeCall(currentComponent.onAfterLeave, currentComponent, location, {}, this);\n      } finally {\n        if (this.#disappearingContent?.includes(currentComponent)) {\n          for (const child of currentComponent.children) {\n            child.remove();\n          }\n        }\n      }\n    }\n  }\n  #runOnAfterEnterCallbacks(currentContext) {\n    if (!currentContext.chain || currentContext.__divergedChainIndex == null) {\n      return;\n    }\n    for (let i = currentContext.__divergedChainIndex; i < currentContext.chain.length; i++) {\n      if (!this.#isLatestRender(currentContext)) {\n        break;\n      }\n      const currentComponent = currentContext.chain[i].element;\n      if (currentComponent) {\n        const location = createLocation(currentContext, currentContext.chain[i].route);\n        maybeCall(currentComponent.onAfterEnter, currentComponent, location, {}, this);\n      }\n    }\n  }\n  async #animateIfNeeded(context) {\n    const from = this.#disappearingContent?.[0];\n    const to = this.#appearingContent?.[0];\n    const promises = [];\n    const { chain = [] } = context;\n    let config;\n    for (let i = chain.length - 1; i >= 0; i--) {\n      if (chain[i].route.animate) {\n        config = chain[i].route.animate;\n        break;\n      }\n    }\n    if (from && to && config) {\n      const leave = isObject(config) && config.leave ? config.leave : \"leaving\";\n      const enter = isObject(config) && config.enter ? config.enter : \"entering\";\n      promises.push(animate(from, leave));\n      promises.push(animate(to, enter));\n    }\n    await Promise.all(promises);\n    return context;\n  }\n  /**\n   * Subscribes this instance to navigation events on the `window`.\n   *\n   * NOTE: beware of resource leaks. For as long as a router instance is\n   * subscribed to navigation events, it won't be garbage collected.\n   */\n  subscribe() {\n    window.addEventListener(\"vaadin-router-go\", this.#navigationEventHandler);\n  }\n  /**\n   * Removes the subscription to navigation events created in the `subscribe()`\n   * method.\n   */\n  unsubscribe() {\n    window.removeEventListener(\"vaadin-router-go\", this.#navigationEventHandler);\n  }\n  #onNavigationEvent(event) {\n    const { pathname, search, hash } = event instanceof CustomEvent ? event.detail : window.location;\n    if (isString(this.__normalizePathname(pathname))) {\n      if (event?.preventDefault) {\n        event.preventDefault();\n      }\n      void this.render({ pathname, search, hash }, true);\n    }\n  }\n  /**\n   * Configures what triggers Router navigation events:\n   *  - `POPSTATE`: popstate events on the current `window`\n   *  - `CLICK`: click events on `<a>` links leading to the current page\n   *\n   * This method is invoked with the pre-configured values when creating a new Router instance.\n   * By default, both `POPSTATE` and `CLICK` are enabled. This setup is expected to cover most of the use cases.\n   *\n   * See the `router-config.js` for the default navigation triggers config. Based on it, you can\n   * create the own one and only import the triggers you need, instead of pulling in all the code,\n   * e.g. if you want to handle `click` differently.\n   *\n   * See also **Navigation Triggers** section in [Live Examples](#/classes/Router/demos/demo/index.html).\n   *\n   * @param triggers - navigation triggers\n   */\n  static setTriggers(...triggers) {\n    setNavigationTriggers(triggers);\n  }\n  /**\n   * Generates a URL for the route with the given name, optionally performing\n   * substitution of parameters.\n   *\n   * The route is searched in all the Router instances subscribed to\n   * navigation events.\n   *\n   * **Note:** For child route names, only array children are considered.\n   * It is not possible to generate URLs using a name for routes set with\n   * a children function.\n   *\n   * @param name - The route name or the routes `component` name.\n   * @param params - Optional object with route path parameters.\n   * Named parameters are passed by name (`params[name] = value`), unnamed\n   * parameters are passed by index (`params[index] = value`).\n   */\n  urlForName(name, params) {\n    if (!this.#urlForName) {\n      this.#urlForName = generateUrls(this, {\n        cacheKeyProvider(route) {\n          return \"component\" in route && typeof route.component === \"string\" ? route.component : void 0;\n        }\n      });\n    }\n    return getPathnameForRouter(this.#urlForName(name, params ?? void 0), this);\n  }\n  /**\n   * Generates a URL for the given route path, optionally performing\n   * substitution of parameters.\n   *\n   * @param path - String route path declared in [express.js\n   * syntax](https://expressjs.com/en/guide/routing.html#route-paths).\n   * @param params - Optional object with route path parameters.\n   * Named parameters are passed by name (`params[name] = value`), unnamed\n   * parameters are passed by index (`params[index] = value`).\n   */\n  urlForPath(path, params) {\n    return getPathnameForRouter(\n      compile(path)(params ?? void 0),\n      this\n    );\n  }\n  /**\n   * Triggers navigation to a new path. Returns a boolean without waiting until\n   * the navigation is complete. Returns `true` if at least one `Router`\n   * has handled the navigation (was subscribed and had `baseUrl` matching\n   * the `path` argument), otherwise returns `false`.\n   *\n   * @param path - A new in-app path string, or an URL-like object with\n   * `pathname` string property, and optional `search` and `hash` string\n   * properties.\n   */\n  static go(path) {\n    const { pathname, search, hash } = isString(path) ? new URL(path, \"http://a\") : path;\n    return fireRouterEvent(\"go\", { pathname, search, hash });\n  }\n}\nexport {\n  Router\n};\n//# sourceMappingURL=router.js.map\n","/* eslint-disable @typescript-eslint/consistent-return */\r\nimport { compile } from 'path-to-regexp';\r\nimport type { EmptyObject, Writable } from 'type-fest';\r\nimport generateUrls from './resolver/generateUrls.js';\r\nimport Resolver from './resolver/resolver.js';\r\nimport './router-config.js';\r\nimport { getNotFoundError, isFunction, isObject, isString, log, notFoundResult } from './resolver/utils.js';\r\nimport animate from './transitions/animate.js';\r\nimport { DEFAULT_TRIGGERS, setNavigationTriggers } from './triggers/navigation.js';\r\nimport type {\r\n  ActionResult,\r\n  AnyObject,\r\n  Commands,\r\n  ChainItem,\r\n  ContextExtension,\r\n  EmptyCommands,\r\n  NavigationTrigger,\r\n  Params,\r\n  PreventAndRedirectCommands,\r\n  PreventCommands,\r\n  PreventResult,\r\n  RedirectContextInfo,\r\n  RedirectResult,\r\n  ResolveContext,\r\n  Route,\r\n  RouteContext,\r\n  RouteExtension,\r\n  RouterLocation,\r\n  WebComponentInterface,\r\n  RouterOptions,\r\n  ActionValue,\r\n  NextResult,\r\n} from './types.js';\r\nimport {\r\n  amend,\r\n  copyContextWithoutNext,\r\n  createLocation,\r\n  createRedirect,\r\n  ensureRoutes,\r\n  fireRouterEvent,\r\n  getMatchedPath,\r\n  getPathnameForRouter,\r\n  logValue,\r\n  maybeCall,\r\n  processNewChildren,\r\n  renderElement,\r\n} from './utils.js';\r\n\r\nconst MAX_REDIRECT_COUNT = 256;\r\n\r\nfunction prevent(): PreventResult {\r\n  return { cancel: true };\r\n}\r\n\r\nconst rootContext: RouteContext = {\r\n  __renderId: -1,\r\n  params: {},\r\n  route: {\r\n    __synthetic: true,\r\n    children: [],\r\n    path: '',\r\n    action() {\r\n      return undefined;\r\n    },\r\n  },\r\n  pathname: '',\r\n  // eslint-disable-next-line @typescript-eslint/require-await\r\n  async next() {\r\n    return notFoundResult;\r\n  },\r\n};\r\n\r\n/**\r\n * A simple client-side router for single-page applications. It uses\r\n * express-style middleware and has a first-class support for Web Components and\r\n * lazy-loading. Works great in Polymer and non-Polymer apps.\r\n *\r\n * Use `new Router(outlet, options)` to create a new Router instance.\r\n *\r\n * * The `outlet` parameter is a reference to the DOM node to render\r\n *   the content into.\r\n *\r\n * * The `options` parameter is an optional object with options. The following\r\n *   keys are supported:\r\n *   * `baseUrl`  the initial value for [\r\n *     the `baseUrl` property\r\n *   ](#/classes/Router#property-baseUrl)\r\n *\r\n * The Router instance is automatically subscribed to navigation events\r\n * on `window`.\r\n *\r\n * See [Live Examples](#/classes/Router/demos/demo/index.html) for the detailed usage demo and code snippets.\r\n *\r\n * See also detailed API docs for the following methods, for the advanced usage:\r\n *\r\n * * [setOutlet](#/classes/Router#method-setOutlet)  should be used to configure the outlet.\r\n * * [setTriggers](#/classes/Router#method-setTriggers)  should be used to configure the navigation events.\r\n * * [setRoutes](#/classes/Router#method-setRoutes)  should be used to configure the routes.\r\n *\r\n * Only `setRoutes` has to be called manually, others are automatically invoked when creating a new instance.\r\n */\r\nexport class Router<R extends AnyObject = EmptyObject, C extends AnyObject = EmptyObject> extends Resolver<\r\n  ActionValue,\r\n  RouteExtension<R, C>,\r\n  ContextExtension<R, C>\r\n> {\r\n  /**\r\n   * Contains read-only information about the current router location:\r\n   * pathname, active routes, parameters. See the\r\n   * [Location type declaration](#/classes/RouterLocation)\r\n   * for more details.\r\n   */\r\n  location = createLocation({ resolver: this });\r\n\r\n  /**\r\n   * A promise that is settled after the current render cycle completes. If\r\n   * there is no render cycle in progress the promise is immediately settled\r\n   * with the last render cycle result.\r\n   */\r\n  ready: Promise<RouterLocation<R, C>> = Promise.resolve(this.location);\r\n\r\n  readonly #addedByRouter = new WeakSet<Element>();\r\n  readonly #createdByRouter = new WeakSet<Element>();\r\n  readonly #navigationEventHandler = this.#onNavigationEvent.bind(this);\r\n\r\n  #lastStartedRenderId = 0;\r\n  #outlet: Element | DocumentFragment | null | undefined;\r\n  private __previousContext?: RouteContext<R, C>;\r\n\r\n  #urlForName?: ReturnType<typeof generateUrls>;\r\n\r\n  #appearingContent: Element[] | null = null;\r\n  #disappearingContent: Element[] | null = null;\r\n\r\n  /**\r\n   * Creates a new Router instance with a given outlet, and\r\n   * automatically subscribes it to navigation events on the `window`.\r\n   * Using a constructor argument or a setter for outlet is equivalent:\r\n   *\r\n   * ```\r\n   * const router = new Router();\r\n   * router.setOutlet(outlet);\r\n   * ```\r\n   * @param outlet - a container to render the resolved route\r\n   * @param options - an optional object with options\r\n   */\r\n  constructor(outlet?: Element | DocumentFragment | null, options?: RouterOptions<R, C>) {\r\n    const baseElement = document.head.querySelector('base');\r\n    const baseHref = baseElement?.getAttribute('href');\r\n    super([], {\r\n      baseUrl: baseHref ? new URL(baseHref, document.URL).href.replace(/[^/]*$/u, '') : undefined,\r\n      ...options,\r\n      resolveRoute: async (context) => await this.#resolveRoute(context),\r\n    });\r\n\r\n    setNavigationTriggers(Object.values(DEFAULT_TRIGGERS));\r\n\r\n    this.setOutlet(outlet);\r\n    this.subscribe();\r\n  }\r\n\r\n  async #resolveRoute(context: RouteContext<R, C>): Promise<ActionResult | RouteContext<R, C>> {\r\n    const { route } = context;\r\n\r\n    if (isFunction(route.children)) {\r\n      let children = await route.children(copyContextWithoutNext(context));\r\n\r\n      // The route.children() callback might have re-written the\r\n      // route.children property instead of returning a value\r\n      if (!isFunction(route.children)) {\r\n        // eslint-disable-next-line no-param-reassign\r\n        ({ children } = route);\r\n      }\r\n      processNewChildren(children, route);\r\n    }\r\n\r\n    const commands: Commands = {\r\n      component: (component: string) => {\r\n        const element = document.createElement(component);\r\n        this.#createdByRouter.add(element);\r\n        return element;\r\n      },\r\n      prevent,\r\n      redirect: (path) => createRedirect(context, path),\r\n    };\r\n\r\n    return await Promise.resolve()\r\n      .then(async () => {\r\n        if (this.#isLatestRender(context)) {\r\n          // eslint-disable-next-line @typescript-eslint/unbound-method\r\n          return await maybeCall(route.action, route, context, commands);\r\n        }\r\n      })\r\n      .then((result) => {\r\n        if (result != null && (typeof result === 'object' || typeof result === 'symbol')) {\r\n          // Actions like `() => import('my-view.js')` are not expected to\r\n          // end the resolution, despite the result is not empty. Checking\r\n          // the result with a whitelist of values that end the resolution.\r\n          if (\r\n            result instanceof HTMLElement ||\r\n            result === notFoundResult ||\r\n            (isObject(result) && 'redirect' in result)\r\n          ) {\r\n            return result;\r\n          }\r\n        }\r\n\r\n        if (isString(route.redirect)) {\r\n          return commands.redirect(route.redirect);\r\n        }\r\n      })\r\n      .then((result) => {\r\n        if (result != null) {\r\n          return result;\r\n        }\r\n        if (isString(route.component)) {\r\n          return commands.component(route.component);\r\n        }\r\n      });\r\n  }\r\n\r\n  /**\r\n   * Sets the router outlet (the DOM node where the content for the current\r\n   * route is inserted). Any content pre-existing in the router outlet is\r\n   * removed at the end of each render pass.\r\n   *\r\n   * @remarks\r\n   * This method is automatically invoked first time when creating a new Router\r\n   * instance.\r\n   *\r\n   * @param outlet - the DOM node where the content for the current route is\r\n   * inserted.\r\n   */\r\n  setOutlet(outlet?: Element | DocumentFragment | null): void {\r\n    if (outlet) {\r\n      this.#ensureOutlet(outlet);\r\n    }\r\n    this.#outlet = outlet;\r\n  }\r\n\r\n  /**\r\n   * Returns the current router outlet. The initial value is `undefined`.\r\n   *\r\n   * @returns the current router outlet (or `undefined`)\r\n   */\r\n  getOutlet(): Element | DocumentFragment | null | undefined {\r\n    return this.#outlet;\r\n  }\r\n\r\n  /**\r\n   * Sets the routing config (replacing the existing one) and triggers a\r\n   * navigation event so that the router outlet is refreshed according to the\r\n   * current `window.location` and the new routing config.\r\n   *\r\n   * Each route object may have the following properties, listed here in the processing order:\r\n   * * `path`  the route path (relative to the parent route if any) in the\r\n   * [express.js syntax](https://expressjs.com/en/guide/routing.html#route-paths).\r\n   *\r\n   * * `children`  an array of nested routes or a function that provides this\r\n   * array at the render time. The function can be synchronous or asynchronous:\r\n   * in the latter case the render is delayed until the returned promise is\r\n   * resolved. The `children` function is executed every time when this route is\r\n   * being rendered. This allows for dynamic route structures (e.g. backend-defined),\r\n   * but it might have a performance impact as well. In order to avoid calling\r\n   * the function on subsequent renders, you can override the `children` property\r\n   * of the route object and save the calculated array there\r\n   * (via `context.route.children = [ route1, route2, ...];`).\r\n   * Parent routes are fully resolved before resolving the children. Children\r\n   * 'path' values are relative to the parent ones.\r\n   *\r\n   * * `action`  the action that is executed before the route is resolved.\r\n   * The value for this property should be a function, accepting `context`\r\n   * and `commands` parameters described below. If present, this function is\r\n   * always invoked first, disregarding of the other properties' presence.\r\n   * The action can return a result directly or within a `Promise`, which\r\n   * resolves to the result. If the action result is an `HTMLElement` instance,\r\n   * a `commands.component(name)` result, a `commands.redirect(path)` result,\r\n   * or a `context.next()` result, the current route resolution is finished,\r\n   * and other route config properties are ignored.\r\n   * See also **Route Actions** section in [Live Examples](#/classes/Router/demos/demo/index.html).\r\n   *\r\n   * * `redirect`  other route's path to redirect to. Passes all route parameters to the redirect target.\r\n   * The target route should also be defined.\r\n   * See also **Redirects** section in [Live Examples](#/classes/Router/demos/demo/index.html).\r\n   *\r\n   * * `component`  the tag name of the Web Component to resolve the route to.\r\n   * The property is ignored when either an `action` returns the result or `redirect` property is present.\r\n   * If route contains the `component` property (or an action that return a component)\r\n   * and its child route also contains the `component` property, child route's component\r\n   * will be rendered as a light dom child of a parent component.\r\n   *\r\n   * * `name`  the string name of the route to use in the\r\n   * [`router.urlForName(name, params)`](#/classes/Router#method-urlForName)\r\n   * navigation helper method.\r\n   *\r\n   * For any route function (`action`, `children`) defined, the corresponding `route` object is available inside the\r\n   * callback through the `this` reference. If you need to access it, make sure you define the callback as a non-arrow\r\n   * function because arrow functions do not have their own `this` reference.\r\n   *\r\n   * `context` object that is passed to `action` function holds the following properties:\r\n   * * `context.pathname`  string with the pathname being resolved\r\n   *\r\n   * * `context.search`  search query string\r\n   *\r\n   * * `context.hash`  hash string\r\n   *\r\n   * * `context.params`  object with route parameters\r\n   *\r\n   * * `context.route`  object that holds the route that is currently being rendered.\r\n   *\r\n   * * `context.next()`  function for asynchronously getting the next route\r\n   * contents from the resolution chain (if any)\r\n   *\r\n   * `commands` object that is passed to `action` function has\r\n   * the following methods:\r\n   *\r\n   * * `commands.redirect(path)`  function that creates a redirect data\r\n   * for the path specified.\r\n   *\r\n   * * `commands.component(component)`  function that creates a new HTMLElement\r\n   * with current context. Note: the component created by this function is reused if visiting the same path twice in\r\n   * row.\r\n   *\r\n   * @param routes - a single route or an array of those\r\n   * @param skipRender - configure the router but skip rendering the\r\n   *     route corresponding to the current `window.location` values\r\n   */\r\n  // eslint-disable-next-line @typescript-eslint/no-misused-promises\r\n  override async setRoutes(\r\n    routes: Route<R, C> | ReadonlyArray<Route<R, C>>,\r\n    skipRender = false,\r\n  ): Promise<RouterLocation<R, C>> {\r\n    this.__previousContext = undefined;\r\n    this.#urlForName = undefined;\r\n    ensureRoutes(routes);\r\n    super.setRoutes(routes);\r\n    if (!skipRender) {\r\n      this.#onNavigationEvent();\r\n    }\r\n    return await this.ready;\r\n  }\r\n\r\n  protected override addRoutes(routes: Route<R, C> | ReadonlyArray<Route<R, C>>): ReadonlyArray<Route<R, C>> {\r\n    ensureRoutes(routes);\r\n    return super.addRoutes(routes);\r\n  }\r\n\r\n  /**\r\n   * Asynchronously resolves the given pathname and renders the resolved route\r\n   * component into the router outlet. If no router outlet is set at the time of\r\n   * calling this method, or at the time when the route resolution is completed,\r\n   * a `TypeError` is thrown.\r\n   *\r\n   * Returns a promise that is fulfilled with the router outlet DOM Element | DocumentFragment after\r\n   * the route component is created and inserted into the router outlet, or\r\n   * rejected if no route matches the given path.\r\n   *\r\n   * If another render pass is started before the previous one is completed, the\r\n   * result of the previous render pass is ignored.\r\n   *\r\n   * @param pathnameOrContext - the pathname to render or a context object with\r\n   * a `pathname` property, optional `search` and `hash` properties, and other\r\n   * properties to pass to the resolver.\r\n   * @param shouldUpdateHistory - update browser history with the rendered\r\n   * location\r\n   */\r\n  async render(\r\n    pathnameOrContext: string | ResolveContext,\r\n    shouldUpdateHistory: boolean = false,\r\n  ): Promise<RouterLocation<R, C>> {\r\n    this.#lastStartedRenderId += 1;\r\n    const renderId = this.#lastStartedRenderId;\r\n    const context = {\r\n      ...(rootContext as RouteContext<R, C>),\r\n      ...(isString(pathnameOrContext) ? { hash: '', search: '', pathname: pathnameOrContext } : pathnameOrContext),\r\n      __renderId: renderId,\r\n    } satisfies RouteContext<R, C>;\r\n\r\n    this.ready = this.#doRender(context, shouldUpdateHistory);\r\n    return await this.ready;\r\n  }\r\n\r\n  async #doRender(context: RouteContext<R, C>, shouldUpdateHistory: boolean) {\r\n    const { __renderId: renderId } = context;\r\n    try {\r\n      // Find the first route that resolves to a non-empty result\r\n      const ctx = await this.resolve(context);\r\n\r\n      // Process the result of this.resolve() and handle all special commands:\r\n      // (redirect / prevent / component). If the result is a 'component',\r\n      // then go deeper and build the entire chain of nested components matching\r\n      // the pathname. Also call all 'on before' callbacks along the way.\r\n      const contextWithChain = await this.#fullyResolveChain(ctx);\r\n\r\n      if (!this.#isLatestRender(contextWithChain)) {\r\n        return this.location;\r\n      }\r\n\r\n      const previousContext = this.__previousContext;\r\n\r\n      // Check if the render was prevented and make an early return in that case\r\n      if (contextWithChain === previousContext) {\r\n        // Replace the history with the previous context\r\n        // to make sure the URL stays the same.\r\n        this.#updateBrowserHistory(previousContext, true);\r\n        return this.location;\r\n      }\r\n\r\n      this.location = createLocation(contextWithChain);\r\n\r\n      if (shouldUpdateHistory) {\r\n        // Replace only if first render redirects, so that we dont leave\r\n        // the redirecting record in the history\r\n        this.#updateBrowserHistory(contextWithChain, renderId === 1);\r\n      }\r\n\r\n      fireRouterEvent('location-changed', {\r\n        router: this,\r\n        location: this.location,\r\n      });\r\n\r\n      // Skip detaching/re-attaching there are no render changes\r\n      if (contextWithChain.__skipAttach) {\r\n        this.#copyUnchangedElements(contextWithChain, previousContext);\r\n        this.__previousContext = contextWithChain;\r\n        return this.location;\r\n      }\r\n\r\n      this.#addAppearingContent(contextWithChain, previousContext);\r\n      const animationDone = this.#animateIfNeeded(contextWithChain);\r\n\r\n      this.#runOnAfterEnterCallbacks(contextWithChain);\r\n      this.#runOnAfterLeaveCallbacks(contextWithChain, previousContext);\r\n\r\n      await animationDone;\r\n\r\n      if (this.#isLatestRender(contextWithChain)) {\r\n        // If there is another render pass started after this one,\r\n        // the 'disappearing content' would be removed when the other\r\n        // render pass calls `this.__addAppearingContent()`\r\n        this.#removeDisappearingContent();\r\n\r\n        this.__previousContext = contextWithChain;\r\n        return this.location;\r\n      }\r\n    } catch (error: unknown) {\r\n      if (renderId === this.#lastStartedRenderId) {\r\n        if (shouldUpdateHistory) {\r\n          this.#updateBrowserHistory(this.context);\r\n        }\r\n\r\n        for (const child of this.#outlet?.children ?? []) {\r\n          child.remove();\r\n        }\r\n\r\n        this.location = createLocation(Object.assign(context, { resolver: this }));\r\n        fireRouterEvent('error', {\r\n          router: this,\r\n          error,\r\n          ...context,\r\n        });\r\n        throw error;\r\n      }\r\n    }\r\n\r\n    return this.location;\r\n  }\r\n\r\n  // `topOfTheChainContextBeforeRedirects` is a context coming from Resolver.resolve().\r\n  // It would contain a 'redirect' route or the first 'component' route that\r\n  // matched the pathname. There might be more child 'component' routes to be\r\n  // resolved and added into the chain. This method would find and add them.\r\n  // `contextBeforeRedirects` is the context containing such a child component\r\n  // route. It's only necessary when this method is called recursively (otherwise\r\n  // it's the same as the 'top of the chain' context).\r\n  //\r\n  // Apart from building the chain of child components, this method would also\r\n  // handle 'redirect' routes, call 'onBefore' callbacks and handle 'prevent'\r\n  // and 'redirect' callback results.\r\n  async #fullyResolveChain(\r\n    topOfTheChainContextBeforeRedirects: RouteContext<R, C>,\r\n    contextBeforeRedirects: RouteContext<R, C> = topOfTheChainContextBeforeRedirects,\r\n  ): Promise<RouteContext<R, C>> {\r\n    const contextAfterRedirects = await this.#findComponentContextAfterAllRedirects(contextBeforeRedirects);\r\n\r\n    const redirectsHappened = contextAfterRedirects !== contextBeforeRedirects;\r\n    const topOfTheChainContextAfterRedirects = redirectsHappened\r\n      ? contextAfterRedirects\r\n      : topOfTheChainContextBeforeRedirects;\r\n\r\n    const matchedPath = getPathnameForRouter(getMatchedPath(contextAfterRedirects.chain ?? []), this);\r\n    const isFound = matchedPath === contextAfterRedirects.pathname;\r\n\r\n    // Recursive method to try matching more child and sibling routes\r\n    const findNextContextIfAny = async (\r\n      context: RouteContext<R, C>,\r\n      parent: Route<R, C> | undefined = context.route,\r\n      prevResult?: NextResult<R, C> | null,\r\n    ): Promise<NextResult<R, C>> => {\r\n      const nextContext = await context.next(false, parent, prevResult);\r\n\r\n      if (nextContext === null || nextContext === notFoundResult) {\r\n        // Next context is not found in children, ...\r\n        if (isFound) {\r\n          // ...but original context is already fully matching - use it\r\n          return context;\r\n        } else if (parent.parent != null) {\r\n          // ...and there is no full match yet - step up to check siblings\r\n          return await findNextContextIfAny(context, parent.parent, nextContext);\r\n        }\r\n        return nextContext;\r\n      }\r\n\r\n      return nextContext;\r\n    };\r\n\r\n    const nextContext = await findNextContextIfAny(contextAfterRedirects);\r\n\r\n    if (nextContext == null || nextContext === notFoundResult) {\r\n      throw getNotFoundError<ActionValue, RouteExtension<R, C>, ContextExtension<R, C>>(\r\n        topOfTheChainContextAfterRedirects,\r\n      );\r\n    }\r\n\r\n    return nextContext !== contextAfterRedirects\r\n      ? await this.#fullyResolveChain(topOfTheChainContextAfterRedirects, nextContext)\r\n      : await this.#amendWithOnBeforeCallbacks(contextAfterRedirects);\r\n  }\r\n\r\n  async #findComponentContextAfterAllRedirects(context: RouteContext<R, C>): Promise<RouteContext<R, C>> {\r\n    const { result } = context;\r\n    if (result instanceof HTMLElement) {\r\n      renderElement(context, result as WebComponentInterface<R, C>);\r\n      return context;\r\n    } else if (result && 'redirect' in result) {\r\n      const ctx = await this.#redirect(result.redirect, context.__redirectCount, context.__renderId);\r\n      return await this.#findComponentContextAfterAllRedirects(ctx);\r\n    }\r\n\r\n    throw result instanceof Error\r\n      ? result\r\n      : new Error(\r\n          log(\r\n            `Invalid route resolution result for path \"${context.pathname}\". ` +\r\n              `Expected redirect object or HTML element, but got: \"${logValue(result)}\". ` +\r\n              `Double check the action return value for the route.`,\r\n          ),\r\n        );\r\n  }\r\n\r\n  async #amendWithOnBeforeCallbacks(contextWithFullChain: RouteContext<R, C>): Promise<RouteContext<R, C>> {\r\n    return await this.#runOnBeforeCallbacks(contextWithFullChain).then(async (amendedContext) => {\r\n      if (amendedContext === this.__previousContext || amendedContext === contextWithFullChain) {\r\n        return amendedContext;\r\n      }\r\n      return await this.#fullyResolveChain(amendedContext);\r\n    });\r\n  }\r\n\r\n  async #runOnBeforeCallbacks(newContext: RouteContext<R, C>): Promise<RouteContext<R, C>> {\r\n    const previousContext = (this.__previousContext ?? {}) as Partial<RouteContext<R, C>>;\r\n    const previousChain = previousContext.chain ?? [];\r\n    const newChain = newContext.chain ?? [];\r\n\r\n    let callbacks: Promise<ActionResult> = Promise.resolve(undefined);\r\n    const redirect = (pathname: string) => createRedirect(newContext, pathname) as unknown as RedirectResult;\r\n\r\n    newContext.__divergedChainIndex = 0;\r\n    newContext.__skipAttach = false;\r\n    if (previousChain.length) {\r\n      for (let i = 0; i < Math.min(previousChain.length, newChain.length); newContext.__divergedChainIndex++, i++) {\r\n        if (\r\n          previousChain[i].route !== newChain[i].route ||\r\n          (previousChain[i].path !== newChain[i].path && previousChain[i].element !== newChain[i].element) ||\r\n          !this.#isReusableElement(\r\n            previousChain[i].element as HTMLElement | undefined,\r\n            newChain[i].element as HTMLElement | undefined,\r\n          )\r\n        ) {\r\n          break;\r\n        }\r\n      }\r\n\r\n      // Skip re-attaching and notifications if element and chain do not change\r\n      newContext.__skipAttach =\r\n        // Same route chain\r\n        newChain.length === previousChain.length &&\r\n        newContext.__divergedChainIndex === newChain.length &&\r\n        // Same element\r\n        this.#isReusableElement(newContext.result, previousContext.result);\r\n\r\n      if (newContext.__skipAttach) {\r\n        // execute onBeforeLeave for changed segment element when skipping attach\r\n        for (let i = newChain.length - 1; i >= 0; i--) {\r\n          callbacks = this.#runOnBeforeLeaveCallbacks(callbacks, newContext, { prevent }, previousChain[i]);\r\n        }\r\n        // execute onBeforeEnter for changed segment element when skipping attach\r\n        for (let i = 0; i < newChain.length; i++) {\r\n          callbacks = this.#runOnBeforeEnterCallbacks(\r\n            callbacks,\r\n            newContext,\r\n            {\r\n              prevent,\r\n              redirect,\r\n            },\r\n            newChain[i],\r\n          );\r\n          previousChain[i].element!.location = createLocation(newContext, previousChain[i].route);\r\n        }\r\n      } else {\r\n        // execute onBeforeLeave when NOT skipping attach\r\n        for (let i = previousChain.length - 1; i >= newContext.__divergedChainIndex; i--) {\r\n          callbacks = this.#runOnBeforeLeaveCallbacks(callbacks, newContext, { prevent }, previousChain[i]);\r\n        }\r\n      }\r\n    }\r\n    // execute onBeforeEnter when NOT skipping attach\r\n    if (!newContext.__skipAttach) {\r\n      for (let i = 0; i < newChain.length; i++) {\r\n        if (i < newContext.__divergedChainIndex) {\r\n          if (i < previousChain.length && previousChain[i].element) {\r\n            previousChain[i].element!.location = createLocation(newContext, previousChain[i].route);\r\n          }\r\n        } else {\r\n          callbacks = this.#runOnBeforeEnterCallbacks(\r\n            callbacks,\r\n            newContext,\r\n            {\r\n              prevent,\r\n              redirect,\r\n            },\r\n            newChain[i],\r\n          );\r\n          if (newChain[i].element) {\r\n            newChain[i].element!.location = createLocation(newContext, newChain[i].route);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return await callbacks.then(async (amendmentResult: ActionResult) => {\r\n      if (amendmentResult && isObject(amendmentResult)) {\r\n        if ('cancel' in amendmentResult && this.__previousContext) {\r\n          this.__previousContext.__renderId = newContext.__renderId;\r\n          return this.__previousContext;\r\n        }\r\n        if ('redirect' in amendmentResult) {\r\n          return await this.#redirect(amendmentResult.redirect, newContext.__redirectCount, newContext.__renderId);\r\n        }\r\n      }\r\n      return newContext;\r\n    });\r\n  }\r\n\r\n  async #runOnBeforeLeaveCallbacks(\r\n    callbacks: Promise<ActionResult>,\r\n    newContext: RouteContext<R, C>,\r\n    commands: PreventCommands,\r\n    chainElement: ChainItem<R, C>,\r\n  ): Promise<ActionResult> {\r\n    const location = createLocation(newContext);\r\n\r\n    let result: ActionResult = await callbacks;\r\n\r\n    if (this.#isLatestRender(newContext)) {\r\n      const beforeLeaveFunction = amend('onBeforeLeave', chainElement.element, location, commands, this);\r\n      result = beforeLeaveFunction(result);\r\n    }\r\n\r\n    if (!(isObject(result) && 'redirect' in result)) {\r\n      return result as ActionResult;\r\n    }\r\n  }\r\n\r\n  async #runOnBeforeEnterCallbacks(\r\n    callbacks: Promise<ActionResult>,\r\n    newContext: RouteContext<R, C>,\r\n    commands: PreventAndRedirectCommands,\r\n    chainElement: ChainItem<R, C>,\r\n  ): Promise<ActionResult> {\r\n    const location = createLocation(newContext, chainElement.route);\r\n    const result = await callbacks;\r\n\r\n    if (this.#isLatestRender(newContext)) {\r\n      const beforeEnterFunction = amend('onBeforeEnter', chainElement.element, location, commands, this);\r\n      return beforeEnterFunction(result);\r\n    }\r\n  }\r\n\r\n  #isReusableElement(element?: unknown, otherElement?: unknown): boolean {\r\n    if (element instanceof Element && otherElement instanceof Element) {\r\n      return this.#createdByRouter.has(element) && this.#createdByRouter.has(otherElement)\r\n        ? element.localName === otherElement.localName\r\n        : element === otherElement;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  #isLatestRender(context: Partial<RouteContext<R, C>>): boolean {\r\n    return context.__renderId === this.#lastStartedRenderId;\r\n  }\r\n\r\n  declare ['resolve']: (\r\n    contextOrPathname: RouteContext<R, C> | string,\r\n  ) => Promise<RouteContext<R, C> & RedirectContextInfo>;\r\n\r\n  async #redirect(\r\n    redirectData: RedirectContextInfo,\r\n    counter: number = 0,\r\n    renderId: number = 0,\r\n  ): Promise<RouteContext<R, C> & RedirectContextInfo> {\r\n    if (counter > MAX_REDIRECT_COUNT) {\r\n      throw new Error(log(`Too many redirects when rendering ${redirectData.from}`));\r\n    }\r\n\r\n    return await this.resolve({\r\n      ...(rootContext as RouteContext<R, C>),\r\n      pathname: this.urlForPath(redirectData.pathname, redirectData.params),\r\n      redirectFrom: redirectData.from,\r\n      __redirectCount: counter + 1,\r\n      __renderId: renderId,\r\n    });\r\n  }\r\n\r\n  #ensureOutlet(outlet: Element | DocumentFragment | undefined | null = this.#outlet): void {\r\n    if (!(outlet instanceof Element || outlet instanceof DocumentFragment)) {\r\n      throw new TypeError(\r\n        log(`Expected router outlet to be a valid DOM Element | DocumentFragment (but got ${outlet})`),\r\n      );\r\n    }\r\n  }\r\n\r\n  // eslint-disable-next-line @typescript-eslint/class-methods-use-this\r\n  #updateBrowserHistory({ pathname, search = '', hash = '' }: ResolveContext, replace?: boolean): void {\r\n    if (window.location.pathname !== pathname || window.location.search !== search || window.location.hash !== hash) {\r\n      const changeState = replace ? 'replaceState' : 'pushState';\r\n      window.history[changeState](null, document.title, pathname + search + hash);\r\n      window.dispatchEvent(new PopStateEvent('popstate', { state: 'vaadin-router-ignore' }));\r\n    }\r\n  }\r\n\r\n  #copyUnchangedElements(\r\n    context: RouteContext<R, C>,\r\n    previousContext?: RouteContext<R, C>,\r\n  ): Element | DocumentFragment | null | undefined {\r\n    // Find the deepest common parent between the last and the new component\r\n    // chains. Update references for the unchanged elements in the new chain\r\n    let deepestCommonParent = this.#outlet;\r\n    for (let i = 0; i < (context.__divergedChainIndex ?? 0); i++) {\r\n      const unchangedElement = previousContext?.chain?.[i].element;\r\n      if (unchangedElement) {\r\n        if (unchangedElement.parentNode === deepestCommonParent) {\r\n          (context.chain![i] as Writable<ChainItem<R, C>>).element = unchangedElement;\r\n          deepestCommonParent = unchangedElement;\r\n        } else {\r\n          break;\r\n        }\r\n      }\r\n    }\r\n    return deepestCommonParent;\r\n  }\r\n\r\n  #addAppearingContent(context: RouteContext<R, C>, previousContext?: RouteContext<R, C>): void {\r\n    this.#ensureOutlet();\r\n\r\n    // If the previous 'entering' animation has not completed yet,\r\n    // stop it and remove that content from the DOM before adding new one.\r\n    this.#removeAppearingContent();\r\n\r\n    // Copy reusable elements from the previousContext to current\r\n    const deepestCommonParent = this.#copyUnchangedElements(context, previousContext);\r\n\r\n    // Keep two lists of DOM elements:\r\n    //  - those that should be removed once the transition animation is over\r\n    //  - and those that should remain\r\n    this.#appearingContent = [];\r\n    this.#disappearingContent = Array.from(deepestCommonParent?.children ?? []).filter(\r\n      // Only remove layout content that was added by router\r\n      (e) =>\r\n        this.#addedByRouter.has(e) &&\r\n        // Do not remove the result element to avoid flickering\r\n        e !== context.result,\r\n    );\r\n\r\n    // Add new elements (starting after the deepest common parent) to the DOM.\r\n    // That way only the components that are actually different between the two\r\n    // locations are added to the DOM (and those that are common remain in the\r\n    // DOM without first removing and then adding them again).\r\n    let parentElement = deepestCommonParent;\r\n    for (let i = context.__divergedChainIndex ?? 0; i < (context.chain?.length ?? 0); i++) {\r\n      const elementToAdd = context.chain![i].element;\r\n      if (elementToAdd) {\r\n        parentElement?.appendChild(elementToAdd);\r\n        this.#addedByRouter.add(elementToAdd);\r\n        if (parentElement === deepestCommonParent) {\r\n          this.#appearingContent.push(elementToAdd);\r\n        }\r\n        parentElement = elementToAdd;\r\n      }\r\n    }\r\n  }\r\n\r\n  #removeDisappearingContent(): void {\r\n    if (this.#disappearingContent) {\r\n      for (const element of this.#disappearingContent) {\r\n        element.remove();\r\n      }\r\n    }\r\n    this.#disappearingContent = null;\r\n    this.#appearingContent = null;\r\n  }\r\n\r\n  #removeAppearingContent(): void {\r\n    if (this.#disappearingContent && this.#appearingContent) {\r\n      for (const element of this.#appearingContent) {\r\n        element.remove();\r\n      }\r\n      this.#disappearingContent = null;\r\n      this.#appearingContent = null;\r\n    }\r\n  }\r\n\r\n  #runOnAfterLeaveCallbacks(currentContext: RouteContext<R, C>, targetContext?: RouteContext<R, C>): void {\r\n    if (!targetContext?.chain || currentContext.__divergedChainIndex == null) {\r\n      return;\r\n    }\r\n\r\n    // REVERSE iteration: from Z to A\r\n    for (let i = targetContext.chain.length - 1; i >= currentContext.__divergedChainIndex; i--) {\r\n      if (!this.#isLatestRender(currentContext)) {\r\n        break;\r\n      }\r\n      const currentComponent = targetContext.chain[i].element;\r\n      if (!currentComponent) {\r\n        continue;\r\n      }\r\n      try {\r\n        const location = createLocation(currentContext);\r\n        // eslint-disable-next-line @typescript-eslint/unbound-method\r\n        maybeCall(currentComponent.onAfterLeave, currentComponent, location, {} as EmptyCommands, this);\r\n      } finally {\r\n        if (this.#disappearingContent?.includes(currentComponent)) {\r\n          for (const child of currentComponent.children) {\r\n            child.remove();\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  #runOnAfterEnterCallbacks(currentContext: RouteContext<R, C>): void {\r\n    if (!currentContext.chain || currentContext.__divergedChainIndex == null) {\r\n      return;\r\n    }\r\n\r\n    // forward iteration: from A to Z\r\n    for (let i = currentContext.__divergedChainIndex; i < currentContext.chain.length; i++) {\r\n      if (!this.#isLatestRender(currentContext)) {\r\n        break;\r\n      }\r\n      const currentComponent = currentContext.chain[i].element;\r\n      if (currentComponent) {\r\n        const location = createLocation(currentContext, currentContext.chain[i].route);\r\n        // eslint-disable-next-line @typescript-eslint/unbound-method\r\n        maybeCall(currentComponent.onAfterEnter, currentComponent, location, {}, this);\r\n      }\r\n    }\r\n  }\r\n\r\n  async #animateIfNeeded(context: RouteContext<R, C>): Promise<RouteContext<R, C>> {\r\n    const from = this.#disappearingContent?.[0];\r\n    const to = this.#appearingContent?.[0];\r\n    const promises = [];\r\n\r\n    const { chain = [] } = context;\r\n    let config;\r\n    for (let i = chain.length - 1; i >= 0; i--) {\r\n      if (chain[i].route.animate) {\r\n        config = chain[i].route.animate;\r\n        break;\r\n      }\r\n    }\r\n\r\n    if (from && to && config) {\r\n      const leave = isObject(config) && config.leave ? config.leave : 'leaving';\r\n      const enter = isObject(config) && config.enter ? config.enter : 'entering';\r\n      promises.push(animate(from, leave));\r\n      promises.push(animate(to, enter));\r\n    }\r\n\r\n    await Promise.all(promises);\r\n\r\n    return context;\r\n  }\r\n\r\n  /**\r\n   * Subscribes this instance to navigation events on the `window`.\r\n   *\r\n   * NOTE: beware of resource leaks. For as long as a router instance is\r\n   * subscribed to navigation events, it won't be garbage collected.\r\n   */\r\n  subscribe(): void {\r\n    window.addEventListener('vaadin-router-go', this.#navigationEventHandler);\r\n  }\r\n\r\n  /**\r\n   * Removes the subscription to navigation events created in the `subscribe()`\r\n   * method.\r\n   */\r\n  unsubscribe(): void {\r\n    window.removeEventListener('vaadin-router-go', this.#navigationEventHandler);\r\n  }\r\n\r\n  #onNavigationEvent(event?: Event): void {\r\n    const { pathname, search, hash } =\r\n      event instanceof CustomEvent ? (event.detail as ResolveContext) : window.location;\r\n\r\n    if (isString(this.__normalizePathname(pathname))) {\r\n      if (event?.preventDefault) {\r\n        event.preventDefault();\r\n      }\r\n      // eslint-disable-next-line no-void\r\n      void this.render({ pathname, search, hash }, true);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Configures what triggers Router navigation events:\r\n   *  - `POPSTATE`: popstate events on the current `window`\r\n   *  - `CLICK`: click events on `<a>` links leading to the current page\r\n   *\r\n   * This method is invoked with the pre-configured values when creating a new Router instance.\r\n   * By default, both `POPSTATE` and `CLICK` are enabled. This setup is expected to cover most of the use cases.\r\n   *\r\n   * See the `router-config.js` for the default navigation triggers config. Based on it, you can\r\n   * create the own one and only import the triggers you need, instead of pulling in all the code,\r\n   * e.g. if you want to handle `click` differently.\r\n   *\r\n   * See also **Navigation Triggers** section in [Live Examples](#/classes/Router/demos/demo/index.html).\r\n   *\r\n   * @param triggers - navigation triggers\r\n   */\r\n  static setTriggers(...triggers: readonly NavigationTrigger[]): void {\r\n    setNavigationTriggers(triggers);\r\n  }\r\n\r\n  /**\r\n   * Generates a URL for the route with the given name, optionally performing\r\n   * substitution of parameters.\r\n   *\r\n   * The route is searched in all the Router instances subscribed to\r\n   * navigation events.\r\n   *\r\n   * **Note:** For child route names, only array children are considered.\r\n   * It is not possible to generate URLs using a name for routes set with\r\n   * a children function.\r\n   *\r\n   * @param name - The route name or the routes `component` name.\r\n   * @param params - Optional object with route path parameters.\r\n   * Named parameters are passed by name (`params[name] = value`), unnamed\r\n   * parameters are passed by index (`params[index] = value`).\r\n   */\r\n  urlForName(name: string, params?: Params | null): string {\r\n    if (!this.#urlForName) {\r\n      this.#urlForName = generateUrls(this, {\r\n        cacheKeyProvider(route): string | undefined {\r\n          return 'component' in route && typeof route.component === 'string'\r\n            ? (route as Readonly<{ component: string }>).component\r\n            : undefined;\r\n        },\r\n      });\r\n    }\r\n    return getPathnameForRouter(this.#urlForName(name, params ?? undefined), this);\r\n  }\r\n\r\n  /**\r\n   * Generates a URL for the given route path, optionally performing\r\n   * substitution of parameters.\r\n   *\r\n   * @param path - String route path declared in [express.js\r\n   * syntax](https://expressjs.com/en/guide/routing.html#route-paths).\r\n   * @param params - Optional object with route path parameters.\r\n   * Named parameters are passed by name (`params[name] = value`), unnamed\r\n   * parameters are passed by index (`params[index] = value`).\r\n   */\r\n  urlForPath(path: string, params?: Params | null): string {\r\n    return getPathnameForRouter(\r\n      compile(path)((params as Partial<Record<string, string | string[]>> | null) ?? undefined),\r\n      this,\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Triggers navigation to a new path. Returns a boolean without waiting until\r\n   * the navigation is complete. Returns `true` if at least one `Router`\r\n   * has handled the navigation (was subscribed and had `baseUrl` matching\r\n   * the `path` argument), otherwise returns `false`.\r\n   *\r\n   * @param path - A new in-app path string, or an URL-like object with\r\n   * `pathname` string property, and optional `search` and `hash` string\r\n   * properties.\r\n   */\r\n  static go(path: string | ResolveContext): boolean {\r\n    const { pathname, search, hash } = isString(path)\r\n      ? new URL(path, 'http://a') // some base to omit origin\r\n      : path;\r\n    return fireRouterEvent('go', { pathname, search, hash });\r\n  }\r\n}\r\n","/**\n * Tokenize input string.\n */\nfunction lexer(str) {\n    var tokens = [];\n    var i = 0;\n    while (i < str.length) {\n        var char = str[i];\n        if (char === \"*\" || char === \"+\" || char === \"?\") {\n            tokens.push({ type: \"MODIFIER\", index: i, value: str[i++] });\n            continue;\n        }\n        if (char === \"\\\\\") {\n            tokens.push({ type: \"ESCAPED_CHAR\", index: i++, value: str[i++] });\n            continue;\n        }\n        if (char === \"{\") {\n            tokens.push({ type: \"OPEN\", index: i, value: str[i++] });\n            continue;\n        }\n        if (char === \"}\") {\n            tokens.push({ type: \"CLOSE\", index: i, value: str[i++] });\n            continue;\n        }\n        if (char === \":\") {\n            var name = \"\";\n            var j = i + 1;\n            while (j < str.length) {\n                var code = str.charCodeAt(j);\n                if (\n                // `0-9`\n                (code >= 48 && code <= 57) ||\n                    // `A-Z`\n                    (code >= 65 && code <= 90) ||\n                    // `a-z`\n                    (code >= 97 && code <= 122) ||\n                    // `_`\n                    code === 95) {\n                    name += str[j++];\n                    continue;\n                }\n                break;\n            }\n            if (!name)\n                throw new TypeError(\"Missing parameter name at \".concat(i));\n            tokens.push({ type: \"NAME\", index: i, value: name });\n            i = j;\n            continue;\n        }\n        if (char === \"(\") {\n            var count = 1;\n            var pattern = \"\";\n            var j = i + 1;\n            if (str[j] === \"?\") {\n                throw new TypeError(\"Pattern cannot start with \\\"?\\\" at \".concat(j));\n            }\n            while (j < str.length) {\n                if (str[j] === \"\\\\\") {\n                    pattern += str[j++] + str[j++];\n                    continue;\n                }\n                if (str[j] === \")\") {\n                    count--;\n                    if (count === 0) {\n                        j++;\n                        break;\n                    }\n                }\n                else if (str[j] === \"(\") {\n                    count++;\n                    if (str[j + 1] !== \"?\") {\n                        throw new TypeError(\"Capturing groups are not allowed at \".concat(j));\n                    }\n                }\n                pattern += str[j++];\n            }\n            if (count)\n                throw new TypeError(\"Unbalanced pattern at \".concat(i));\n            if (!pattern)\n                throw new TypeError(\"Missing pattern at \".concat(i));\n            tokens.push({ type: \"PATTERN\", index: i, value: pattern });\n            i = j;\n            continue;\n        }\n        tokens.push({ type: \"CHAR\", index: i, value: str[i++] });\n    }\n    tokens.push({ type: \"END\", index: i, value: \"\" });\n    return tokens;\n}\n/**\n * Parse a string for the raw tokens.\n */\nexport function parse(str, options) {\n    if (options === void 0) { options = {}; }\n    var tokens = lexer(str);\n    var _a = options.prefixes, prefixes = _a === void 0 ? \"./\" : _a, _b = options.delimiter, delimiter = _b === void 0 ? \"/#?\" : _b;\n    var result = [];\n    var key = 0;\n    var i = 0;\n    var path = \"\";\n    var tryConsume = function (type) {\n        if (i < tokens.length && tokens[i].type === type)\n            return tokens[i++].value;\n    };\n    var mustConsume = function (type) {\n        var value = tryConsume(type);\n        if (value !== undefined)\n            return value;\n        var _a = tokens[i], nextType = _a.type, index = _a.index;\n        throw new TypeError(\"Unexpected \".concat(nextType, \" at \").concat(index, \", expected \").concat(type));\n    };\n    var consumeText = function () {\n        var result = \"\";\n        var value;\n        while ((value = tryConsume(\"CHAR\") || tryConsume(\"ESCAPED_CHAR\"))) {\n            result += value;\n        }\n        return result;\n    };\n    var isSafe = function (value) {\n        for (var _i = 0, delimiter_1 = delimiter; _i < delimiter_1.length; _i++) {\n            var char = delimiter_1[_i];\n            if (value.indexOf(char) > -1)\n                return true;\n        }\n        return false;\n    };\n    var safePattern = function (prefix) {\n        var prev = result[result.length - 1];\n        var prevText = prefix || (prev && typeof prev === \"string\" ? prev : \"\");\n        if (prev && !prevText) {\n            throw new TypeError(\"Must have text between two parameters, missing text after \\\"\".concat(prev.name, \"\\\"\"));\n        }\n        if (!prevText || isSafe(prevText))\n            return \"[^\".concat(escapeString(delimiter), \"]+?\");\n        return \"(?:(?!\".concat(escapeString(prevText), \")[^\").concat(escapeString(delimiter), \"])+?\");\n    };\n    while (i < tokens.length) {\n        var char = tryConsume(\"CHAR\");\n        var name = tryConsume(\"NAME\");\n        var pattern = tryConsume(\"PATTERN\");\n        if (name || pattern) {\n            var prefix = char || \"\";\n            if (prefixes.indexOf(prefix) === -1) {\n                path += prefix;\n                prefix = \"\";\n            }\n            if (path) {\n                result.push(path);\n                path = \"\";\n            }\n            result.push({\n                name: name || key++,\n                prefix: prefix,\n                suffix: \"\",\n                pattern: pattern || safePattern(prefix),\n                modifier: tryConsume(\"MODIFIER\") || \"\",\n            });\n            continue;\n        }\n        var value = char || tryConsume(\"ESCAPED_CHAR\");\n        if (value) {\n            path += value;\n            continue;\n        }\n        if (path) {\n            result.push(path);\n            path = \"\";\n        }\n        var open = tryConsume(\"OPEN\");\n        if (open) {\n            var prefix = consumeText();\n            var name_1 = tryConsume(\"NAME\") || \"\";\n            var pattern_1 = tryConsume(\"PATTERN\") || \"\";\n            var suffix = consumeText();\n            mustConsume(\"CLOSE\");\n            result.push({\n                name: name_1 || (pattern_1 ? key++ : \"\"),\n                pattern: name_1 && !pattern_1 ? safePattern(prefix) : pattern_1,\n                prefix: prefix,\n                suffix: suffix,\n                modifier: tryConsume(\"MODIFIER\") || \"\",\n            });\n            continue;\n        }\n        mustConsume(\"END\");\n    }\n    return result;\n}\n/**\n * Compile a string to a template function for the path.\n */\nexport function compile(str, options) {\n    return tokensToFunction(parse(str, options), options);\n}\n/**\n * Expose a method for transforming tokens into the path function.\n */\nexport function tokensToFunction(tokens, options) {\n    if (options === void 0) { options = {}; }\n    var reFlags = flags(options);\n    var _a = options.encode, encode = _a === void 0 ? function (x) { return x; } : _a, _b = options.validate, validate = _b === void 0 ? true : _b;\n    // Compile all the tokens into regexps.\n    var matches = tokens.map(function (token) {\n        if (typeof token === \"object\") {\n            return new RegExp(\"^(?:\".concat(token.pattern, \")$\"), reFlags);\n        }\n    });\n    return function (data) {\n        var path = \"\";\n        for (var i = 0; i < tokens.length; i++) {\n            var token = tokens[i];\n            if (typeof token === \"string\") {\n                path += token;\n                continue;\n            }\n            var value = data ? data[token.name] : undefined;\n            var optional = token.modifier === \"?\" || token.modifier === \"*\";\n            var repeat = token.modifier === \"*\" || token.modifier === \"+\";\n            if (Array.isArray(value)) {\n                if (!repeat) {\n                    throw new TypeError(\"Expected \\\"\".concat(token.name, \"\\\" to not repeat, but got an array\"));\n                }\n                if (value.length === 0) {\n                    if (optional)\n                        continue;\n                    throw new TypeError(\"Expected \\\"\".concat(token.name, \"\\\" to not be empty\"));\n                }\n                for (var j = 0; j < value.length; j++) {\n                    var segment = encode(value[j], token);\n                    if (validate && !matches[i].test(segment)) {\n                        throw new TypeError(\"Expected all \\\"\".concat(token.name, \"\\\" to match \\\"\").concat(token.pattern, \"\\\", but got \\\"\").concat(segment, \"\\\"\"));\n                    }\n                    path += token.prefix + segment + token.suffix;\n                }\n                continue;\n            }\n            if (typeof value === \"string\" || typeof value === \"number\") {\n                var segment = encode(String(value), token);\n                if (validate && !matches[i].test(segment)) {\n                    throw new TypeError(\"Expected \\\"\".concat(token.name, \"\\\" to match \\\"\").concat(token.pattern, \"\\\", but got \\\"\").concat(segment, \"\\\"\"));\n                }\n                path += token.prefix + segment + token.suffix;\n                continue;\n            }\n            if (optional)\n                continue;\n            var typeOfMessage = repeat ? \"an array\" : \"a string\";\n            throw new TypeError(\"Expected \\\"\".concat(token.name, \"\\\" to be \").concat(typeOfMessage));\n        }\n        return path;\n    };\n}\n/**\n * Create path match function from `path-to-regexp` spec.\n */\nexport function match(str, options) {\n    var keys = [];\n    var re = pathToRegexp(str, keys, options);\n    return regexpToFunction(re, keys, options);\n}\n/**\n * Create a path match function from `path-to-regexp` output.\n */\nexport function regexpToFunction(re, keys, options) {\n    if (options === void 0) { options = {}; }\n    var _a = options.decode, decode = _a === void 0 ? function (x) { return x; } : _a;\n    return function (pathname) {\n        var m = re.exec(pathname);\n        if (!m)\n            return false;\n        var path = m[0], index = m.index;\n        var params = Object.create(null);\n        var _loop_1 = function (i) {\n            if (m[i] === undefined)\n                return \"continue\";\n            var key = keys[i - 1];\n            if (key.modifier === \"*\" || key.modifier === \"+\") {\n                params[key.name] = m[i].split(key.prefix + key.suffix).map(function (value) {\n                    return decode(value, key);\n                });\n            }\n            else {\n                params[key.name] = decode(m[i], key);\n            }\n        };\n        for (var i = 1; i < m.length; i++) {\n            _loop_1(i);\n        }\n        return { path: path, index: index, params: params };\n    };\n}\n/**\n * Escape a regular expression string.\n */\nfunction escapeString(str) {\n    return str.replace(/([.+*?=^!:${}()[\\]|/\\\\])/g, \"\\\\$1\");\n}\n/**\n * Get the flags for a regexp from the options.\n */\nfunction flags(options) {\n    return options && options.sensitive ? \"\" : \"i\";\n}\n/**\n * Pull out keys from a regexp.\n */\nfunction regexpToRegexp(path, keys) {\n    if (!keys)\n        return path;\n    var groupsRegex = /\\((?:\\?<(.*?)>)?(?!\\?)/g;\n    var index = 0;\n    var execResult = groupsRegex.exec(path.source);\n    while (execResult) {\n        keys.push({\n            // Use parenthesized substring match if available, index otherwise\n            name: execResult[1] || index++,\n            prefix: \"\",\n            suffix: \"\",\n            modifier: \"\",\n            pattern: \"\",\n        });\n        execResult = groupsRegex.exec(path.source);\n    }\n    return path;\n}\n/**\n * Transform an array into a regexp.\n */\nfunction arrayToRegexp(paths, keys, options) {\n    var parts = paths.map(function (path) { return pathToRegexp(path, keys, options).source; });\n    return new RegExp(\"(?:\".concat(parts.join(\"|\"), \")\"), flags(options));\n}\n/**\n * Create a path regexp from string input.\n */\nfunction stringToRegexp(path, keys, options) {\n    return tokensToRegexp(parse(path, options), keys, options);\n}\n/**\n * Expose a function for taking tokens and returning a RegExp.\n */\nexport function tokensToRegexp(tokens, keys, options) {\n    if (options === void 0) { options = {}; }\n    var _a = options.strict, strict = _a === void 0 ? false : _a, _b = options.start, start = _b === void 0 ? true : _b, _c = options.end, end = _c === void 0 ? true : _c, _d = options.encode, encode = _d === void 0 ? function (x) { return x; } : _d, _e = options.delimiter, delimiter = _e === void 0 ? \"/#?\" : _e, _f = options.endsWith, endsWith = _f === void 0 ? \"\" : _f;\n    var endsWithRe = \"[\".concat(escapeString(endsWith), \"]|$\");\n    var delimiterRe = \"[\".concat(escapeString(delimiter), \"]\");\n    var route = start ? \"^\" : \"\";\n    // Iterate over the tokens and create our regexp string.\n    for (var _i = 0, tokens_1 = tokens; _i < tokens_1.length; _i++) {\n        var token = tokens_1[_i];\n        if (typeof token === \"string\") {\n            route += escapeString(encode(token));\n        }\n        else {\n            var prefix = escapeString(encode(token.prefix));\n            var suffix = escapeString(encode(token.suffix));\n            if (token.pattern) {\n                if (keys)\n                    keys.push(token);\n                if (prefix || suffix) {\n                    if (token.modifier === \"+\" || token.modifier === \"*\") {\n                        var mod = token.modifier === \"*\" ? \"?\" : \"\";\n                        route += \"(?:\".concat(prefix, \"((?:\").concat(token.pattern, \")(?:\").concat(suffix).concat(prefix, \"(?:\").concat(token.pattern, \"))*)\").concat(suffix, \")\").concat(mod);\n                    }\n                    else {\n                        route += \"(?:\".concat(prefix, \"(\").concat(token.pattern, \")\").concat(suffix, \")\").concat(token.modifier);\n                    }\n                }\n                else {\n                    if (token.modifier === \"+\" || token.modifier === \"*\") {\n                        throw new TypeError(\"Can not repeat \\\"\".concat(token.name, \"\\\" without a prefix and suffix\"));\n                    }\n                    route += \"(\".concat(token.pattern, \")\").concat(token.modifier);\n                }\n            }\n            else {\n                route += \"(?:\".concat(prefix).concat(suffix, \")\").concat(token.modifier);\n            }\n        }\n    }\n    if (end) {\n        if (!strict)\n            route += \"\".concat(delimiterRe, \"?\");\n        route += !options.endsWith ? \"$\" : \"(?=\".concat(endsWithRe, \")\");\n    }\n    else {\n        var endToken = tokens[tokens.length - 1];\n        var isEndDelimited = typeof endToken === \"string\"\n            ? delimiterRe.indexOf(endToken[endToken.length - 1]) > -1\n            : endToken === undefined;\n        if (!strict) {\n            route += \"(?:\".concat(delimiterRe, \"(?=\").concat(endsWithRe, \"))?\");\n        }\n        if (!isEndDelimited) {\n            route += \"(?=\".concat(delimiterRe, \"|\").concat(endsWithRe, \")\");\n        }\n    }\n    return new RegExp(route, flags(options));\n}\n/**\n * Normalize the given path string, returning a regular expression.\n *\n * An empty array can be passed in for the keys, which will hold the\n * placeholder key descriptions. For example, using `/user/:id`, `keys` will\n * contain `[{ name: 'id', delimiter: '/', optional: false, repeat: false }]`.\n */\nexport function pathToRegexp(path, keys, options) {\n    if (path instanceof RegExp)\n        return regexpToRegexp(path, keys);\n    if (Array.isArray(path))\n        return arrayToRegexp(path, keys, options);\n    return stringToRegexp(path, keys, options);\n}\n//# sourceMappingURL=index.js.map","/**\n * Tokenizer results.\n */\ninterface LexToken {\n  type:\n    | \"OPEN\"\n    | \"CLOSE\"\n    | \"PATTERN\"\n    | \"NAME\"\n    | \"CHAR\"\n    | \"ESCAPED_CHAR\"\n    | \"MODIFIER\"\n    | \"END\";\n  index: number;\n  value: string;\n}\n\n/**\n * Tokenize input string.\n */\nfunction lexer(str: string): LexToken[] {\n  const tokens: LexToken[] = [];\n  let i = 0;\n\n  while (i < str.length) {\n    const char = str[i];\n\n    if (char === \"*\" || char === \"+\" || char === \"?\") {\n      tokens.push({ type: \"MODIFIER\", index: i, value: str[i++] });\n      continue;\n    }\n\n    if (char === \"\\\\\") {\n      tokens.push({ type: \"ESCAPED_CHAR\", index: i++, value: str[i++] });\n      continue;\n    }\n\n    if (char === \"{\") {\n      tokens.push({ type: \"OPEN\", index: i, value: str[i++] });\n      continue;\n    }\n\n    if (char === \"}\") {\n      tokens.push({ type: \"CLOSE\", index: i, value: str[i++] });\n      continue;\n    }\n\n    if (char === \":\") {\n      let name = \"\";\n      let j = i + 1;\n\n      while (j < str.length) {\n        const code = str.charCodeAt(j);\n\n        if (\n          // `0-9`\n          (code >= 48 && code <= 57) ||\n          // `A-Z`\n          (code >= 65 && code <= 90) ||\n          // `a-z`\n          (code >= 97 && code <= 122) ||\n          // `_`\n          code === 95\n        ) {\n          name += str[j++];\n          continue;\n        }\n\n        break;\n      }\n\n      if (!name) throw new TypeError(`Missing parameter name at ${i}`);\n\n      tokens.push({ type: \"NAME\", index: i, value: name });\n      i = j;\n      continue;\n    }\n\n    if (char === \"(\") {\n      let count = 1;\n      let pattern = \"\";\n      let j = i + 1;\n\n      if (str[j] === \"?\") {\n        throw new TypeError(`Pattern cannot start with \"?\" at ${j}`);\n      }\n\n      while (j < str.length) {\n        if (str[j] === \"\\\\\") {\n          pattern += str[j++] + str[j++];\n          continue;\n        }\n\n        if (str[j] === \")\") {\n          count--;\n          if (count === 0) {\n            j++;\n            break;\n          }\n        } else if (str[j] === \"(\") {\n          count++;\n          if (str[j + 1] !== \"?\") {\n            throw new TypeError(`Capturing groups are not allowed at ${j}`);\n          }\n        }\n\n        pattern += str[j++];\n      }\n\n      if (count) throw new TypeError(`Unbalanced pattern at ${i}`);\n      if (!pattern) throw new TypeError(`Missing pattern at ${i}`);\n\n      tokens.push({ type: \"PATTERN\", index: i, value: pattern });\n      i = j;\n      continue;\n    }\n\n    tokens.push({ type: \"CHAR\", index: i, value: str[i++] });\n  }\n\n  tokens.push({ type: \"END\", index: i, value: \"\" });\n\n  return tokens;\n}\n\nexport interface ParseOptions {\n  /**\n   * Set the default delimiter for repeat parameters. (default: `'/'`)\n   */\n  delimiter?: string;\n  /**\n   * List of characters to automatically consider prefixes when parsing.\n   */\n  prefixes?: string;\n}\n\n/**\n * Parse a string for the raw tokens.\n */\nexport function parse(str: string, options: ParseOptions = {}): Token[] {\n  const tokens = lexer(str);\n  const { prefixes = \"./\", delimiter = \"/#?\" } = options;\n  const result: Token[] = [];\n  let key = 0;\n  let i = 0;\n  let path = \"\";\n\n  const tryConsume = (type: LexToken[\"type\"]): string | undefined => {\n    if (i < tokens.length && tokens[i].type === type) return tokens[i++].value;\n  };\n\n  const mustConsume = (type: LexToken[\"type\"]): string => {\n    const value = tryConsume(type);\n    if (value !== undefined) return value;\n    const { type: nextType, index } = tokens[i];\n    throw new TypeError(`Unexpected ${nextType} at ${index}, expected ${type}`);\n  };\n\n  const consumeText = (): string => {\n    let result = \"\";\n    let value: string | undefined;\n    while ((value = tryConsume(\"CHAR\") || tryConsume(\"ESCAPED_CHAR\"))) {\n      result += value;\n    }\n    return result;\n  };\n\n  const isSafe = (value: string): boolean => {\n    for (const char of delimiter) if (value.indexOf(char) > -1) return true;\n    return false;\n  };\n\n  const safePattern = (prefix: string) => {\n    const prev = result[result.length - 1];\n    const prevText = prefix || (prev && typeof prev === \"string\" ? prev : \"\");\n\n    if (prev && !prevText) {\n      throw new TypeError(\n        `Must have text between two parameters, missing text after \"${(prev as Key).name}\"`,\n      );\n    }\n\n    if (!prevText || isSafe(prevText)) return `[^${escapeString(delimiter)}]+?`;\n    return `(?:(?!${escapeString(prevText)})[^${escapeString(delimiter)}])+?`;\n  };\n\n  while (i < tokens.length) {\n    const char = tryConsume(\"CHAR\");\n    const name = tryConsume(\"NAME\");\n    const pattern = tryConsume(\"PATTERN\");\n\n    if (name || pattern) {\n      let prefix = char || \"\";\n\n      if (prefixes.indexOf(prefix) === -1) {\n        path += prefix;\n        prefix = \"\";\n      }\n\n      if (path) {\n        result.push(path);\n        path = \"\";\n      }\n\n      result.push({\n        name: name || key++,\n        prefix,\n        suffix: \"\",\n        pattern: pattern || safePattern(prefix),\n        modifier: tryConsume(\"MODIFIER\") || \"\",\n      });\n      continue;\n    }\n\n    const value = char || tryConsume(\"ESCAPED_CHAR\");\n    if (value) {\n      path += value;\n      continue;\n    }\n\n    if (path) {\n      result.push(path);\n      path = \"\";\n    }\n\n    const open = tryConsume(\"OPEN\");\n    if (open) {\n      const prefix = consumeText();\n      const name = tryConsume(\"NAME\") || \"\";\n      const pattern = tryConsume(\"PATTERN\") || \"\";\n      const suffix = consumeText();\n\n      mustConsume(\"CLOSE\");\n\n      result.push({\n        name: name || (pattern ? key++ : \"\"),\n        pattern: name && !pattern ? safePattern(prefix) : pattern,\n        prefix,\n        suffix,\n        modifier: tryConsume(\"MODIFIER\") || \"\",\n      });\n      continue;\n    }\n\n    mustConsume(\"END\");\n  }\n\n  return result;\n}\n\nexport interface TokensToFunctionOptions {\n  /**\n   * When `true` the regexp will be case sensitive. (default: `false`)\n   */\n  sensitive?: boolean;\n  /**\n   * Function for encoding input strings for output.\n   */\n  encode?: (value: string, token: Key) => string;\n  /**\n   * When `false` the function can produce an invalid (unmatched) path. (default: `true`)\n   */\n  validate?: boolean;\n}\n\n/**\n * Compile a string to a template function for the path.\n */\nexport function compile<P extends object = object>(\n  str: string,\n  options?: ParseOptions & TokensToFunctionOptions,\n) {\n  return tokensToFunction<P>(parse(str, options), options);\n}\n\nexport type PathFunction<P extends object = object> = (data?: P) => string;\n\n/**\n * Expose a method for transforming tokens into the path function.\n */\nexport function tokensToFunction<P extends object = object>(\n  tokens: Token[],\n  options: TokensToFunctionOptions = {},\n): PathFunction<P> {\n  const reFlags = flags(options);\n  const { encode = (x: string) => x, validate = true } = options;\n\n  // Compile all the tokens into regexps.\n  const matches = tokens.map((token) => {\n    if (typeof token === \"object\") {\n      return new RegExp(`^(?:${token.pattern})$`, reFlags);\n    }\n  });\n\n  return (data: Record<string, any> | null | undefined) => {\n    let path = \"\";\n\n    for (let i = 0; i < tokens.length; i++) {\n      const token = tokens[i];\n\n      if (typeof token === \"string\") {\n        path += token;\n        continue;\n      }\n\n      const value = data ? data[token.name] : undefined;\n      const optional = token.modifier === \"?\" || token.modifier === \"*\";\n      const repeat = token.modifier === \"*\" || token.modifier === \"+\";\n\n      if (Array.isArray(value)) {\n        if (!repeat) {\n          throw new TypeError(\n            `Expected \"${token.name}\" to not repeat, but got an array`,\n          );\n        }\n\n        if (value.length === 0) {\n          if (optional) continue;\n\n          throw new TypeError(`Expected \"${token.name}\" to not be empty`);\n        }\n\n        for (let j = 0; j < value.length; j++) {\n          const segment = encode(value[j], token);\n\n          if (validate && !(matches[i] as RegExp).test(segment)) {\n            throw new TypeError(\n              `Expected all \"${token.name}\" to match \"${token.pattern}\", but got \"${segment}\"`,\n            );\n          }\n\n          path += token.prefix + segment + token.suffix;\n        }\n\n        continue;\n      }\n\n      if (typeof value === \"string\" || typeof value === \"number\") {\n        const segment = encode(String(value), token);\n\n        if (validate && !(matches[i] as RegExp).test(segment)) {\n          throw new TypeError(\n            `Expected \"${token.name}\" to match \"${token.pattern}\", but got \"${segment}\"`,\n          );\n        }\n\n        path += token.prefix + segment + token.suffix;\n        continue;\n      }\n\n      if (optional) continue;\n\n      const typeOfMessage = repeat ? \"an array\" : \"a string\";\n      throw new TypeError(`Expected \"${token.name}\" to be ${typeOfMessage}`);\n    }\n\n    return path;\n  };\n}\n\nexport interface RegexpToFunctionOptions {\n  /**\n   * Function for decoding strings for params.\n   */\n  decode?: (value: string, token: Key) => string;\n}\n\n/**\n * A match result contains data about the path match.\n */\nexport interface MatchResult<P extends object = object> {\n  path: string;\n  index: number;\n  params: P;\n}\n\n/**\n * A match is either `false` (no match) or a match result.\n */\nexport type Match<P extends object = object> = false | MatchResult<P>;\n\n/**\n * The match function takes a string and returns whether it matched the path.\n */\nexport type MatchFunction<P extends object = object> = (\n  path: string,\n) => Match<P>;\n\n/**\n * Create path match function from `path-to-regexp` spec.\n */\nexport function match<P extends object = object>(\n  str: Path,\n  options?: ParseOptions & TokensToRegexpOptions & RegexpToFunctionOptions,\n) {\n  const keys: Key[] = [];\n  const re = pathToRegexp(str, keys, options);\n  return regexpToFunction<P>(re, keys, options);\n}\n\n/**\n * Create a path match function from `path-to-regexp` output.\n */\nexport function regexpToFunction<P extends object = object>(\n  re: RegExp,\n  keys: Key[],\n  options: RegexpToFunctionOptions = {},\n): MatchFunction<P> {\n  const { decode = (x: string) => x } = options;\n\n  return function (pathname: string) {\n    const m = re.exec(pathname);\n    if (!m) return false;\n\n    const { 0: path, index } = m;\n    const params = Object.create(null);\n\n    for (let i = 1; i < m.length; i++) {\n      if (m[i] === undefined) continue;\n\n      const key = keys[i - 1];\n\n      if (key.modifier === \"*\" || key.modifier === \"+\") {\n        params[key.name] = m[i].split(key.prefix + key.suffix).map((value) => {\n          return decode(value, key);\n        });\n      } else {\n        params[key.name] = decode(m[i], key);\n      }\n    }\n\n    return { path, index, params };\n  };\n}\n\n/**\n * Escape a regular expression string.\n */\nfunction escapeString(str: string) {\n  return str.replace(/([.+*?=^!:${}()[\\]|/\\\\])/g, \"\\\\$1\");\n}\n\n/**\n * Get the flags for a regexp from the options.\n */\nfunction flags(options?: { sensitive?: boolean }) {\n  return options && options.sensitive ? \"\" : \"i\";\n}\n\n/**\n * Metadata about a key.\n */\nexport interface Key {\n  name: string | number;\n  prefix: string;\n  suffix: string;\n  pattern: string;\n  modifier: string;\n}\n\n/**\n * A token is a string (nothing special) or key metadata (capture group).\n */\nexport type Token = string | Key;\n\n/**\n * Pull out keys from a regexp.\n */\nfunction regexpToRegexp(path: RegExp, keys?: Key[]): RegExp {\n  if (!keys) return path;\n\n  const groupsRegex = /\\((?:\\?<(.*?)>)?(?!\\?)/g;\n\n  let index = 0;\n  let execResult = groupsRegex.exec(path.source);\n  while (execResult) {\n    keys.push({\n      // Use parenthesized substring match if available, index otherwise\n      name: execResult[1] || index++,\n      prefix: \"\",\n      suffix: \"\",\n      modifier: \"\",\n      pattern: \"\",\n    });\n    execResult = groupsRegex.exec(path.source);\n  }\n\n  return path;\n}\n\n/**\n * Transform an array into a regexp.\n */\nfunction arrayToRegexp(\n  paths: Array<string | RegExp>,\n  keys?: Key[],\n  options?: TokensToRegexpOptions & ParseOptions,\n): RegExp {\n  const parts = paths.map((path) => pathToRegexp(path, keys, options).source);\n  return new RegExp(`(?:${parts.join(\"|\")})`, flags(options));\n}\n\n/**\n * Create a path regexp from string input.\n */\nfunction stringToRegexp(\n  path: string,\n  keys?: Key[],\n  options?: TokensToRegexpOptions & ParseOptions,\n) {\n  return tokensToRegexp(parse(path, options), keys, options);\n}\n\nexport interface TokensToRegexpOptions {\n  /**\n   * When `true` the regexp will be case sensitive. (default: `false`)\n   */\n  sensitive?: boolean;\n  /**\n   * When `true` the regexp won't allow an optional trailing delimiter to match. (default: `false`)\n   */\n  strict?: boolean;\n  /**\n   * When `true` the regexp will match to the end of the string. (default: `true`)\n   */\n  end?: boolean;\n  /**\n   * When `true` the regexp will match from the beginning of the string. (default: `true`)\n   */\n  start?: boolean;\n  /**\n   * Sets the final character for non-ending optimistic matches. (default: `/`)\n   */\n  delimiter?: string;\n  /**\n   * List of characters that can also be \"end\" characters.\n   */\n  endsWith?: string;\n  /**\n   * Encode path tokens for use in the `RegExp`.\n   */\n  encode?: (value: string) => string;\n}\n\n/**\n * Expose a function for taking tokens and returning a RegExp.\n */\nexport function tokensToRegexp(\n  tokens: Token[],\n  keys?: Key[],\n  options: TokensToRegexpOptions = {},\n) {\n  const {\n    strict = false,\n    start = true,\n    end = true,\n    encode = (x: string) => x,\n    delimiter = \"/#?\",\n    endsWith = \"\",\n  } = options;\n  const endsWithRe = `[${escapeString(endsWith)}]|$`;\n  const delimiterRe = `[${escapeString(delimiter)}]`;\n  let route = start ? \"^\" : \"\";\n\n  // Iterate over the tokens and create our regexp string.\n  for (const token of tokens) {\n    if (typeof token === \"string\") {\n      route += escapeString(encode(token));\n    } else {\n      const prefix = escapeString(encode(token.prefix));\n      const suffix = escapeString(encode(token.suffix));\n\n      if (token.pattern) {\n        if (keys) keys.push(token);\n\n        if (prefix || suffix) {\n          if (token.modifier === \"+\" || token.modifier === \"*\") {\n            const mod = token.modifier === \"*\" ? \"?\" : \"\";\n            route += `(?:${prefix}((?:${token.pattern})(?:${suffix}${prefix}(?:${token.pattern}))*)${suffix})${mod}`;\n          } else {\n            route += `(?:${prefix}(${token.pattern})${suffix})${token.modifier}`;\n          }\n        } else {\n          if (token.modifier === \"+\" || token.modifier === \"*\") {\n            throw new TypeError(\n              `Can not repeat \"${token.name}\" without a prefix and suffix`,\n            );\n          }\n\n          route += `(${token.pattern})${token.modifier}`;\n        }\n      } else {\n        route += `(?:${prefix}${suffix})${token.modifier}`;\n      }\n    }\n  }\n\n  if (end) {\n    if (!strict) route += `${delimiterRe}?`;\n\n    route += !options.endsWith ? \"$\" : `(?=${endsWithRe})`;\n  } else {\n    const endToken = tokens[tokens.length - 1];\n    const isEndDelimited =\n      typeof endToken === \"string\"\n        ? delimiterRe.indexOf(endToken[endToken.length - 1]) > -1\n        : endToken === undefined;\n\n    if (!strict) {\n      route += `(?:${delimiterRe}(?=${endsWithRe}))?`;\n    }\n\n    if (!isEndDelimited) {\n      route += `(?=${delimiterRe}|${endsWithRe})`;\n    }\n  }\n\n  return new RegExp(route, flags(options));\n}\n\n/**\n * Supported `path-to-regexp` input types.\n */\nexport type Path = string | RegExp | Array<string | RegExp>;\n\n/**\n * Normalize the given path string, returning a regular expression.\n *\n * An empty array can be passed in for the keys, which will hold the\n * placeholder key descriptions. For example, using `/user/:id`, `keys` will\n * contain `[{ name: 'id', delimiter: '/', optional: false, repeat: false }]`.\n */\nexport function pathToRegexp(\n  path: Path,\n  keys?: Key[],\n  options?: TokensToRegexpOptions & ParseOptions,\n) {\n  if (path instanceof RegExp) return regexpToRegexp(path, keys);\n  if (Array.isArray(path)) return arrayToRegexp(path, keys, options);\n  return stringToRegexp(path, keys, options);\n}\n","import { parse, tokensToFunction } from \"path-to-regexp\";\nimport Resolver from \"./resolver.js\";\nimport { getRoutePath, isString } from \"./utils.js\";\nfunction cacheRoutes(routesByName, route, routes, cacheKeyProvider) {\n  const name = route.name ?? cacheKeyProvider?.(route);\n  if (name) {\n    if (routesByName.has(name)) {\n      routesByName.get(name)?.push(route);\n    } else {\n      routesByName.set(name, [route]);\n    }\n  }\n  if (Array.isArray(routes)) {\n    for (const childRoute of routes) {\n      childRoute.parent = route;\n      cacheRoutes(routesByName, childRoute, childRoute.__children ?? childRoute.children, cacheKeyProvider);\n    }\n  }\n}\nfunction getRouteByName(routesByName, routeName) {\n  const routes = routesByName.get(routeName);\n  if (routes) {\n    if (routes.length > 1) {\n      throw new Error(`Duplicate route with name \"${routeName}\". Try seting unique 'name' route properties.`);\n    }\n    return routes[0];\n  }\n  return void 0;\n}\nfunction generateUrls(resolver, options = {}) {\n  if (!(resolver instanceof Resolver)) {\n    throw new TypeError(\"An instance of Resolver is expected\");\n  }\n  const cache = /* @__PURE__ */ new Map();\n  const routesByName = /* @__PURE__ */ new Map();\n  return (routeName, params) => {\n    let route = getRouteByName(routesByName, routeName);\n    if (!route) {\n      routesByName.clear();\n      cacheRoutes(routesByName, resolver.root, resolver.root.__children, options.cacheKeyProvider);\n      route = getRouteByName(routesByName, routeName);\n      if (!route) {\n        throw new Error(`Route \"${routeName}\" not found`);\n      }\n    }\n    let cached = route.fullPath ? cache.get(route.fullPath) : void 0;\n    if (!cached) {\n      let fullPath = getRoutePath(route);\n      let rt = route.parent;\n      while (rt) {\n        const path = getRoutePath(rt);\n        if (path) {\n          fullPath = `${path.replace(/\\/$/u, \"\")}/${fullPath.replace(/^\\//u, \"\")}`;\n        }\n        rt = rt.parent;\n      }\n      const tokens = parse(fullPath);\n      const keys = /* @__PURE__ */ Object.create(null);\n      for (const item of tokens) {\n        if (!isString(item)) {\n          keys[item.name] = true;\n        }\n      }\n      cached = { keys, tokens };\n      cache.set(fullPath, cached);\n      route.fullPath = fullPath;\n    }\n    const toPath = tokensToFunction(cached.tokens, { encode: encodeURIComponent, ...options });\n    let url = toPath(params) || \"/\";\n    if (options.stringifyQueryParams && params) {\n      const queryParams = {};\n      for (const [key, value] of Object.entries(params)) {\n        if (!(key in cached.keys) && value) {\n          queryParams[key] = value;\n        }\n      }\n      const query = options.stringifyQueryParams(queryParams);\n      if (query) {\n        url += query.startsWith(\"?\") ? query : `?${query}`;\n      }\n    }\n    return url;\n  };\n}\nvar generateUrls_default = generateUrls;\nexport {\n  generateUrls_default as default\n};\n//# sourceMappingURL=generateUrls.js.map\n","/**\r\n * Universal Router (https://www.kriasoft.com/universal-router/)\r\n *\r\n * Copyright (c) 2015-present Kriasoft.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE.txt file in the root directory of this source tree.\r\n */\r\n\r\nimport { parse, type ParseOptions, type Token, tokensToFunction, type TokensToFunctionOptions } from 'path-to-regexp';\r\nimport type { EmptyObject, Writable } from 'type-fest';\r\nimport Resolver from './resolver.js';\r\nimport type { AnyObject, ChildrenCallback, IndexedParams, Params, Route } from './types.js';\r\nimport { getRoutePath, isString } from './utils.js';\r\n\r\nexport type UrlParams = Readonly<Record<string, ReadonlyArray<number | string> | number | string>>;\r\n\r\nfunction cacheRoutes<T, R extends AnyObject, C extends AnyObject>(\r\n  routesByName: Map<string, Array<Route<T, R, C>>>,\r\n  route: Route<T, R, C>,\r\n  routes?: ReadonlyArray<Route<T, R, C>> | ChildrenCallback<T, R, C>,\r\n  cacheKeyProvider?: (route: Route<T, R, C>) => string | undefined,\r\n): void {\r\n  const name = route.name ?? cacheKeyProvider?.(route);\r\n  if (name) {\r\n    if (routesByName.has(name)) {\r\n      routesByName.get(name)?.push(route);\r\n    } else {\r\n      routesByName.set(name, [route]);\r\n    }\r\n  }\r\n\r\n  if (Array.isArray(routes)) {\r\n    for (const childRoute of routes) {\r\n      childRoute.parent = route;\r\n      cacheRoutes(routesByName, childRoute, childRoute.__children ?? childRoute.children, cacheKeyProvider);\r\n    }\r\n  }\r\n}\r\n\r\nfunction getRouteByName<T, R extends AnyObject, C extends AnyObject>(\r\n  routesByName: Map<string, Array<Route<T, R, C>>>,\r\n  routeName: string,\r\n): Route<T, R, C> | undefined {\r\n  const routes = routesByName.get(routeName);\r\n\r\n  if (routes) {\r\n    if (routes.length > 1) {\r\n      throw new Error(`Duplicate route with name \"${routeName}\".` + ` Try seting unique 'name' route properties.`);\r\n    }\r\n\r\n    return routes[0];\r\n  }\r\n\r\n  return undefined;\r\n}\r\n\r\nexport type StringifyQueryParams = (params: UrlParams) => string;\r\n\r\nexport type GenerateUrlOptions<T, R extends AnyObject, C extends AnyObject> = ParseOptions &\r\n  Readonly<{\r\n    /**\r\n     * Add a query string to generated url based on unknown route params.\r\n     */\r\n    stringifyQueryParams?: StringifyQueryParams;\r\n    /**\r\n     * Generates a unique route name based on all parent routes with the specified separator.\r\n     */\r\n    uniqueRouteNameSep?: string;\r\n    cacheKeyProvider?(route: Route<T, R, C>): string | undefined;\r\n  }> &\r\n  TokensToFunctionOptions;\r\n\r\ntype RouteCacheRecord = Readonly<{\r\n  keys: Record<string, true>;\r\n  tokens: Token[];\r\n}>;\r\n\r\nexport type UrlGenerator = (routeName: string, params?: Params) => string;\r\n\r\nfunction generateUrls<T = unknown, R extends AnyObject = EmptyObject, C extends AnyObject = EmptyObject>(\r\n  resolver: Resolver<T, R, C>,\r\n  options: GenerateUrlOptions<T, R, C> = {},\r\n): UrlGenerator {\r\n  if (!(resolver instanceof Resolver)) {\r\n    throw new TypeError('An instance of Resolver is expected');\r\n  }\r\n\r\n  const cache = new Map<string, RouteCacheRecord>();\r\n  const routesByName = new Map<string, Array<Route<T, R, C>>>();\r\n\r\n  return (routeName, params) => {\r\n    let route = getRouteByName(routesByName, routeName);\r\n    if (!route) {\r\n      routesByName.clear(); // clear cache\r\n      cacheRoutes(routesByName, resolver.root, resolver.root.__children, options.cacheKeyProvider);\r\n\r\n      route = getRouteByName(routesByName, routeName);\r\n      if (!route) {\r\n        throw new Error(`Route \"${routeName}\" not found`);\r\n      }\r\n    }\r\n\r\n    let cached: RouteCacheRecord | undefined = route.fullPath ? cache.get(route.fullPath) : undefined;\r\n    if (!cached) {\r\n      let fullPath = getRoutePath(route);\r\n      let rt = route.parent;\r\n      while (rt) {\r\n        const path = getRoutePath(rt);\r\n        if (path) {\r\n          fullPath = `${path.replace(/\\/$/u, '')}/${fullPath.replace(/^\\//u, '')}`;\r\n        }\r\n        rt = rt.parent;\r\n      }\r\n      const tokens = parse(fullPath);\r\n      const keys: Record<string, true> = Object.create(null);\r\n      for (const item of tokens) {\r\n        if (!isString(item)) {\r\n          keys[item.name] = true;\r\n        }\r\n      }\r\n      cached = { keys, tokens };\r\n      cache.set(fullPath, cached);\r\n      route.fullPath = fullPath;\r\n    }\r\n\r\n    const toPath = tokensToFunction(cached.tokens, { encode: encodeURIComponent, ...options });\r\n    let url = toPath(params) || '/';\r\n\r\n    if (options.stringifyQueryParams && params) {\r\n      const queryParams: Writable<IndexedParams> = {};\r\n      for (const [key, value] of Object.entries(params)) {\r\n        if (!(key in cached.keys) && value) {\r\n          queryParams[key] = value;\r\n        }\r\n      }\r\n      const query = options.stringifyQueryParams(queryParams as UrlParams);\r\n      if (query) {\r\n        url += query.startsWith('?') ? query : `?${query}`;\r\n      }\r\n    }\r\n\r\n    return url;\r\n  };\r\n}\r\n\r\nexport default generateUrls;\r\n","import matchRoute, {} from \"./matchRoute.js\";\nimport defaultResolveRoute from \"./resolveRoute.js\";\nimport { getNotFoundError, getRoutePath, isString, NotFoundError, notFoundResult, toArray } from \"./utils.js\";\nfunction isDescendantRoute(route, maybeParent) {\n  let _route = route;\n  while (_route) {\n    _route = _route.parent;\n    if (_route === maybeParent) {\n      return true;\n    }\n  }\n  return false;\n}\nfunction isRouteContext(value) {\n  return !!value && typeof value === \"object\" && \"next\" in value && \"params\" in value && \"result\" in value && \"route\" in value;\n}\nclass ResolutionError extends Error {\n  code;\n  context;\n  constructor(context, options) {\n    let errorMessage = `Path '${context.pathname}' is not properly resolved due to an error.`;\n    const routePath = getRoutePath(context.route);\n    if (routePath) {\n      errorMessage += ` Resolution had failed on route: '${routePath}'`;\n    }\n    super(errorMessage, options);\n    this.code = options?.code;\n    this.context = context;\n  }\n  warn() {\n    console.warn(this.message);\n  }\n}\nfunction updateChainForRoute(context, match) {\n  const { path, route } = match;\n  if (route && !route.__synthetic) {\n    const item = { path, route };\n    if (route.parent && context.chain) {\n      for (let i = context.chain.length - 1; i >= 0; i--) {\n        if (context.chain[i].route === route.parent) {\n          break;\n        }\n        context.chain.pop();\n      }\n    }\n    context.chain?.push(item);\n  }\n}\nclass Resolver {\n  /**\n   * The base URL for all routes in the router instance. By default,\n   * if the base element exists in the `<head>`, vaadin-router\n   * takes the `<base href>` attribute value, resolved against the current\n   * `document.URL`.\n   */\n  baseUrl;\n  #context;\n  errorHandler;\n  resolveRoute;\n  #root;\n  constructor(routes, { baseUrl = \"\", context, errorHandler, resolveRoute = defaultResolveRoute } = {}) {\n    if (Object(routes) !== routes) {\n      throw new TypeError(\"Invalid routes\");\n    }\n    this.baseUrl = baseUrl;\n    this.errorHandler = errorHandler;\n    this.resolveRoute = resolveRoute;\n    if (Array.isArray(routes)) {\n      this.#root = {\n        __children: routes,\n        __synthetic: true,\n        action: () => void 0,\n        path: \"\"\n      };\n    } else {\n      this.#root = { ...routes, parent: void 0 };\n    }\n    this.#context = {\n      ...context,\n      hash: \"\",\n      // eslint-disable-next-line @typescript-eslint/require-await\n      async next() {\n        return notFoundResult;\n      },\n      params: {},\n      pathname: \"\",\n      resolver: this,\n      route: this.#root,\n      search: \"\",\n      chain: []\n    };\n  }\n  get root() {\n    return this.#root;\n  }\n  get context() {\n    return this.#context;\n  }\n  /**\n   * If the baseUrl property is set, transforms the baseUrl and returns the full\n   * actual `base` string for using in the `new URL(path, base);` and for\n   * prepernding the paths with. The returned base ends with a trailing slash.\n   *\n   * Otherwise, returns empty string.\n   */\n  get __effectiveBaseUrl() {\n    return this.baseUrl ? new URL(this.baseUrl, document.baseURI || document.URL).href.replace(/[^/]*$/u, \"\") : \"\";\n  }\n  /**\n   * Returns the current list of routes (as a shallow copy). Adding / removing\n   * routes to / from the returned array does not affect the routing config,\n   * but modifying the route objects does.\n   *\n   * @public\n   */\n  getRoutes() {\n    return [...this.#root.__children ?? []];\n  }\n  /**\n   * Removes all existing routes from the routing config.\n   *\n   * @public\n   */\n  removeRoutes() {\n    this.#root.__children = [];\n  }\n  /**\n   * Asynchronously resolves the given pathname, i.e. finds all routes matching\n   * the pathname and tries resolving them one after another in the order they\n   * are listed in the routes config until the first non-null result.\n   *\n   * Returns a promise that is fulfilled with the return value of an object that consists of the first\n   * route handler result that returns something other than `null` or `undefined` and context used to get this result.\n   *\n   * If no route handlers return a non-null result, or if no route matches the\n   * given pathname the returned promise is rejected with a 'page not found'\n   * `Error`.\n   *\n   * @param pathnameOrContext - the pathname to\n   *    resolve or a context object with a `pathname` property and other\n   *    properties to pass to the route resolver functions.\n   */\n  async resolve(pathnameOrContext) {\n    const self = this;\n    const context = {\n      ...this.#context,\n      ...isString(pathnameOrContext) ? { pathname: pathnameOrContext } : pathnameOrContext,\n      // eslint-disable-next-line @typescript-eslint/no-use-before-define\n      next\n    };\n    const match = matchRoute(\n      this.#root,\n      this.__normalizePathname(context.pathname) ?? context.pathname,\n      !!this.baseUrl\n    );\n    const resolve = this.resolveRoute;\n    let matches = null;\n    let nextMatches = null;\n    let currentContext = context;\n    async function next(resume = false, parent = matches?.value?.route, prevResult) {\n      const routeToSkip = prevResult === null ? matches?.value?.route : void 0;\n      matches = nextMatches ?? match.next(routeToSkip);\n      nextMatches = null;\n      if (!resume) {\n        if (!!matches.done || !isDescendantRoute(matches.value.route, parent)) {\n          nextMatches = matches;\n          return notFoundResult;\n        }\n      }\n      if (matches.done) {\n        throw getNotFoundError(context);\n      }\n      currentContext = {\n        ...context,\n        params: matches.value.params,\n        route: matches.value.route,\n        chain: currentContext.chain?.slice()\n      };\n      updateChainForRoute(currentContext, matches.value);\n      const resolution = await resolve(currentContext);\n      if (resolution !== null && resolution !== void 0 && resolution !== notFoundResult) {\n        currentContext.result = isRouteContext(resolution) ? resolution.result : resolution;\n        self.#context = currentContext;\n        return currentContext;\n      }\n      return await next(resume, parent, resolution);\n    }\n    try {\n      return await next(true, this.#root);\n    } catch (error) {\n      const _error = error instanceof NotFoundError ? error : new ResolutionError(currentContext, { code: 500, cause: error });\n      if (this.errorHandler) {\n        currentContext.result = this.errorHandler(_error);\n        return currentContext;\n      }\n      throw error;\n    }\n  }\n  /**\n   * Sets the routing config (replacing the existing one).\n   *\n   * @param routes - a single route or an array of those\n   *    (the array is shallow copied)\n   */\n  setRoutes(routes) {\n    this.#root.__children = [...toArray(routes)];\n  }\n  /**\n   * If the baseUrl is set, matches the pathname with the routers baseUrl,\n   * and returns the local pathname with the baseUrl stripped out.\n   *\n   * If the pathname does not match the baseUrl, returns undefined.\n   *\n   * If the `baseUrl` is not set, returns the unmodified pathname argument.\n   */\n  __normalizePathname(pathname) {\n    if (!this.baseUrl) {\n      return pathname;\n    }\n    const base = this.__effectiveBaseUrl;\n    const url = pathname.startsWith(\"/\") ? new URL(base).origin + pathname : `./${pathname}`;\n    const normalizedUrl = new URL(url, base).href;\n    if (normalizedUrl.startsWith(base)) {\n      return normalizedUrl.slice(base.length);\n    }\n    return void 0;\n  }\n  /**\n   * Appends one or several routes to the routing config and returns the\n   * effective routing config after the operation.\n   *\n   * @param routes - a single route or an array of those\n   *    (the array is shallow copied)\n   */\n  addRoutes(routes) {\n    this.#root.__children = [...this.#root.__children ?? [], ...toArray(routes)];\n    return this.getRoutes();\n  }\n}\nexport {\n  ResolutionError,\n  Resolver as default\n};\n//# sourceMappingURL=resolver.js.map\n","/**\r\n * Universal Router (https://www.kriasoft.com/universal-router/)\r\n *\r\n * Copyright (c) 2015-present Kriasoft.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE.txt file in the root directory of this source tree.\r\n */\r\nimport type { EmptyObject } from 'type-fest';\r\nimport matchRoute, { type MatchWithRoute } from './matchRoute.js';\r\nimport defaultResolveRoute from './resolveRoute.js';\r\nimport type {\r\n  ActionResult,\r\n  AnyObject,\r\n  BasicRoutePart,\r\n  Match,\r\n  MaybePromise,\r\n  ResolveContext,\r\n  Route,\r\n  RouteContext,\r\n} from './types.js';\r\nimport { getNotFoundError, getRoutePath, isString, NotFoundError, notFoundResult, toArray } from './utils.js';\r\n\r\nfunction isDescendantRoute<T, R extends AnyObject, C extends AnyObject>(\r\n  route?: Route<T, R, C>,\r\n  maybeParent?: Route<T, R, C>,\r\n) {\r\n  let _route = route;\r\n  while (_route) {\r\n    _route = _route.parent;\r\n    if (_route === maybeParent) {\r\n      return true;\r\n    }\r\n  }\r\n  return false;\r\n}\r\n\r\nfunction isRouteContext<T, R extends AnyObject, C extends AnyObject>(value: unknown): value is RouteContext<T, R, C> {\r\n  return (\r\n    !!value &&\r\n    typeof value === 'object' &&\r\n    'next' in value &&\r\n    'params' in value &&\r\n    'result' in value &&\r\n    'route' in value\r\n  );\r\n}\r\n\r\nexport interface ResolutionErrorOptions extends ErrorOptions {\r\n  code?: number;\r\n}\r\n\r\nexport class ResolutionError<T, R extends AnyObject = EmptyObject, C extends AnyObject = EmptyObject> extends Error {\r\n  readonly code?: number;\r\n  readonly context: RouteContext<T, R, C>;\r\n\r\n  constructor(context: RouteContext<T, R, C>, options?: ResolutionErrorOptions) {\r\n    let errorMessage = `Path '${context.pathname}' is not properly resolved due to an error.`;\r\n    const routePath = getRoutePath(context.route);\r\n    if (routePath) {\r\n      errorMessage += ` Resolution had failed on route: '${routePath}'`;\r\n    }\r\n    super(errorMessage, options);\r\n    this.code = options?.code;\r\n    this.context = context;\r\n  }\r\n\r\n  warn(): void {\r\n    console.warn(this.message);\r\n  }\r\n}\r\n\r\nfunction updateChainForRoute<T, R extends AnyObject, C extends AnyObject>(\r\n  context: RouteContext<T, R, C>,\r\n  match: Match<T, R, C>,\r\n) {\r\n  const { path, route } = match;\r\n\r\n  if (route && !route.__synthetic) {\r\n    const item = { path, route };\r\n    if (route.parent && context.chain) {\r\n      for (let i = context.chain.length - 1; i >= 0; i--) {\r\n        if (context.chain[i].route === route.parent) {\r\n          break;\r\n        }\r\n\r\n        context.chain.pop();\r\n      }\r\n    }\r\n    context.chain?.push(item);\r\n  }\r\n}\r\n\r\nexport type ErrorHandlerCallback<T> = (error: unknown) => T;\r\n\r\nexport type ResolveRouteCallback<T, R extends AnyObject, C extends AnyObject> = (\r\n  context: RouteContext<T, R, C>,\r\n) => MaybePromise<ActionResult<T | RouteContext<T, R, C>>>;\r\n\r\nexport type ResolverOptions<T, R extends AnyObject, C extends AnyObject> = Readonly<{\r\n  baseUrl?: string;\r\n  context?: RouteContext<T, R, C>;\r\n  errorHandler?: ErrorHandlerCallback<T>;\r\n  resolveRoute?: ResolveRouteCallback<T, R, C>;\r\n}>;\r\n\r\nexport default class Resolver<T = unknown, R extends AnyObject = EmptyObject, C extends AnyObject = EmptyObject> {\r\n  /**\r\n   * The base URL for all routes in the router instance. By default,\r\n   * if the base element exists in the `<head>`, vaadin-router\r\n   * takes the `<base href>` attribute value, resolved against the current\r\n   * `document.URL`.\r\n   */\r\n  readonly baseUrl: string;\r\n  #context: RouteContext<T, R, C>;\r\n  readonly errorHandler?: ErrorHandlerCallback<T>;\r\n  readonly resolveRoute: ResolveRouteCallback<T, R, C>;\r\n  readonly #root: BasicRoutePart<T, R, C>;\r\n\r\n  constructor(routes: ReadonlyArray<Route<T, R, C>> | Route<T, R, C>, options?: ResolverOptions<T, R, C>);\r\n  constructor(\r\n    routes: ReadonlyArray<Route<T, R, C>> | Route<T, R, C>,\r\n    { baseUrl = '', context, errorHandler, resolveRoute = defaultResolveRoute }: ResolverOptions<T, R, C> = {},\r\n  ) {\r\n    if (Object(routes) !== routes) {\r\n      throw new TypeError('Invalid routes');\r\n    }\r\n\r\n    this.baseUrl = baseUrl;\r\n    this.errorHandler = errorHandler;\r\n    this.resolveRoute = resolveRoute;\r\n\r\n    if (Array.isArray(routes)) {\r\n      // @FIXME: We should have a route array instead of a single route object\r\n      // to avoid type clash because of a missing `R` part of a route.\r\n      // eslint-disable-next-line @typescript-eslint/consistent-type-assertions\r\n      this.#root = {\r\n        __children: routes,\r\n        __synthetic: true,\r\n        action: () => undefined,\r\n        path: '',\r\n      };\r\n    } else {\r\n      this.#root = { ...routes, parent: undefined };\r\n    }\r\n\r\n    this.#context = {\r\n      ...context!,\r\n      hash: '',\r\n      // eslint-disable-next-line @typescript-eslint/require-await\r\n      async next() {\r\n        return notFoundResult;\r\n      },\r\n      params: {},\r\n      pathname: '',\r\n      resolver: this,\r\n      route: this.#root as Route<T, R, C>,\r\n      search: '',\r\n      chain: [],\r\n    };\r\n  }\r\n\r\n  get root(): Route<T, R, C> {\r\n    return this.#root as Route<T, R, C>;\r\n  }\r\n\r\n  get context(): RouteContext<T, R, C> {\r\n    return this.#context;\r\n  }\r\n\r\n  /**\r\n   * If the baseUrl property is set, transforms the baseUrl and returns the full\r\n   * actual `base` string for using in the `new URL(path, base);` and for\r\n   * prepernding the paths with. The returned base ends with a trailing slash.\r\n   *\r\n   * Otherwise, returns empty string.\r\n   */\r\n  protected get __effectiveBaseUrl(): string {\r\n    return this.baseUrl ? new URL(this.baseUrl, document.baseURI || document.URL).href.replace(/[^/]*$/u, '') : '';\r\n  }\r\n\r\n  /**\r\n   * Returns the current list of routes (as a shallow copy). Adding / removing\r\n   * routes to / from the returned array does not affect the routing config,\r\n   * but modifying the route objects does.\r\n   *\r\n   * @public\r\n   */\r\n  getRoutes(): ReadonlyArray<Route<T, R, C>> {\r\n    return [...(this.#root.__children ?? [])];\r\n  }\r\n\r\n  /**\r\n   * Removes all existing routes from the routing config.\r\n   *\r\n   * @public\r\n   */\r\n  removeRoutes(): void {\r\n    this.#root.__children = [];\r\n  }\r\n\r\n  /**\r\n   * Asynchronously resolves the given pathname, i.e. finds all routes matching\r\n   * the pathname and tries resolving them one after another in the order they\r\n   * are listed in the routes config until the first non-null result.\r\n   *\r\n   * Returns a promise that is fulfilled with the return value of an object that consists of the first\r\n   * route handler result that returns something other than `null` or `undefined` and context used to get this result.\r\n   *\r\n   * If no route handlers return a non-null result, or if no route matches the\r\n   * given pathname the returned promise is rejected with a 'page not found'\r\n   * `Error`.\r\n   *\r\n   * @param pathnameOrContext - the pathname to\r\n   *    resolve or a context object with a `pathname` property and other\r\n   *    properties to pass to the route resolver functions.\r\n   */\r\n  async resolve(pathnameOrContext: ResolveContext<C> | string): Promise<ActionResult<RouteContext<T, R, C>>> {\r\n    const self = this;\r\n    const context: RouteContext<T, R, C> = {\r\n      ...this.#context,\r\n      ...(isString(pathnameOrContext) ? { pathname: pathnameOrContext } : pathnameOrContext),\r\n      // eslint-disable-next-line @typescript-eslint/no-use-before-define\r\n      next,\r\n    };\r\n    const match = matchRoute(\r\n      this.#root as Route<T, R, C>,\r\n      this.__normalizePathname(context.pathname) ?? context.pathname,\r\n      !!this.baseUrl,\r\n    );\r\n    const resolve = this.resolveRoute;\r\n    let matches: IteratorResult<MatchWithRoute<T, R, C>, undefined> | null = null;\r\n    let nextMatches: IteratorResult<MatchWithRoute<T, R, C>, undefined> | null = null;\r\n    let currentContext = context;\r\n\r\n    async function next(\r\n      resume: boolean = false,\r\n      parent: Route<T, R, C> | undefined = matches?.value?.route,\r\n      prevResult?: ActionResult<T | RouteContext<T, R, C>>,\r\n    ): Promise<ActionResult<RouteContext<T, R, C>>> {\r\n      const routeToSkip = prevResult === null ? matches?.value?.route : undefined;\r\n      matches = nextMatches ?? match.next(routeToSkip);\r\n      nextMatches = null;\r\n\r\n      if (!resume) {\r\n        if (!!matches.done || !isDescendantRoute(matches.value.route, parent)) {\r\n          nextMatches = matches;\r\n          return notFoundResult;\r\n        }\r\n      }\r\n\r\n      if (matches.done) {\r\n        throw getNotFoundError(context);\r\n      }\r\n\r\n      currentContext = {\r\n        ...context,\r\n        params: matches.value.params,\r\n        route: matches.value.route,\r\n        chain: currentContext.chain?.slice(),\r\n      };\r\n      updateChainForRoute(currentContext, matches.value);\r\n\r\n      const resolution = await resolve(currentContext);\r\n\r\n      if (resolution !== null && resolution !== undefined && resolution !== notFoundResult) {\r\n        currentContext.result = isRouteContext<T, R, C>(resolution) ? resolution.result : resolution;\r\n        self.#context = currentContext;\r\n        return currentContext;\r\n      }\r\n      return await next(resume, parent, resolution);\r\n    }\r\n\r\n    try {\r\n      return await next(true, this.#root as Route<T, R, C>);\r\n    } catch (error: unknown) {\r\n      const _error =\r\n        error instanceof NotFoundError\r\n          ? error\r\n          : new ResolutionError(currentContext as RouteContext<R>, { code: 500, cause: error });\r\n\r\n      if (this.errorHandler) {\r\n        currentContext.result = this.errorHandler(_error);\r\n        return currentContext;\r\n      }\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Sets the routing config (replacing the existing one).\r\n   *\r\n   * @param routes - a single route or an array of those\r\n   *    (the array is shallow copied)\r\n   */\r\n  setRoutes(routes: ReadonlyArray<Route<T, R, C>> | Route<T, R, C>): void {\r\n    this.#root.__children = [...toArray(routes)];\r\n  }\r\n\r\n  /**\r\n   * If the baseUrl is set, matches the pathname with the routers baseUrl,\r\n   * and returns the local pathname with the baseUrl stripped out.\r\n   *\r\n   * If the pathname does not match the baseUrl, returns undefined.\r\n   *\r\n   * If the `baseUrl` is not set, returns the unmodified pathname argument.\r\n   */\r\n  protected __normalizePathname(pathname: string): string | undefined {\r\n    if (!this.baseUrl) {\r\n      // No base URL, no need to transform the pathname.\r\n      return pathname;\r\n    }\r\n\r\n    const base = this.__effectiveBaseUrl;\r\n    // Convert pathname to a valid URL constructor argument\r\n    const url = pathname.startsWith('/') ? new URL(base).origin + pathname : `./${pathname}`;\r\n    const normalizedUrl = new URL(url, base).href;\r\n    if (normalizedUrl.startsWith(base)) {\r\n      return normalizedUrl.slice(base.length);\r\n    }\r\n\r\n    return undefined;\r\n  }\r\n\r\n  /**\r\n   * Appends one or several routes to the routing config and returns the\r\n   * effective routing config after the operation.\r\n   *\r\n   * @param routes - a single route or an array of those\r\n   *    (the array is shallow copied)\r\n   */\r\n  protected addRoutes(routes: ReadonlyArray<Route<T, R, C>> | Route<T, R, C>): ReadonlyArray<Route<T, R, C>> {\r\n    this.#root.__children = [...(this.#root.__children ?? []), ...toArray(routes)];\r\n    return this.getRoutes();\r\n  }\r\n}\r\n","import matchPath, {} from \"./matchPath.js\";\nimport { getRoutePath, unwrapChildren } from \"./utils.js\";\nfunction matchRoute(route, pathname, ignoreLeadingSlash, parentKeys, parentParams) {\n  let match;\n  let childMatches;\n  let childIndex = 0;\n  let routepath = getRoutePath(route);\n  if (routepath.startsWith(\"/\")) {\n    if (ignoreLeadingSlash) {\n      routepath = routepath.substring(1);\n    }\n    ignoreLeadingSlash = true;\n  }\n  return {\n    next(routeToSkip) {\n      if (route === routeToSkip) {\n        return { done: true, value: void 0 };\n      }\n      route.__children ??= unwrapChildren(route.children);\n      const children = route.__children ?? [];\n      const exact = !route.__children && !route.children;\n      if (!match) {\n        match = matchPath(routepath, pathname, exact, parentKeys, parentParams);\n        if (match) {\n          return {\n            value: {\n              keys: match.keys,\n              params: match.params,\n              path: match.path,\n              route\n            }\n          };\n        }\n      }\n      if (match && children.length > 0) {\n        while (childIndex < children.length) {\n          if (!childMatches) {\n            const childRoute = children[childIndex];\n            childRoute.parent = route;\n            let matchedLength = match.path.length;\n            if (matchedLength > 0 && pathname.charAt(matchedLength) === \"/\") {\n              matchedLength += 1;\n            }\n            childMatches = matchRoute(\n              childRoute,\n              pathname.substring(matchedLength),\n              ignoreLeadingSlash,\n              match.keys,\n              match.params\n            );\n          }\n          const childMatch = childMatches.next(routeToSkip);\n          if (!childMatch.done) {\n            return {\n              done: false,\n              value: childMatch.value\n            };\n          }\n          childMatches = null;\n          childIndex += 1;\n        }\n      }\n      return { done: true, value: void 0 };\n    }\n  };\n}\nvar matchRoute_default = matchRoute;\nexport {\n  matchRoute_default as default\n};\n//# sourceMappingURL=matchRoute.js.map\n","/**\r\n * Universal Router (https://www.kriasoft.com/universal-router/)\r\n *\r\n * Copyright (c) 2015-present Kriasoft.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE.txt file in the root directory of this source tree.\r\n */\r\n\r\nimport type { Key } from 'path-to-regexp';\r\nimport matchPath, { type Match } from './matchPath.js';\r\nimport type { AnyObject, IndexedParams, Route } from './types.js';\r\nimport { getRoutePath, unwrapChildren } from './utils.js';\r\n\r\nexport type MatchWithRoute<T, R extends AnyObject, C extends AnyObject> = Match &\r\n  Readonly<{\r\n    route: Route<T, R, C>;\r\n  }>;\r\n\r\ntype RouteMatchIterator<T, R extends AnyObject, C extends AnyObject> = Iterator<\r\n  MatchWithRoute<T, R, C>,\r\n  undefined,\r\n  Route<T, R, C> | undefined\r\n>;\r\n\r\n/**\r\n * Traverses the routes tree and matches its nodes to the given pathname from\r\n * the root down to the leaves. Each match consumes a part of the pathname and\r\n * the matching process continues for as long as there is a matching child\r\n * route for the remaining part of the pathname.\r\n *\r\n * The returned value is a lazily evaluated iterator.\r\n *\r\n * The leading \"/\" in a route path matters only for the root of the routes\r\n * tree (or if all parent routes are \"\"). In all other cases a leading \"/\" in\r\n * a child route path has no significance.\r\n *\r\n * The trailing \"/\" in a _route path_ matters only for the leaves of the\r\n * routes tree. A leaf route with a trailing \"/\" matches only a pathname that\r\n * also has a trailing \"/\".\r\n *\r\n * The trailing \"/\" in a route path does not affect matching of child routes\r\n * in any way.\r\n *\r\n * The trailing \"/\" in a _pathname_ generally does not matter (except for\r\n * the case of leaf nodes described above).\r\n *\r\n * The \"\" and \"/\" routes have special treatment:\r\n *  1. as a single route\r\n *     the \"\" and \"/\" routes match only the \"\" and \"/\" pathnames respectively\r\n *  2. as a parent in the routes tree\r\n *     the \"\" route matches any pathname without consuming any part of it\r\n *     the \"/\" route matches any absolute pathname consuming its leading \"/\"\r\n *  3. as a leaf in the routes tree\r\n *     the \"\" and \"/\" routes match only if the entire pathname is consumed by\r\n *         the parent routes chain. In this case \"\" and \"/\" are equivalent.\r\n *  4. several directly nested \"\" or \"/\" routes\r\n *     - directly nested \"\" or \"/\" routes are 'squashed' (i.e. nesting two\r\n *       \"/\" routes does not require a double \"/\" in the pathname to match)\r\n *     - if there are only \"\" in the parent routes chain, no part of the\r\n *       pathname is consumed, and the leading \"/\" in the child routes' paths\r\n *       remains significant\r\n *\r\n * Side effect:\r\n *   - the routes tree `{ path: '' }` matches only the '' pathname\r\n *   - the routes tree `{ path: '', children: [ { path: '' } ] }` matches any\r\n *     pathname (for the tree root)\r\n *\r\n * Prefix matching can be enabled also by `children: true`.\r\n */\r\n// eslint-disable-next-line @typescript-eslint/max-params\r\nfunction matchRoute<T, R extends AnyObject, C extends AnyObject>(\r\n  route: Route<T, R, C>,\r\n  pathname: string,\r\n  ignoreLeadingSlash?: boolean,\r\n  parentKeys?: readonly Key[],\r\n  parentParams?: IndexedParams,\r\n): Iterator<MatchWithRoute<T, R, C>, undefined, Route<T, R, C> | undefined> {\r\n  let match: Match | null;\r\n  let childMatches: RouteMatchIterator<T, R, C> | null;\r\n  let childIndex = 0;\r\n  let routepath = getRoutePath(route);\r\n  if (routepath.startsWith('/')) {\r\n    if (ignoreLeadingSlash) {\r\n      routepath = routepath.substring(1);\r\n    }\r\n    // eslint-disable-next-line no-param-reassign\r\n    ignoreLeadingSlash = true;\r\n  }\r\n\r\n  return {\r\n    next(routeToSkip?: Route<T, R, C>): IteratorResult<MatchWithRoute<T, R, C>, undefined> {\r\n      if (route === routeToSkip) {\r\n        return { done: true, value: undefined };\r\n      }\r\n\r\n      route.__children ??= unwrapChildren(route.children);\r\n      const children = route.__children ?? [];\r\n      const exact = !route.__children && !route.children;\r\n\r\n      if (!match) {\r\n        match = matchPath(routepath, pathname, exact, parentKeys, parentParams);\r\n\r\n        if (match) {\r\n          return {\r\n            value: {\r\n              keys: match.keys,\r\n              params: match.params,\r\n              path: match.path,\r\n              route,\r\n            },\r\n          };\r\n        }\r\n      }\r\n\r\n      if (match && children.length > 0) {\r\n        while (childIndex < children.length) {\r\n          if (!childMatches) {\r\n            const childRoute = children[childIndex];\r\n            childRoute.parent = route;\r\n\r\n            let matchedLength = match.path.length;\r\n            if (matchedLength > 0 && pathname.charAt(matchedLength) === '/') {\r\n              matchedLength += 1;\r\n            }\r\n\r\n            childMatches = matchRoute(\r\n              childRoute,\r\n              pathname.substring(matchedLength),\r\n              ignoreLeadingSlash,\r\n              match.keys,\r\n              match.params,\r\n            );\r\n          }\r\n\r\n          const childMatch = childMatches.next(routeToSkip);\r\n          if (!childMatch.done) {\r\n            return {\r\n              done: false,\r\n              value: childMatch.value,\r\n            };\r\n          }\r\n\r\n          childMatches = null;\r\n          childIndex += 1;\r\n        }\r\n      }\r\n\r\n      return { done: true, value: undefined };\r\n    },\r\n  };\r\n}\r\n\r\nexport default matchRoute;\r\n","import { pathToRegexp } from \"path-to-regexp\";\nimport { resolvePath } from \"./utils.js\";\nconst cache = /* @__PURE__ */ new Map();\ncache.set(\"|false\", {\n  keys: [],\n  pattern: /(?:)/u\n});\nfunction decodeParam(val) {\n  try {\n    return decodeURIComponent(val);\n  } catch {\n    return val;\n  }\n}\nfunction matchPath(routePath, path, exact = false, parentKeys = [], parentParams) {\n  const cacheKey = `${routePath}|${String(exact)}`;\n  const _path = resolvePath(path);\n  let regexp = cache.get(cacheKey);\n  if (!regexp) {\n    const keys = [];\n    regexp = {\n      keys,\n      pattern: pathToRegexp(routePath, keys, {\n        end: exact,\n        strict: routePath === \"\"\n      })\n    };\n    cache.set(cacheKey, regexp);\n  }\n  const m = regexp.pattern.exec(_path);\n  if (!m) {\n    return null;\n  }\n  const params = { ...parentParams };\n  for (let i = 1; i < m.length; i++) {\n    const key = regexp.keys[i - 1];\n    const prop = key.name;\n    const value = m[i];\n    if (value !== void 0 || !Object.hasOwn(params, prop)) {\n      if (key.modifier === \"+\" || key.modifier === \"*\") {\n        params[prop] = value ? value.split(/[/?#]/u).map(decodeParam) : [];\n      } else {\n        params[prop] = value ? decodeParam(value) : value;\n      }\n    }\n  }\n  return {\n    keys: [...parentKeys, ...regexp.keys],\n    params,\n    path: m[0]\n  };\n}\nvar matchPath_default = matchPath;\nexport {\n  matchPath_default as default\n};\n//# sourceMappingURL=matchPath.js.map\n","/**\r\n * Universal Router (https://www.kriasoft.com/universal-router/)\r\n *\r\n * Copyright (c) 2015-present Kriasoft.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE.txt file in the root directory of this source tree.\r\n */\r\n\r\nimport { type Key, pathToRegexp } from 'path-to-regexp';\r\nimport type { Writable } from 'type-fest';\r\nimport type { IndexedParams } from '../types.js';\r\nimport { resolvePath } from './utils.js';\r\n\r\nexport interface RegExpExecOptArray extends ReadonlyArray<string | undefined> {\r\n  0: string;\r\n  index: number;\r\n  input: string;\r\n}\r\n\r\ntype Matcher = Readonly<{\r\n  keys: readonly Key[];\r\n  pattern: RegExp;\r\n}>;\r\n\r\nexport type Match = Readonly<{\r\n  keys: readonly Key[];\r\n  params: IndexedParams;\r\n  path: string;\r\n}>;\r\n\r\nconst cache = new Map<string, Matcher>();\r\n// see https://github.com/pillarjs/path-to-regexp/issues/148\r\ncache.set('|false', {\r\n  keys: [],\r\n  pattern: /(?:)/u,\r\n});\r\n\r\nfunction decodeParam(val: string): string {\r\n  try {\r\n    return decodeURIComponent(val);\r\n  } catch {\r\n    return val;\r\n  }\r\n}\r\n\r\n// eslint-disable-next-line @typescript-eslint/max-params\r\nfunction matchPath(\r\n  routePath: string,\r\n  path?: string[] | string,\r\n  exact: boolean = false,\r\n  parentKeys: readonly Key[] = [],\r\n  parentParams?: IndexedParams,\r\n): Match | null {\r\n  const cacheKey = `${routePath}|${String(exact)}`;\r\n  const _path = resolvePath(path);\r\n  let regexp = cache.get(cacheKey);\r\n\r\n  if (!regexp) {\r\n    const keys: Key[] = [];\r\n    regexp = {\r\n      keys,\r\n      pattern: pathToRegexp(routePath, keys, {\r\n        end: exact,\r\n        strict: routePath === '',\r\n      }),\r\n    };\r\n    cache.set(cacheKey, regexp);\r\n  }\r\n\r\n  const m: RegExpExecOptArray | null = regexp.pattern.exec(_path);\r\n  if (!m) {\r\n    return null;\r\n  }\r\n\r\n  const params: Writable<IndexedParams> = { ...parentParams };\r\n\r\n  for (let i = 1; i < m.length; i++) {\r\n    const key = regexp.keys[i - 1];\r\n    const prop = key.name;\r\n    const value = m[i];\r\n    if (value !== undefined || !Object.hasOwn(params, prop)) {\r\n      if (key.modifier === '+' || key.modifier === '*') {\r\n        // by default, as of path-to-regexp 6.0.0, the default delimiters\r\n        // are `/`, `#` and `?`.\r\n        params[prop] = value ? value.split(/[/?#]/u).map(decodeParam) : [];\r\n      } else {\r\n        params[prop] = value ? decodeParam(value) : value!;\r\n      }\r\n    }\r\n  }\r\n\r\n  return {\r\n    keys: [...parentKeys, ...regexp.keys],\r\n    params,\r\n    path: m[0],\r\n  };\r\n}\r\n\r\nexport default matchPath;\r\n","function isObject(o) {\n  return typeof o === \"object\" && !!o;\n}\nfunction isFunction(f) {\n  return typeof f === \"function\";\n}\nfunction isString(s) {\n  return typeof s === \"string\";\n}\nfunction toArray(value = []) {\n  return Array.isArray(value) ? value : [value];\n}\nfunction log(msg) {\n  return `[Vaadin.Router] ${msg}`;\n}\nclass NotFoundError extends Error {\n  code;\n  context;\n  constructor(context) {\n    super(log(`Page not found (${context.pathname})`));\n    this.context = context;\n    this.code = 404;\n  }\n}\nconst notFoundResult = Symbol(\"NotFoundResult\");\nfunction getNotFoundError(context) {\n  return new NotFoundError(context);\n}\nfunction resolvePath(path) {\n  return (Array.isArray(path) ? path[0] : path) ?? \"\";\n}\nfunction getRoutePath(route) {\n  return resolvePath(route?.path);\n}\nfunction unwrapChildren(children) {\n  return Array.isArray(children) && children.length > 0 ? children : void 0;\n}\nexport {\n  NotFoundError,\n  getNotFoundError,\n  getRoutePath,\n  isFunction,\n  isObject,\n  isString,\n  log,\n  notFoundResult,\n  resolvePath,\n  toArray,\n  unwrapChildren\n};\n//# sourceMappingURL=utils.js.map\n","import type { AnyObject, ChildrenCallback, Route, RouteContext } from './types.js';\r\n\r\nexport function isObject(o: unknown): o is object {\r\n  // guard against null passing the typeof check\r\n  return typeof o === 'object' && !!o;\r\n}\r\n\r\n// eslint-disable-next-line @typescript-eslint/ban-types\r\nexport function isFunction(f: unknown): f is Function {\r\n  return typeof f === 'function';\r\n}\r\n\r\nexport function isString(s: unknown): s is string {\r\n  return typeof s === 'string';\r\n}\r\n\r\nexport function toArray<T>(value: T | readonly T[] = []): readonly T[] {\r\n  return Array.isArray(value) ? value : [value];\r\n}\r\n\r\nexport function log(msg: string): string {\r\n  return `[Vaadin.Router] ${msg}`;\r\n}\r\n\r\nexport class NotFoundError<T, R extends AnyObject, C extends AnyObject> extends Error {\r\n  readonly code: number;\r\n  readonly context: RouteContext<T, R, C>;\r\n\r\n  constructor(context: RouteContext<T, R, C>) {\r\n    super(log(`Page not found (${context.pathname})`));\r\n    this.context = context;\r\n    this.code = 404;\r\n  }\r\n}\r\n\r\nexport const notFoundResult = Symbol('NotFoundResult');\r\nexport type NotFoundResult = typeof notFoundResult;\r\n\r\nexport function getNotFoundError<T, R extends AnyObject, C extends AnyObject>(\r\n  context: RouteContext<T, R, C>,\r\n): NotFoundError<T, R, C> {\r\n  return new NotFoundError(context);\r\n}\r\n\r\nexport function resolvePath(path?: string | readonly string[]): string {\r\n  return (Array.isArray(path) ? path[0] : path) ?? '';\r\n}\r\n\r\nexport function getRoutePath<T, R extends AnyObject, C extends AnyObject>(route: Route<T, R, C> | undefined): string {\r\n  return resolvePath(route?.path);\r\n}\r\n\r\nexport function unwrapChildren<T, R extends AnyObject, C extends AnyObject>(\r\n  children: ChildrenCallback<T, R, C> | ReadonlyArray<Route<T, R, C>> | undefined,\r\n): ReadonlyArray<Route<T, R, C>> | undefined {\r\n  return Array.isArray<ReadonlyArray<Route<T, R, C>>>(children) && children.length > 0 ? children : undefined;\r\n}\r\n","import { isFunction } from \"./utils.js\";\nfunction resolveRoute(context) {\n  if (isFunction(context.route.action)) {\n    return context.route.action(context);\n  }\n  return void 0;\n}\nexport {\n  resolveRoute as default\n};\n//# sourceMappingURL=resolveRoute.js.map\n","/**\r\n * Universal Router (https://www.kriasoft.com/universal-router/)\r\n *\r\n * Copyright (c) 2015-present Kriasoft.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE.txt file in the root directory of this source tree.\r\n */\r\nimport type { ActionResult, AnyObject, MaybePromise, RouteContext } from './types.js';\r\nimport { isFunction } from './utils.js';\r\n\r\n// eslint-disable-next-line @typescript-eslint/no-invalid-void-type\r\nexport default function resolveRoute<T, R extends AnyObject, C extends AnyObject>(\r\n  context: RouteContext<T, R, C>,\r\n): MaybePromise<ActionResult<T | RouteContext<T, R, C>>> {\r\n  if (isFunction(context.route.action)) {\r\n    // @ts-expect-error: ignore \"never\" type here\r\n    return context.route.action(context);\r\n  }\r\n  return undefined;\r\n}\r\n","import './router-meta.js';\r\n","function __REGISTER__(feature, vaadinObj = window.Vaadin ??= {}) {\n  vaadinObj.registrations ??= [];\n  vaadinObj.registrations.push({\n    is: feature ? `${\"@vaadin/router\"}/${feature}` : \"@vaadin/router\",\n    version: \"2.0.0\"\n  });\n}\nimport { usageStatistics } from \"@vaadin/vaadin-usage-statistics/vaadin-usage-statistics.js\";\n__REGISTER__();\nusageStatistics();\n//# sourceMappingURL=router-meta.js.map\n","export function __REGISTER__(feature, vaadinObj = (window.Vaadin ??= {})) {\r\n  vaadinObj.registrations ??= [];\r\n  vaadinObj.registrations.push({\r\n    is: feature ? `${__NAME__}/${feature}` : __NAME__,\r\n    version: __VERSION__,\r\n  });\r\n}\r\n","import { usageStatistics } from '@vaadin/vaadin-usage-statistics/vaadin-usage-statistics.js';\r\n\r\n// @ts-expect-error: Generated function\r\n// eslint-disable-next-line @typescript-eslint/no-unsafe-call\r\n__REGISTER__();\r\n\r\nusageStatistics();\r\n","export * from './vaadin-usage-statistics-collect.js';\n","/* This file is autogenerated from src/vaadin-usage-statistics.tpl.html */\n/*\n\nThis script gathers usage statistics from the application running in development mode.\n\nStatistics gathering is automatically disabled and excluded from production builds.\n\nFor details and to opt-out, see https://github.com/vaadin/vaadin-usage-statistics.\n\n*/\n/*\n  FIXME(polymer-modulizer): the above comments were extracted\n  from HTML and may be out of place here. Review them and\n  then delete this comment!\n*/\nimport { runIfDevelopmentMode } from '@vaadin/vaadin-development-mode-detector/vaadin-development-mode-detector.js';\n\nfunction maybeGatherAndSendStats() {\n  /*! vaadin-dev-mode:start\n  (function () {\n'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar getPolymerVersion = function getPolymerVersion() {\n  return window.Polymer && window.Polymer.version;\n};\n\nvar StatisticsGatherer = function () {\n  function StatisticsGatherer(logger) {\n    classCallCheck(this, StatisticsGatherer);\n\n    this.now = new Date().getTime();\n    this.logger = logger;\n  }\n\n  createClass(StatisticsGatherer, [{\n    key: 'frameworkVersionDetectors',\n    value: function frameworkVersionDetectors() {\n      return {\n        'Flow': function Flow() {\n          if (window.Vaadin && window.Vaadin.Flow && window.Vaadin.Flow.clients) {\n            var flowVersions = Object.keys(window.Vaadin.Flow.clients).map(function (key) {\n              return window.Vaadin.Flow.clients[key];\n            }).filter(function (client) {\n              return client.getVersionInfo;\n            }).map(function (client) {\n              return client.getVersionInfo().flow;\n            });\n            if (flowVersions.length > 0) {\n              return flowVersions[0];\n            }\n          }\n        },\n        'Vaadin Framework': function VaadinFramework() {\n          if (window.vaadin && window.vaadin.clients) {\n            var frameworkVersions = Object.values(window.vaadin.clients).filter(function (client) {\n              return client.getVersionInfo;\n            }).map(function (client) {\n              return client.getVersionInfo().vaadinVersion;\n            });\n            if (frameworkVersions.length > 0) {\n              return frameworkVersions[0];\n            }\n          }\n        },\n        'AngularJs': function AngularJs() {\n          if (window.angular && window.angular.version && window.angular.version) {\n            return window.angular.version.full;\n          }\n        },\n        'Angular': function Angular() {\n          if (window.ng) {\n            var tags = document.querySelectorAll(\"[ng-version]\");\n            if (tags.length > 0) {\n              return tags[0].getAttribute(\"ng-version\");\n            }\n            return \"Unknown\";\n          }\n        },\n        'Backbone.js': function BackboneJs() {\n          if (window.Backbone) {\n            return window.Backbone.VERSION;\n          }\n        },\n        'React': function React() {\n          var reactSelector = '[data-reactroot], [data-reactid]';\n          if (!!document.querySelector(reactSelector)) {\n            // React does not publish the version by default\n            return \"unknown\";\n          }\n        },\n        'Ember': function Ember() {\n          if (window.Em && window.Em.VERSION) {\n            return window.Em.VERSION;\n          } else if (window.Ember && window.Ember.VERSION) {\n            return window.Ember.VERSION;\n          }\n        },\n        'jQuery': function (_jQuery) {\n          function jQuery() {\n            return _jQuery.apply(this, arguments);\n          }\n\n          jQuery.toString = function () {\n            return _jQuery.toString();\n          };\n\n          return jQuery;\n        }(function () {\n          if (typeof jQuery === 'function' && jQuery.prototype.jquery !== undefined) {\n            return jQuery.prototype.jquery;\n          }\n        }),\n        'Polymer': function Polymer() {\n          var version = getPolymerVersion();\n          if (version) {\n            return version;\n          }\n        },\n        'LitElement': function LitElement() {\n          var version = window.litElementVersions && window.litElementVersions[0];\n          if (version) {\n            return version;\n          }\n        },\n        'LitHtml': function LitHtml() {\n          var version = window.litHtmlVersions && window.litHtmlVersions[0];\n          if (version) {\n            return version;\n          }\n        },\n        'Vue.js': function VueJs() {\n          if (window.Vue) {\n            return window.Vue.version;\n          }\n        }\n      };\n    }\n  }, {\n    key: 'getUsedVaadinElements',\n    value: function getUsedVaadinElements(elements) {\n      var version = getPolymerVersion();\n      var elementClasses = void 0;\n      // NOTE: In case you edit the code here, YOU MUST UPDATE any statistics reporting code in Flow.\n      // Check all locations calling the method getEntries() in\n      // https://github.com/vaadin/flow/blob/master/flow-server/src/main/java/com/vaadin/flow/internal/UsageStatistics.java#L106\n      // Currently it is only used by BootstrapHandler.\n      if (version && version.indexOf('2') === 0) {\n        // Polymer 2: components classes are stored in window.Vaadin\n        elementClasses = Object.keys(window.Vaadin).map(function (c) {\n          return window.Vaadin[c];\n        }).filter(function (c) {\n          return c.is;\n        });\n      } else {\n        // Polymer 3: components classes are stored in window.Vaadin.registrations\n        elementClasses = window.Vaadin.registrations || [];\n      }\n      elementClasses.forEach(function (klass) {\n        var version = klass.version ? klass.version : \"0.0.0\";\n        elements[klass.is] = { version: version };\n      });\n    }\n  }, {\n    key: 'getUsedVaadinThemes',\n    value: function getUsedVaadinThemes(themes) {\n      ['Lumo', 'Material'].forEach(function (themeName) {\n        var theme;\n        var version = getPolymerVersion();\n        if (version && version.indexOf('2') === 0) {\n          // Polymer 2: themes are stored in window.Vaadin\n          theme = window.Vaadin[themeName];\n        } else {\n          // Polymer 3: themes are stored in custom element registry\n          theme = customElements.get('vaadin-' + themeName.toLowerCase() + '-styles');\n        }\n        if (theme && theme.version) {\n          themes[themeName] = { version: theme.version };\n        }\n      });\n    }\n  }, {\n    key: 'getFrameworks',\n    value: function getFrameworks(frameworks) {\n      var detectors = this.frameworkVersionDetectors();\n      Object.keys(detectors).forEach(function (framework) {\n        var detector = detectors[framework];\n        try {\n          var version = detector();\n          if (version) {\n            frameworks[framework] = { version: version };\n          }\n        } catch (e) {}\n      });\n    }\n  }, {\n    key: 'gather',\n    value: function gather(storage) {\n      var storedStats = storage.read();\n      var gatheredStats = {};\n      var types = [\"elements\", \"frameworks\", \"themes\"];\n\n      types.forEach(function (type) {\n        gatheredStats[type] = {};\n        if (!storedStats[type]) {\n          storedStats[type] = {};\n        }\n      });\n\n      var previousStats = JSON.stringify(storedStats);\n\n      this.getUsedVaadinElements(gatheredStats.elements);\n      this.getFrameworks(gatheredStats.frameworks);\n      this.getUsedVaadinThemes(gatheredStats.themes);\n\n      var now = this.now;\n      types.forEach(function (type) {\n        var keys = Object.keys(gatheredStats[type]);\n        keys.forEach(function (key) {\n          if (!storedStats[type][key] || _typeof(storedStats[type][key]) != _typeof({})) {\n            storedStats[type][key] = { firstUsed: now };\n          }\n          // Discards any previously logged version number\n          storedStats[type][key].version = gatheredStats[type][key].version;\n          storedStats[type][key].lastUsed = now;\n        });\n      });\n\n      var newStats = JSON.stringify(storedStats);\n      storage.write(newStats);\n      if (newStats != previousStats && Object.keys(storedStats).length > 0) {\n        this.logger.debug(\"New stats: \" + newStats);\n      }\n    }\n  }]);\n  return StatisticsGatherer;\n}();\n\nvar StatisticsStorage = function () {\n  function StatisticsStorage(key) {\n    classCallCheck(this, StatisticsStorage);\n\n    this.key = key;\n  }\n\n  createClass(StatisticsStorage, [{\n    key: 'read',\n    value: function read() {\n      var localStorageStatsString = localStorage.getItem(this.key);\n      try {\n        return JSON.parse(localStorageStatsString ? localStorageStatsString : '{}');\n      } catch (e) {\n        return {};\n      }\n    }\n  }, {\n    key: 'write',\n    value: function write(data) {\n      localStorage.setItem(this.key, data);\n    }\n  }, {\n    key: 'clear',\n    value: function clear() {\n      localStorage.removeItem(this.key);\n    }\n  }, {\n    key: 'isEmpty',\n    value: function isEmpty() {\n      var storedStats = this.read();\n      var empty = true;\n      Object.keys(storedStats).forEach(function (key) {\n        if (Object.keys(storedStats[key]).length > 0) {\n          empty = false;\n        }\n      });\n\n      return empty;\n    }\n  }]);\n  return StatisticsStorage;\n}();\n\nvar StatisticsSender = function () {\n  function StatisticsSender(url, logger) {\n    classCallCheck(this, StatisticsSender);\n\n    this.url = url;\n    this.logger = logger;\n  }\n\n  createClass(StatisticsSender, [{\n    key: 'send',\n    value: function send(data, errorHandler) {\n      var logger = this.logger;\n\n      if (navigator.onLine === false) {\n        logger.debug(\"Offline, can't send\");\n        errorHandler();\n        return;\n      }\n      logger.debug(\"Sending data to \" + this.url);\n\n      var req = new XMLHttpRequest();\n      req.withCredentials = true;\n      req.addEventListener(\"load\", function () {\n        // Stats sent, nothing more to do\n        logger.debug(\"Response: \" + req.responseText);\n      });\n      req.addEventListener(\"error\", function () {\n        logger.debug(\"Send failed\");\n        errorHandler();\n      });\n      req.addEventListener(\"abort\", function () {\n        logger.debug(\"Send aborted\");\n        errorHandler();\n      });\n      req.open(\"POST\", this.url);\n      req.setRequestHeader(\"Content-Type\", \"application/json\");\n      req.send(data);\n    }\n  }]);\n  return StatisticsSender;\n}();\n\nvar StatisticsLogger = function () {\n  function StatisticsLogger(id) {\n    classCallCheck(this, StatisticsLogger);\n\n    this.id = id;\n  }\n\n  createClass(StatisticsLogger, [{\n    key: '_isDebug',\n    value: function _isDebug() {\n      return localStorage.getItem(\"vaadin.\" + this.id + \".debug\");\n    }\n  }, {\n    key: 'debug',\n    value: function debug(msg) {\n      if (this._isDebug()) {\n        console.info(this.id + \": \" + msg);\n      }\n    }\n  }]);\n  return StatisticsLogger;\n}();\n\nvar UsageStatistics = function () {\n  function UsageStatistics() {\n    classCallCheck(this, UsageStatistics);\n\n    this.now = new Date();\n    this.timeNow = this.now.getTime();\n    this.gatherDelay = 10; // Delay between loading this file and gathering stats\n    this.initialDelay = 24 * 60 * 60;\n\n    this.logger = new StatisticsLogger(\"statistics\");\n    this.storage = new StatisticsStorage(\"vaadin.statistics.basket\");\n    this.gatherer = new StatisticsGatherer(this.logger);\n    this.sender = new StatisticsSender(\"https://tools.vaadin.com/usage-stats/submit\", this.logger);\n  }\n\n  createClass(UsageStatistics, [{\n    key: 'maybeGatherAndSend',\n    value: function maybeGatherAndSend() {\n      var _this = this;\n\n      if (localStorage.getItem(UsageStatistics.optOutKey)) {\n        return;\n      }\n      this.gatherer.gather(this.storage);\n      setTimeout(function () {\n        _this.maybeSend();\n      }, this.gatherDelay * 1000);\n    }\n  }, {\n    key: 'lottery',\n    value: function lottery() {\n      return true;\n    }\n  }, {\n    key: 'currentMonth',\n    value: function currentMonth() {\n      return this.now.getYear() * 12 + this.now.getMonth();\n    }\n  }, {\n    key: 'maybeSend',\n    value: function maybeSend() {\n      var firstUse = Number(localStorage.getItem(UsageStatistics.firstUseKey));\n      var monthProcessed = Number(localStorage.getItem(UsageStatistics.monthProcessedKey));\n\n      if (!firstUse) {\n        // Use a grace period to avoid interfering with tests, incognito mode etc\n        firstUse = this.timeNow;\n        localStorage.setItem(UsageStatistics.firstUseKey, firstUse);\n      }\n\n      if (this.timeNow < firstUse + this.initialDelay * 1000) {\n        this.logger.debug(\"No statistics will be sent until the initial delay of \" + this.initialDelay + \"s has passed\");\n        return;\n      }\n      if (this.currentMonth() <= monthProcessed) {\n        this.logger.debug(\"This month has already been processed\");\n        return;\n      }\n      localStorage.setItem(UsageStatistics.monthProcessedKey, this.currentMonth());\n      // Use random sampling\n      if (this.lottery()) {\n        this.logger.debug(\"Congratulations, we have a winner!\");\n      } else {\n        this.logger.debug(\"Sorry, no stats from you this time\");\n        return;\n      }\n\n      this.send();\n    }\n  }, {\n    key: 'send',\n    value: function send() {\n      // Ensure we have the latest data\n      this.gatherer.gather(this.storage);\n\n      // Read, send and clean up\n      var data = this.storage.read();\n      data[\"firstUse\"] = Number(localStorage.getItem(UsageStatistics.firstUseKey));\n      data[\"usageStatisticsVersion\"] = UsageStatistics.version;\n      var info = 'This request contains usage statistics gathered from the application running in development mode. \\n\\nStatistics gathering is automatically disabled and excluded from production builds.\\n\\nFor details and to opt-out, see https://github.com/vaadin/vaadin-usage-statistics.\\n\\n\\n\\n';\n      var self = this;\n      this.sender.send(info + JSON.stringify(data), function () {\n        // Revert the 'month processed' flag\n        localStorage.setItem(UsageStatistics.monthProcessedKey, self.currentMonth() - 1);\n      });\n    }\n  }], [{\n    key: 'version',\n    get: function get$1() {\n      return '2.1.2';\n    }\n  }, {\n    key: 'firstUseKey',\n    get: function get$1() {\n      return 'vaadin.statistics.firstuse';\n    }\n  }, {\n    key: 'monthProcessedKey',\n    get: function get$1() {\n      return 'vaadin.statistics.monthProcessed';\n    }\n  }, {\n    key: 'optOutKey',\n    get: function get$1() {\n      return 'vaadin.statistics.optout';\n    }\n  }]);\n  return UsageStatistics;\n}();\n\ntry {\n  window.Vaadin = window.Vaadin || {};\n  window.Vaadin.usageStatsChecker = window.Vaadin.usageStatsChecker || new UsageStatistics();\n  window.Vaadin.usageStatsChecker.maybeGatherAndSend();\n} catch (e) {\n  // Intentionally ignored as this is not a problem in the app being developed\n}\n\n}());\n\n  vaadin-dev-mode:end **/\n}\n\nexport const usageStatistics = function() {\n  if (typeof runIfDevelopmentMode === 'function') {\n    return runIfDevelopmentMode(maybeGatherAndSendStats);\n  }\n};\n","const DEV_MODE_CODE_REGEXP =\n  /\\/\\*[\\*!]\\s+vaadin-dev-mode:start([\\s\\S]*)vaadin-dev-mode:end\\s+\\*\\*\\//i;\n\nconst FlowClients = window.Vaadin && window.Vaadin.Flow && window.Vaadin.Flow.clients;\n\nfunction isMinified() {\n  function test() {\n    /** vaadin-dev-mode:start\n    return false;\n    vaadin-dev-mode:end **/\n    return true;\n  }\n  return uncommentAndRun(test);\n}\n\nfunction isDevelopmentMode() {\n  try {\n    if (isForcedDevelopmentMode()) {\n      return true;\n    }\n\n    if (!isLocalhost()) {\n      return false;\n    }\n\n    if (FlowClients) {\n      return !isFlowProductionMode();\n    }\n\n    return !isMinified();\n  } catch (e) {\n    // Some error in this code, assume production so no further actions will be taken\n    return false;\n  }\n}\n\nfunction isForcedDevelopmentMode() {\n  return localStorage.getItem(\"vaadin.developmentmode.force\");\n}\n\nfunction isLocalhost() {\n  return ([\"localhost\",\"127.0.0.1\"].indexOf(window.location.hostname) >= 0);\n}\n\nfunction isFlowProductionMode() {\n  if (FlowClients) {\n    const productionModeApps = Object.keys(FlowClients)\n      .map(key => FlowClients[key])\n      .filter(client => client.productionMode);\n    if (productionModeApps.length > 0) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction uncommentAndRun(callback, args) {\n  if (typeof callback !== 'function') {\n    return;\n  }\n\n  const match = DEV_MODE_CODE_REGEXP.exec(callback.toString());\n  if (match) {\n    try {\n      // requires CSP: script-src 'unsafe-eval'\n      callback = new Function(match[1]);\n    } catch (e) {\n      // eat the exception\n      console.log('vaadin-development-mode-detector: uncommentAndRun() failed', e)\n    }\n  }\n\n  return callback(args);\n}\n\n// A guard against polymer-modulizer removing the window.Vaadin\n// initialization above.\nwindow['Vaadin'] = window['Vaadin'] || {};\n\n/**\n * Inspects the source code of the given `callback` function for\n * specially-marked _commented_ code. If such commented code is found in the\n * callback source, uncomments and runs that code instead of the callback\n * itself. Otherwise runs the callback as is.\n *\n * The optional arguments are passed into the callback / uncommented code,\n * the result is returned.\n *\n * See the `isMinified()` function source code in this file for an example.\n *\n */\nexport const runIfDevelopmentMode = function(callback, args) {\n  if (window.Vaadin.developmentMode) {\n    return uncommentAndRun(callback, args);\n  }\n};\n\nif (window.Vaadin.developmentMode === undefined) {\n  window.Vaadin.developmentMode = isDevelopmentMode();\n}\n","const willAnimate = (elem) => {\n  const name = getComputedStyle(elem).getPropertyValue(\"animation-name\");\n  return name && name !== \"none\";\n};\nconst waitForAnimation = (elem, cb) => {\n  const listener = () => {\n    elem.removeEventListener(\"animationend\", listener);\n    cb();\n  };\n  elem.addEventListener(\"animationend\", listener);\n};\nasync function animate(elem, className) {\n  elem.classList.add(className);\n  return await new Promise((resolve) => {\n    if (willAnimate(elem)) {\n      const rect = elem.getBoundingClientRect();\n      const size = `height: ${rect.bottom - rect.top}px; width: ${rect.right - rect.left}px`;\n      elem.setAttribute(\"style\", `position: absolute; ${size}`);\n      waitForAnimation(elem, () => {\n        elem.classList.remove(className);\n        elem.removeAttribute(\"style\");\n        resolve();\n      });\n    } else {\n      elem.classList.remove(className);\n      resolve();\n    }\n  });\n}\nvar animate_default = animate;\nexport {\n  animate_default as default\n};\n//# sourceMappingURL=animate.js.map\n","const willAnimate = (elem: Element) => {\r\n  const name = getComputedStyle(elem).getPropertyValue('animation-name');\r\n  return name && name !== 'none';\r\n};\r\n\r\nconst waitForAnimation = (elem: Element, cb: () => void) => {\r\n  const listener = () => {\r\n    elem.removeEventListener('animationend', listener);\r\n    cb();\r\n  };\r\n  elem.addEventListener('animationend', listener);\r\n};\r\n\r\nasync function animate(elem: Element, className: string): Promise<void> {\r\n  elem.classList.add(className);\r\n\r\n  return await new Promise((resolve: () => void) => {\r\n    if (willAnimate(elem)) {\r\n      const rect = elem.getBoundingClientRect();\r\n      const size = `height: ${rect.bottom - rect.top}px; width: ${rect.right - rect.left}px`;\r\n      elem.setAttribute('style', `position: absolute; ${size}`);\r\n      waitForAnimation(elem, () => {\r\n        elem.classList.remove(className);\r\n        elem.removeAttribute('style');\r\n        resolve();\r\n      });\r\n    } else {\r\n      elem.classList.remove(className);\r\n      resolve();\r\n    }\r\n  });\r\n}\r\n\r\nexport default animate;\r\n","import CLICK from \"./click.js\";\nimport POPSTATE from \"./popstate.js\";\nlet triggers = [];\nconst DEFAULT_TRIGGERS = {\n  CLICK,\n  POPSTATE\n};\nfunction setNavigationTriggers(newTriggers = []) {\n  triggers.forEach((trigger) => trigger.inactivate());\n  newTriggers.forEach((trigger) => trigger.activate());\n  triggers = newTriggers;\n}\nexport {\n  DEFAULT_TRIGGERS,\n  setNavigationTriggers\n};\n//# sourceMappingURL=navigation.js.map\n","import type { NavigationTrigger } from '../types.js';\r\nimport CLICK from './click.js';\r\nimport POPSTATE from './popstate.js';\r\n\r\nlet triggers: readonly NavigationTrigger[] = [];\r\n\r\nconst DEFAULT_TRIGGERS = {\r\n  CLICK,\r\n  POPSTATE,\r\n} as const;\r\n\r\nexport { DEFAULT_TRIGGERS };\r\n\r\nexport function setNavigationTriggers(newTriggers: readonly NavigationTrigger[] = []): void {\r\n  triggers.forEach((trigger) => trigger.inactivate());\r\n\r\n  newTriggers.forEach((trigger) => trigger.activate());\r\n\r\n  triggers = newTriggers;\r\n}\r\n","import { fireRouterEvent } from \"../utils.js\";\nfunction getAnchorOrigin(anchor) {\n  const { port, protocol } = anchor;\n  const defaultHttp = protocol === \"http:\" && port === \"80\";\n  const defaultHttps = protocol === \"https:\" && port === \"443\";\n  const host = defaultHttp || defaultHttps ? anchor.hostname : anchor.host;\n  return `${protocol}//${host}`;\n}\nfunction getNormalizedNodeName(e) {\n  if (!(e instanceof Element)) {\n    return void 0;\n  }\n  return e.nodeName.toLowerCase();\n}\nfunction vaadinRouterGlobalClickHandler(event) {\n  if (event.defaultPrevented) {\n    return;\n  }\n  if (event.button !== 0) {\n    return;\n  }\n  if (event.shiftKey || event.ctrlKey || event.altKey || event.metaKey) {\n    return;\n  }\n  let anchorCandidate = event.target;\n  const path = event instanceof MouseEvent ? event.composedPath() : event.path ?? [];\n  for (let i = 0; i < path.length; i++) {\n    const target = path[i];\n    if (\"nodeName\" in target && target.nodeName.toLowerCase() === \"a\") {\n      anchorCandidate = target;\n      break;\n    }\n  }\n  while (anchorCandidate && anchorCandidate instanceof Node && getNormalizedNodeName(anchorCandidate) !== \"a\") {\n    anchorCandidate = anchorCandidate.parentNode;\n  }\n  if (!anchorCandidate || getNormalizedNodeName(anchorCandidate) !== \"a\") {\n    return;\n  }\n  const anchor = anchorCandidate;\n  if (anchor.target && anchor.target.toLowerCase() !== \"_self\") {\n    return;\n  }\n  if (anchor.hasAttribute(\"download\")) {\n    return;\n  }\n  if (anchor.hasAttribute(\"router-ignore\")) {\n    return;\n  }\n  if (anchor.pathname === window.location.pathname && anchor.hash !== \"\") {\n    return;\n  }\n  const origin = anchor.origin || getAnchorOrigin(anchor);\n  if (origin !== window.location.origin) {\n    return;\n  }\n  const { hash, pathname, search } = anchor;\n  if (fireRouterEvent(\"go\", { hash, pathname, search }) && event instanceof MouseEvent) {\n    event.preventDefault();\n    if (event.type === \"click\") {\n      window.scrollTo(0, 0);\n    }\n  }\n}\nconst CLICK = {\n  activate() {\n    window.document.addEventListener(\"click\", vaadinRouterGlobalClickHandler);\n  },\n  inactivate() {\n    window.document.removeEventListener(\"click\", vaadinRouterGlobalClickHandler);\n  }\n};\nvar click_default = CLICK;\nexport {\n  click_default as default\n};\n//# sourceMappingURL=click.js.map\n","import type { NavigationTrigger } from '../types.js';\r\nimport { fireRouterEvent } from '../utils.js';\r\n\r\n/* istanbul ignore next: coverage is calculated in Chrome, this code is for IE */\r\nfunction getAnchorOrigin(anchor: HTMLAnchorElement) {\r\n  // IE11: on HTTP and HTTPS the default port is not included into\r\n  // window.location.origin, so won't include it here either.\r\n  const { port, protocol } = anchor;\r\n  const defaultHttp = protocol === 'http:' && port === '80';\r\n  const defaultHttps = protocol === 'https:' && port === '443';\r\n  const host =\r\n    defaultHttp || defaultHttps\r\n      ? anchor.hostname // does not include the port number (e.g. www.example.org)\r\n      : anchor.host; // does include the port number (e.g. www.example.org:80)\r\n  return `${protocol}//${host}`;\r\n}\r\n\r\nfunction getNormalizedNodeName(e: EventTarget): string | undefined {\r\n  if (!(e instanceof Element)) {\r\n    return undefined;\r\n  }\r\n\r\n  return e.nodeName.toLowerCase();\r\n}\r\n\r\n// TODO: Name correctly when the type purpose is known\r\ntype __Pathable = Readonly<{\r\n  path?: readonly EventTarget[];\r\n}>;\r\n\r\n// The list of checks is not complete:\r\n//  - SVG support is missing\r\n//  - the 'rel' attribute is not considered\r\nfunction vaadinRouterGlobalClickHandler(event: MouseEvent & __Pathable) {\r\n  // ignore the click if the default action is prevented\r\n  if (event.defaultPrevented) {\r\n    return;\r\n  }\r\n\r\n  // ignore the click if not with the primary mouse button\r\n  if (event.button !== 0) {\r\n    return;\r\n  }\r\n\r\n  // ignore the click if a modifier key is pressed\r\n  if (event.shiftKey || event.ctrlKey || event.altKey || event.metaKey) {\r\n    return;\r\n  }\r\n\r\n  // find the <a> element that the click is at (or within)\r\n  let anchorCandidate = event.target;\r\n  const path = event instanceof MouseEvent ? event.composedPath() : ((event as __Pathable).path ?? []);\r\n\r\n  // FIXME(web-padawan): `Symbol.iterator` used by webcomponentsjs is broken for arrays\r\n  // example to check: `for...of` loop here throws the \"Not yet implemented\" error\r\n  // eslint-disable-next-line @typescript-eslint/prefer-for-of\r\n  for (let i = 0; i < path.length; i++) {\r\n    const target = path[i];\r\n    if ('nodeName' in target && (target as Element).nodeName.toLowerCase() === 'a') {\r\n      anchorCandidate = target;\r\n      break;\r\n    }\r\n  }\r\n\r\n  while (anchorCandidate && anchorCandidate instanceof Node && getNormalizedNodeName(anchorCandidate) !== 'a') {\r\n    anchorCandidate = anchorCandidate.parentNode;\r\n  }\r\n\r\n  // ignore the click if not at an <a> element\r\n  if (!anchorCandidate || getNormalizedNodeName(anchorCandidate) !== 'a') {\r\n    return;\r\n  }\r\n\r\n  const anchor = anchorCandidate as HTMLAnchorElement;\r\n\r\n  // ignore the click if the <a> element has a non-default target\r\n  if (anchor.target && anchor.target.toLowerCase() !== '_self') {\r\n    return;\r\n  }\r\n\r\n  // ignore the click if the <a> element has the 'download' attribute\r\n  if (anchor.hasAttribute('download')) {\r\n    return;\r\n  }\r\n\r\n  // ignore the click if the <a> element has the 'router-ignore' attribute\r\n  if (anchor.hasAttribute('router-ignore')) {\r\n    return;\r\n  }\r\n\r\n  // ignore the click if the target URL is a fragment on the current page\r\n  if (anchor.pathname === window.location.pathname && anchor.hash !== '') {\r\n    return;\r\n  }\r\n\r\n  // ignore the click if the target is external to the app\r\n  // In IE11 HTMLAnchorElement does not have the `origin` property\r\n  const origin = anchor.origin || getAnchorOrigin(anchor);\r\n  if (origin !== window.location.origin) {\r\n    return;\r\n  }\r\n\r\n  // if none of the above, convert the click into a navigation event\r\n  const { hash, pathname, search } = anchor;\r\n  if (fireRouterEvent('go', { hash, pathname, search }) && event instanceof MouseEvent) {\r\n    event.preventDefault();\r\n    // for a click event, the scroll is reset to the top position.\r\n    // FIXME: undefined here?\r\n    if (event.type === 'click') {\r\n      window.scrollTo(0, 0);\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * A navigation trigger for Vaadin Router that translated clicks on `<a>` links\r\n * into Vaadin Router navigation events.\r\n *\r\n * Only regular clicks on in-app links are translated (primary mouse button, no\r\n * modifier keys, the target href is within the app's URL space).\r\n */\r\nconst CLICK: NavigationTrigger = {\r\n  activate() {\r\n    window.document.addEventListener('click', vaadinRouterGlobalClickHandler);\r\n  },\r\n\r\n  inactivate() {\r\n    window.document.removeEventListener('click', vaadinRouterGlobalClickHandler);\r\n  },\r\n};\r\n\r\nexport default CLICK;\r\n","import { compile } from \"path-to-regexp\";\nimport { isFunction, isObject, isString, log, toArray } from \"./resolver/utils.js\";\nfunction ensureRoute(route) {\n  if (!route || !isString(route.path)) {\n    throw new Error(\n      log(`Expected route config to be an object with a \"path\" string property, or an array of such objects`)\n    );\n  }\n  if (!isFunction(route.action) && !Array.isArray(route.children) && !isFunction(route.children) && !isString(route.component) && !isString(route.redirect)) {\n    throw new Error(\n      log(\n        `Expected route config \"${route.path}\" to include either \"component, redirect\" or \"action\" function but none found.`\n      )\n    );\n  }\n  if (route.redirect) {\n    [\"bundle\", \"component\"].forEach((overriddenProp) => {\n      if (overriddenProp in route) {\n        console.warn(\n          log(\n            `Route config \"${String(route.path)}\" has both \"redirect\" and \"${overriddenProp}\" properties, and \"redirect\" will always override the latter. Did you mean to only use \"${overriddenProp}\"?`\n          )\n        );\n      }\n    });\n  }\n}\nfunction ensureRoutes(routes) {\n  toArray(routes).forEach((route) => ensureRoute(route));\n}\nfunction copyContextWithoutNext({\n  next: _,\n  ...context\n}) {\n  return context;\n}\nfunction getPathnameForRouter(pathname, router) {\n  const base = router.__effectiveBaseUrl;\n  return base ? new URL(pathname.replace(/^\\//u, \"\"), base).pathname : pathname;\n}\nfunction getMatchedPath(pathItems) {\n  return pathItems.map((pathItem) => pathItem.path).reduce((a, b) => {\n    if (b.length) {\n      return `${a.replace(/\\/$/u, \"\")}/${b.replace(/^\\//u, \"\")}`;\n    }\n    return a;\n  }, \"\");\n}\nfunction getRoutePath(chain) {\n  return getMatchedPath(chain.map((chainItem) => chainItem.route));\n}\nfunction createLocation({ chain = [], hash = \"\", params = {}, pathname = \"\", redirectFrom, resolver, search = \"\" }, route) {\n  const routes = chain.map((item) => item.route);\n  return {\n    baseUrl: resolver?.baseUrl ?? \"\",\n    getUrl: (userParams = {}) => resolver ? getPathnameForRouter(compile(getRoutePath(chain))({ ...params, ...userParams }), resolver) : \"\",\n    hash,\n    params,\n    pathname,\n    redirectFrom,\n    route: route ?? (Array.isArray(routes) ? routes.at(-1) : void 0) ?? null,\n    routes,\n    search,\n    searchParams: new URLSearchParams(search)\n  };\n}\nfunction createRedirect(context, pathname) {\n  const params = { ...context.params };\n  return {\n    redirect: {\n      from: context.pathname,\n      params,\n      pathname\n    }\n  };\n}\nfunction renderElement(context, element) {\n  element.location = createLocation(context);\n  if (context.chain) {\n    const index = context.chain.map((item) => item.route).indexOf(context.route);\n    context.chain[index].element = element;\n  }\n  return element;\n}\nfunction maybeCall(callback, thisArg, ...args) {\n  if (typeof callback === \"function\") {\n    return callback.apply(thisArg, args);\n  }\n  return void 0;\n}\nfunction amend(fn, obj, ...args) {\n  return (result) => {\n    if (result && isObject(result) && (\"cancel\" in result || \"redirect\" in result)) {\n      return result;\n    }\n    return maybeCall(obj?.[fn], obj, ...args);\n  };\n}\nfunction processNewChildren(newChildren, route) {\n  if (!Array.isArray(newChildren) && !isObject(newChildren)) {\n    throw new Error(\n      log(\n        `Incorrect \"children\" value for the route ${String(route.path)}: expected array or object, but got ${String(\n          newChildren\n        )}`\n      )\n    );\n  }\n  const children = toArray(newChildren);\n  children.forEach((child) => ensureRoute(child));\n  route.__children = children;\n}\nfunction fireRouterEvent(type, detail) {\n  return !window.dispatchEvent(new CustomEvent(`vaadin-router-${type}`, { cancelable: type === \"go\", detail }));\n}\nfunction logValue(value) {\n  if (typeof value !== \"object\") {\n    return String(value);\n  }\n  const [stringType = \"Unknown\"] = / (.*)\\]$/u.exec(String(value)) ?? [];\n  if (stringType === \"Object\" || stringType === \"Array\") {\n    return `${stringType} ${JSON.stringify(value)}`;\n  }\n  return stringType;\n}\nexport {\n  amend,\n  copyContextWithoutNext,\n  createLocation,\n  createRedirect,\n  ensureRoute,\n  ensureRoutes,\n  fireRouterEvent,\n  getMatchedPath,\n  getPathnameForRouter,\n  getRoutePath,\n  logValue,\n  maybeCall,\n  processNewChildren,\n  renderElement\n};\n//# sourceMappingURL=utils.js.map\n","import { compile } from 'path-to-regexp';\r\nimport type Resolver from './resolver/resolver.js';\r\nimport { isFunction, isObject, isString, log, toArray } from './resolver/utils.js';\r\nimport type { Router } from './router.js';\r\nimport type {\r\n  ActionResult,\r\n  AnyObject,\r\n  ChainItem,\r\n  IndexedParams,\r\n  RedirectResult,\r\n  Route,\r\n  RouteContext,\r\n  RouterLocation,\r\n  WebComponentInterface,\r\n} from './types.js';\r\n\r\nexport function ensureRoute<R extends AnyObject, C extends AnyObject>(route?: Route<R, C>): void {\r\n  if (!route || !isString(route.path)) {\r\n    throw new Error(\r\n      log(`Expected route config to be an object with a \"path\" string property, or an array of such objects`),\r\n    );\r\n  }\r\n\r\n  if (\r\n    !isFunction(route.action) &&\r\n    !Array.isArray(route.children) &&\r\n    !isFunction(route.children) &&\r\n    !isString(route.component) &&\r\n    !isString(route.redirect)\r\n  ) {\r\n    throw new Error(\r\n      log(\r\n        `Expected route config \"${route.path}\" to include either \"component, redirect\" ` +\r\n          `or \"action\" function but none found.`,\r\n      ),\r\n    );\r\n  }\r\n\r\n  if (route.redirect) {\r\n    ['bundle', 'component'].forEach((overriddenProp) => {\r\n      if (overriddenProp in route) {\r\n        console.warn(\r\n          log(\r\n            `Route config \"${String(route.path)}\" has both \"redirect\" and \"${overriddenProp}\" properties, ` +\r\n              `and \"redirect\" will always override the latter. Did you mean to only use \"${overriddenProp}\"?`,\r\n          ),\r\n        );\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nexport function ensureRoutes<R extends AnyObject, C extends AnyObject>(\r\n  routes: Route<R, C> | ReadonlyArray<Route<R, C>>,\r\n): void {\r\n  toArray(routes).forEach((route) => ensureRoute(route));\r\n}\r\n\r\nexport function copyContextWithoutNext<R extends AnyObject, C extends AnyObject>({\r\n  next: _,\r\n  ...context\r\n}: RouteContext<R, C>): Omit<RouteContext<R, C>, 'next'> {\r\n  return context;\r\n}\r\n\r\nexport function getPathnameForRouter<T, R extends AnyObject, C extends AnyObject>(\r\n  pathname: string,\r\n  router: Resolver<T, R, C>,\r\n): string {\r\n  // @ts-expect-error: __effectiveBaseUrl is a private property\r\n  const base = router.__effectiveBaseUrl;\r\n  return base ? new URL(pathname.replace(/^\\//u, ''), base).pathname : pathname;\r\n}\r\n\r\nexport function getMatchedPath(pathItems: ReadonlyArray<Readonly<{ path: string }>>): string {\r\n  return pathItems\r\n    .map((pathItem) => pathItem.path)\r\n    .reduce((a, b) => {\r\n      if (b.length) {\r\n        return `${a.replace(/\\/$/u, '')}/${b.replace(/^\\//u, '')}`;\r\n      }\r\n      return a;\r\n    }, '');\r\n}\r\n\r\nexport function getRoutePath<R extends AnyObject, C extends AnyObject>(chain: ReadonlyArray<ChainItem<R, C>>): string {\r\n  return getMatchedPath(chain.map((chainItem) => chainItem.route));\r\n}\r\n\r\nexport type ResolverOnlyContext<R extends AnyObject, C extends AnyObject> = Readonly<{ resolver: Router<R, C> }>;\r\n\r\ntype PartialRouteContext<R extends AnyObject, C extends AnyObject> = Readonly<{\r\n  chain?: ReadonlyArray<ChainItem<R, C>>;\r\n  hash?: string;\r\n  params?: IndexedParams;\r\n  pathname?: string;\r\n  resolver?: Router<R, C>;\r\n  redirectFrom?: string;\r\n  search?: string;\r\n}>;\r\n\r\nexport function createLocation<R extends AnyObject, C extends AnyObject>({\r\n  resolver,\r\n}: ResolverOnlyContext<R, C>): RouterLocation<R, C>;\r\nexport function createLocation<R extends AnyObject, C extends AnyObject>(\r\n  context: RouteContext<R, C>,\r\n  route?: Route<R, C>,\r\n): RouterLocation<R, C>;\r\nexport function createLocation<R extends AnyObject, C extends AnyObject>(\r\n  { chain = [], hash = '', params = {}, pathname = '', redirectFrom, resolver, search = '' }: PartialRouteContext<R, C>,\r\n  route?: Route<R, C>,\r\n): RouterLocation<R, C> {\r\n  const routes = chain.map((item) => item.route);\r\n  return {\r\n    baseUrl: resolver?.baseUrl ?? '',\r\n    getUrl: (userParams = {}) =>\r\n      resolver ? getPathnameForRouter(compile(getRoutePath(chain))({ ...params, ...userParams } as Partial<Record<string, string[]>>), resolver) : '',\r\n    hash,\r\n    params,\r\n    pathname,\r\n    redirectFrom,\r\n    route: route ?? (Array.isArray(routes) ? routes.at(-1) : undefined) ?? null,\r\n    routes,\r\n    search,\r\n    searchParams: new URLSearchParams(search),\r\n  };\r\n}\r\n\r\nexport function createRedirect<R extends AnyObject, C extends AnyObject>(\r\n  context: RouteContext<R, C>,\r\n  pathname: string,\r\n): RedirectResult {\r\n  const params = { ...context.params };\r\n  return {\r\n    redirect: {\r\n      from: context.pathname,\r\n      params,\r\n      pathname,\r\n    },\r\n  };\r\n}\r\n\r\nexport function renderElement<R extends AnyObject, C extends AnyObject, E extends WebComponentInterface<R, C>>(\r\n  context: RouteContext<R, C>,\r\n  element: E,\r\n): E {\r\n  element.location = createLocation(context);\r\n\r\n  if (context.chain) {\r\n    const index = context.chain.map((item) => item.route).indexOf(context.route);\r\n    context.chain[index].element = element;\r\n  }\r\n\r\n  return element;\r\n}\r\n\r\nexport function maybeCall<R, A extends unknown[], O extends object>(\r\n  callback: ((this: O, ...args: A) => R) | undefined,\r\n  thisArg: O,\r\n  ...args: A\r\n): R | undefined {\r\n  if (typeof callback === 'function') {\r\n    return callback.apply(thisArg, args);\r\n  }\r\n\r\n  return undefined;\r\n}\r\n\r\nexport function amend<\r\n  A extends readonly unknown[],\r\n  N extends keyof O,\r\n  O extends AnyObject & { [key in N]: (this: O, ...args: A) => ActionResult | undefined },\r\n>(fn: keyof O, obj: O | undefined, ...args: A): (result: ActionResult) => ActionResult | undefined {\r\n  return (result: ActionResult) => {\r\n    if (result && isObject(result) && ('cancel' in result || 'redirect' in result)) {\r\n      return result;\r\n    }\r\n\r\n    return maybeCall(obj?.[fn], obj!, ...args);\r\n  };\r\n}\r\n\r\nexport function processNewChildren<R extends AnyObject, C extends AnyObject>(\r\n  newChildren: Route<R, C> | ReadonlyArray<Route<R, C>> | undefined | void,\r\n  route: Route<R, C>,\r\n): void {\r\n  if (!Array.isArray(newChildren) && !isObject(newChildren)) {\r\n    throw new Error(\r\n      log(\r\n        `Incorrect \"children\" value for the route ${String(route.path)}: expected array or object, but got ${String(\r\n          newChildren,\r\n        )}`,\r\n      ),\r\n    );\r\n  }\r\n\r\n  const children = toArray(newChildren);\r\n  children.forEach((child) => ensureRoute(child));\r\n  route.__children = children;\r\n}\r\n\r\nexport function fireRouterEvent(type: string, detail: unknown): boolean {\r\n  return !window.dispatchEvent(new CustomEvent(`vaadin-router-${type}`, { cancelable: type === 'go', detail }));\r\n}\r\n\r\nexport function logValue(value: unknown): string {\r\n  if (typeof value !== 'object') {\r\n    return String(value);\r\n  }\r\n\r\n  const [stringType = 'Unknown'] = / (.*)\\]$/u.exec(String(value)) ?? [];\r\n  if (stringType === 'Object' || stringType === 'Array') {\r\n    return `${stringType} ${JSON.stringify(value)}`;\r\n  }\r\n  return stringType;\r\n}\r\n","import { fireRouterEvent } from \"../utils.js\";\nfunction vaadinRouterGlobalPopstateHandler(event) {\n  if (event.state === \"vaadin-router-ignore\") {\n    return;\n  }\n  const { hash, pathname, search } = window.location;\n  fireRouterEvent(\"go\", { hash, pathname, search });\n}\nconst POPSTATE = {\n  activate() {\n    window.addEventListener(\"popstate\", vaadinRouterGlobalPopstateHandler);\n  },\n  inactivate() {\n    window.removeEventListener(\"popstate\", vaadinRouterGlobalPopstateHandler);\n  }\n};\nvar popstate_default = POPSTATE;\nexport {\n  popstate_default as default\n};\n//# sourceMappingURL=popstate.js.map\n","import type { NavigationTrigger } from '../types.js';\r\nimport { fireRouterEvent } from '../utils.js';\r\n\r\nfunction vaadinRouterGlobalPopstateHandler(event: PopStateEvent) {\r\n  if (event.state === 'vaadin-router-ignore') {\r\n    return;\r\n  }\r\n  const { hash, pathname, search } = window.location;\r\n  fireRouterEvent('go', { hash, pathname, search });\r\n}\r\n\r\n/**\r\n * A navigation trigger for Vaadin Router that translates popstate events into\r\n * Vaadin Router navigation events.\r\n */\r\nconst POPSTATE: NavigationTrigger = {\r\n  activate() {\r\n    window.addEventListener('popstate', vaadinRouterGlobalPopstateHandler);\r\n  },\r\n\r\n  inactivate() {\r\n    window.removeEventListener('popstate', vaadinRouterGlobalPopstateHandler);\r\n  },\r\n};\r\n\r\nexport default POPSTATE;\r\n","import imgLogo from \"../logo-bckg-removed.png\"\r\n\r\nclass ChatHeader extends HTMLElement{\r\n    shadow!: ShadowRoot\r\n    constructor(){\r\n        super();\r\n        this.attachShadow({ mode: \"open\" })\r\n        this.render()\r\n    }\r\nconnectedCallback(){\r\n    this.render();\r\n\r\n}\r\nrender(){\r\n    const isChatPage = window.location.pathname.includes(\"/chat/\");\r\n    \r\n    this.shadowRoot!.innerHTML=`\r\n    <style>\r\n    div.header{\r\n        width:100vw;\r\n        margin:0;\r\n        padding:0;\r\n        background: linear-gradient(to bottom,rgb(39, 160, 176),rgba(12, 129, 74, 0.1));\r\n        height:80px;\r\n        display:flex;\r\n        align-items:center;\r\n        border-bottom: solid rgb(0,0,0,0.1) 1px\r\n    }\r\n    \r\n    img.logo{\r\n        width:150px; \r\n        height:48px; \r\n        margin-left:20px;\r\n    }\r\n    @media(width<600px){\r\n        img.chat-page{\r\n            margin-left:80px;\r\n        }\r\n    \r\n    }\r\n    </style>\r\n\r\n    <div class=\"header\">\r\n        <div class=\"logo-img\">\r\n            <img class=\"logo ${isChatPage ? \"chat-page\" :\"\" } \" src=${imgLogo} alt=\"logo image\" style=\"width:150px; height:48px;\">\r\n        </div>\r\n    </div>\r\n    `\r\n\r\n}\r\n}\r\ncustomElements.define(\"header-comp\", ChatHeader);\r\n","module.exports = new __parcel__URL__(\"logo-bckg-removed.217b7931.png\").toString();","import {Router} from \"@vaadin/router\"\r\nimport personIcon from \"../../person-icon.png\"\r\n\r\nclass Chatrooms extends HTMLElement{\r\n    constructor(){\r\n        super();\r\n\r\n    }\r\nconnectedCallback(){\r\n    this.render();\r\n\r\n}\r\nrender(){\r\n    const initURL='/live-chat'\r\n\r\n    this.innerHTML=`\r\n    <style>\r\n    \r\n    .private-buttons{\r\n        display: flex;\r\n        flex-direction: column;\r\n        align-items: center;\r\n        justify-content: center;\r\n        gap:10px;\r\n        padding-top: 5px;\r\n        width:80vw;\r\n    }\r\n\r\n    .public-buttons{\r\n            \r\n        display: flex;\r\n        flex-direction: row;\r\n        align-items: center;\r\n        justify-content: center;\r\n        padding-top: 5px;\r\n        width:80vw;\r\n    }\r\n    .pc-counts{\r\n        display:flex;\r\n        flex-direction:column;\r\n        gap:30px;   \r\n    }\r\n    @media(width>980px){\r\n        .pc-counts{\r\n            gap:22px;   \r\n        }\r\n    }\r\n    .chatselection-body{\r\n        height:100vh;\r\n        width: 100vw;\r\n        background:linear-gradient(to bottom,rgba(114, 232, 222, 0.87) , rgb(12, 129, 74,0.3));\r\n        display: flex;\r\n        flex-direction: column;\r\n        align-items: center;\r\n    }\r\n\r\n    h1{\r\n        margin-top: 60px;\r\n        color: rgb(255, 255, 255);\r\n        text-align: center;\r\n        -webkit-text-stroke: 0.1px rgb(0,0,0,0.5);\r\n    }\r\n\r\n    h3{\r\n        margin-top: 8px;\r\n        color: white;\r\n        text-align: center;\r\n        font-size: 25px;\r\n\r\n    }\r\n\r\n    @media(width>980px){\r\n        .chatselection-body{\r\n            \r\n        }\r\n        h1{\r\n            font-size:40px;\r\n            margin-top:30px;\r\n        }\r\n        h3{\r\n            font-size:30px;\r\n        }\r\n    }\r\n\r\n\r\n    button{\r\n        min-width:unset;\r\n        height:50px;\r\n        width:180px;\r\n        color:rgb(0,0,0,0.7);\r\n        background-color: rgba(43, 180, 198, 0.62);\r\n        border-radius:50px;\r\n        border:solid 2px rgb(255,255,255,0.5);\r\n        font-weight: bold;\r\n        font-size: 18px;\r\n        flex-shrink: 0;\r\n    }\r\n    @media(width>980px){\r\n        button{\r\n            font-size:22px;\r\n            height:55px;\r\n            width:220px;\r\n        }\r\n    }\r\n    .back-home-button{\r\n        position:absolute;\r\n        margin-top:110px;\r\n        left:20px;\r\n        min-width:unset;\r\n        width:60px;\r\n        height:30px;\r\n        background-color: rgba(43, 180, 198, 0.62);\r\n        color:rgb(0,0,0,0.7);\r\n        border-radius:50px;\r\n        border:solid 0.5px rgb(255,255,255,0.1);\r\n        font-weight: bold;\r\n        font-size:13px;\r\n    }\r\n    h2.pc-total, h2.pc1-participants, h2.pc2-participants, h2.pc3-participants{\r\n        text-align:right;\r\n        color:grey;\r\n        min-width:14px;\r\n        font-size:14px;\r\n        margin:0;\r\n        padding:0;\r\n        }\r\n    @media(width>980px){\r\n        h2.pc-total, h2.pc1-participants, h2.pc2-participants, h2.pc3-participants{\r\n            min-width:30px;\r\n            font-size:24px;\r\n        }\r\n    }\r\n    div.pc1-count, div.pc2-count, div.pc3-count{\r\n        display: flex;\r\n        flex-direction: row;\r\n        align-items:center;\r\n        justify-content:center;\r\n        width:100%;\r\n        margin:0;\r\n        padding:0;\r\n    }\r\n\r\n    div.popup-container{\r\n        display:flex;\r\n        align-items:center;\r\n        justify-content:center;\r\n        position:absolute;\r\n        z-index:100;\r\n        top:200px;\r\n        width:260px;\r\n    }\r\n    @media(width>600px){\r\n        div.popup-container{\r\n            width:50%;\r\n        \r\n        }\r\n    }\r\n    div.popup-join{\r\n        display:flex;\r\n        flex-direction:column;\r\n        width:100%;\r\n        height:100%;\r\n        border:solid 5px rgb(112, 211, 211);\r\n        border-radius:20px;\r\n        gap:20px;\r\n        background: linear-gradient(to bottom,rgba(60, 200, 220),rgb(12, 129, 140));\r\n    }\r\n    h2.insert-id{\r\n        margin:20px 20px 0 20px;\r\n        padding:0;\r\n        display:flex;\r\n        justify-content:center;\r\n        align-items:center;\r\n        text-align:center;\r\n    }\r\n    .join-form{\r\n        display:flex;\r\n        flex-direction:column;\r\n        align-items:center;\r\n        justify-content:center;\r\n        gap:10px;\r\n    }\r\n    .id-input{\r\n        width:70%;\r\n        // max-width:500px;\r\n        height:30px;\r\n        border-radius:5px;\r\n        padding-left:15px;\r\n    }\r\n\r\n    .button-join-chat{\r\n        background-color:rgba(114, 232, 222, 0.87);\r\n        margin-bottom:20px;\r\n\r\n    }\r\n    @media(width<415px){\r\n        .button-join-chat{\r\n            background-color:rgba(114, 232, 222, 0.87);\r\n            margin-bottom:20px;\r\n        }\r\n    }      \r\n\r\n    button.close-x{\r\n        all:unset;\r\n        position: absolute; \r\n        top: 10px;\r\n        right: 10px;\r\n        width: 30px;\r\n        height: 30px;\r\n        border: none;\r\n        border-radius:10px;\r\n        font-size: 20px;\r\n        font-weight: bold;\r\n        text-align: center;\r\n        line-height: 30px; \r\n        cursor: pointer;    \r\n    }\r\n\r\n    button.close-x:hover {\r\n        color:white;\r\n    }\r\n    .miss-alert-text{\r\n        color:#EA253D;\r\n        opacity:0.8;\r\n        font-size:20px;\r\n        font-weight:bold;\r\n    }\r\n    .public_chat_1, .public_chat_2, .public_chat_3{\r\n        margin-left:47px;\r\n    }\r\n    @media(width>980px){\r\n        .public_chat_1, .public_chat_2, .public_chat_3{\r\n            margin-left:99px;\r\n        }\r\n    }\r\n    \r\n    .create_private, .join_private{\r\n        margin-left:99px;\r\n        margin-right:100px;\r\n    }\r\n\r\n    img{\r\n        min-width:10px; \r\n        height:10px;\r\n        margin-left:5px;\r\n    }\r\n    @media(width>980px){\r\n        img{\r\n            min-width:20px; \r\n            height:20px;\r\n            margin-left:10px;\r\n        }\r\n    }\r\n    </style>\r\n\r\n\r\n    <button class=\"back-home-button\">BACK </button>\r\n    <div class=\"chatselection-body\">\r\n        <header-comp></header-comp>\r\n        <h1 class=\"select_chat\">Select a Chatroom</h1>\r\n        <h3 class=\"public_title\">Public</h3>\r\n        <div class=\"public-buttons\">\r\n            <div class=\"pc-buttons\">\r\n                <div class=\"pc1-button\">\r\n                    <button class=\"public_chat_1\">Chatroom 1</button>\r\n                </div>\r\n                <div class=\"pc2-button\">\r\n                    <button class=\"public_chat_2\">Chatroom 2</button>\r\n                </div>\r\n                <div class=\"pc3-button\">\r\n                    <button class=\"public_chat_3\">Chatroom 3</button>\r\n                </div>\r\n            </div>\r\n            <div class=\"pc-counts\">\r\n                <div class=\"pc1-count\">\r\n                    <h2 class=\"pc1-participants\">-</h2>\r\n                    <h2 class=\"pc-total\">/10</h2>\r\n                    <img src=${personIcon}>\r\n                </div>\r\n                <div class=\"pc2-count\">\r\n                    <h2 class=\"pc2-participants\">-</h2>\r\n                    <h2 class=\"pc-total\">/10</h2>\r\n                    <img src=${personIcon}>\r\n                </div>\r\n                <div class=\"pc3-count\">\r\n                    <h2 class=\"pc3-participants\">-</h2>\r\n                    <h2 class=\"pc-total\">/10</h2>\r\n                    <img src=${personIcon}>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <h3 class=\"private-title\">Private</h3>\r\n        <div class=\"private-buttons\">\r\n            <button class=\"create_private\">Create Chatroom</button>\r\n            <button class=\"join_private\">Join Chatroom</button>\r\n        </div>\r\n        <div class=\"popup-container\"></div>\r\n    </div>\r\n\r\n    `\r\n    const backbuttonEl = this.querySelector(\".back-home-button\")\r\n    backbuttonEl?.addEventListener(\"click\",((e)=>{\r\n        e.preventDefault();\r\n        const target = e.target as any\r\n        Router.go(initURL+\"/\")\r\n    }));\r\n\r\n}\r\n}\r\ncustomElements.define(\"chatrooms-page\", Chatrooms);\r\n","module.exports = new __parcel__URL__(\"person-icon.82649727.png\").toString();","import {Router} from \"@vaadin/router\"\r\nimport sendicon from \"../../send-icon2.png\"\r\n\r\nclass ChatPage extends HTMLElement{\r\n    constructor(){\r\n        super();\r\n    }\r\n    connectedCallback(){\r\n        this.render();\r\n        \r\n    }\r\n    render(){\r\n    var idShort=window.location.pathname.split(\"/\")[2]\r\n    this.innerHTML=`\r\n    <style>\r\n        \r\n    .chats-body{\r\n        height:100vh;\r\n        width: 100vw;\r\n        background-color:rgba(114, 232, 222, 0.1);\r\n        display: flex;\r\n        flex-direction: column;\r\n        align-items: center;\r\n    }\r\n\r\n    .back-button{\r\n        position:absolute;\r\n        margin-top:110px;\r\n        left:20px;\r\n        min-width:unset;\r\n        width:60px;\r\n        height:30px;\r\n        background-color: rgba(43, 180, 198);\r\n        color:rgb(0,0,0,0.7);\r\n        border-radius:50px;\r\n        border:solid 0.5px rgb(255,255,255,0.1);\r\n        font-weight: bold;\r\n        z-index:1000;\r\n    }\r\n    \r\n    @media(width<600px){\r\n        button.back-button{\r\n            margin-top:25px;\r\n            color:rgb(255,255,255);\r\n        }\r\n    }\r\n\r\n\r\n    form.form-send-msg{\r\n        display:flex;\r\n        justify-content:center;\r\n        position:absolute;\r\n        bottom:20px;\r\n        width:95vw;\r\n        max-width:1800px;\r\n        height:50px;\r\n        gap:5px;\r\n        padding-left:10px;\r\n    }\r\n\r\n\r\n\r\n    textarea.input-send-msg{\r\n        flex-grow:1;\r\n        height:45px;\r\n        border-radius:50px;\r\n        padding: 10px 3vw;\r\n        margin-top:5px;\r\n        max-width:1000px;\r\n        overflow-y: auto;\r\n        resize:none;\r\n        white-space: pre-wrap;\r\n        overflow-wrap: break-word;\r\n    }\r\n\r\n    button.button-send-msg{\r\n        width:50px; \r\n        height:100%;\r\n        border:none;\r\n        background-color: transparent;\r\n        cursor:pointer;\r\n        bottom:30px;\r\n        display:flex;\r\n        align-items:center;\r\n        justify-content:center;\r\n    }\r\n        \r\n    img.img-send-msg{\r\n        width: 40px;\r\n        height: 40px;\r\n        max-width: 50px ;\r\n        max-height: 50px ;\r\n        object-fit: contain;\r\n        display: block;\r\n    }\r\n\r\n    h2.id{\r\n        position:absolute;\r\n        top:30px;\r\n        right:5vw;\r\n        min-width:100px;\r\n        margin:0;\r\n        padding:0;\r\n        color: rgba(0, 140, 160);\r\n        font-size:20px;\r\n    }\r\n\r\n    \r\n    @media(width<600px){\r\n        h2.id{\r\n            font-size:14px;\r\n            padding-left:10px;\r\n        }\r\n    }\r\n        \r\n    .messages-container{\r\n        // border:solid 3px black;\r\n        flex-grow:1;\r\n        overflow-y:auto;\r\n        width:70vw;\r\n        max-width:900px;\r\n        margin-bottom: 75px;\r\n        display:flex;\r\n        flex-direction:column;\r\n    }\r\n    .message{\r\n        padding: 8px;\r\n        border-radius: 10px;\r\n        margin-bottom: 5px;\r\n        margin-left: 10px;\r\n        width: fit-content;\r\n        height: fit-content;\r\n        max-width: 80%;\r\n        word-wrap: break-word;\r\n        background:rgb(227, 253, 233);\r\n        align-self: flex-end;\r\n    }\r\n    .message.user {\r\n        background: #e3f2fd;\r\n        align-self: flex-start;\r\n    }\r\n\r\n    .user-msg.admin{\r\n        background:none;\r\n        font-weight: bold;\r\n        align-self: flex-end;\r\n    }\r\n    .user-msg{\r\n        background:none;\r\n        font-weight: bold;\r\n        align-self: flex-start;\r\n        padding-left:20px;\r\n        padding-top:10px;\r\n    }\r\n\r\n    </style>\r\n\r\n    <div class=\"chats-body\">\r\n        <header-comp></header-comp>\r\n        <h2 class=\"id\">ID: ${idShort}</h2>\r\n        <div class=\"messages-container\">\r\n        </div>\r\n        <button class=\"back-button\">BACK </button>\r\n        <form class=\"form-send-msg\">\r\n            <textarea  class=\"input-send-msg\" type=\"text\" placeholder=\"Write a message\"></textarea>\r\n            <button class=\"button-send-msg\">\r\n                <img class=\"img-send-msg\" src=\"${sendicon}\" >\r\n            </button>\r\n        </form>\r\n    </div>\r\n\r\n    `\r\n        };\r\n}\r\ncustomElements.define(\"chats-page\", ChatPage);\r\n","module.exports = new __parcel__URL__(\"send-icon2.da343077.png\").toString();","\r\nimport {Router} from \"@vaadin/router\"\r\nimport \"../router.ts\"\r\n// import {rtdb} from \"../backend/db.ts\"\r\n\r\n\r\nconst initURL='/live-chat'\r\n\r\n// const API_BASE_URL = \"http://localhost:3000\";\r\nconst API_BASE_URL = \"https://backend-live-chat.onrender.com\";\r\n\r\n// Check rooms and messages to delete\r\nfunction checkRooms(){\r\n  const username=localStorage.getItem(\"name\")\r\n  const color=localStorage.getItem(\"color\")\r\n\r\n  fetch(API_BASE_URL + \"/checkrooms\", {\r\n    method: \"PUT\",\r\n    headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({username: username, color: color}),\r\n\r\n  })\r\n    .then((res) => res.json())\r\n    .then((data) => {\r\n      console.log(data);\r\n      \r\n    });\r\n}\r\n\r\n// Get all users\r\nfunction getAllUsers() {\r\n  const username=localStorage.getItem(\"name\")\r\n  \r\n  fetch(API_BASE_URL + \"/getusers\", {\r\n    method: \"GET\",\r\n    headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n  })\r\n    .then((res) => res.json())\r\n    .then((data) => {\r\n      console.log(\"All users in chats are:\", data);\r\n      \r\n    });\r\n  }\r\n\r\n// Create a chatroom\r\nfunction createChatroom() {\r\n  const username=localStorage.getItem(\"name\")\r\n  const color=localStorage.getItem(\"color\")\r\n  \r\n  fetch(API_BASE_URL + \"/createchat\", {\r\n    method: \"POST\",\r\n    headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    body: JSON.stringify({name: username, color: color}),\r\n  })\r\n    .then((res) => res.json())\r\n    .then((data) => {\r\n      console.log(\"Room created with ID:\", data.idShort);\r\n      Router.go(initURL+\"/chat/\"+data.idShort)\r\n    });\r\n}\r\n\r\n// Add a participant to the db\r\nasync function addParticipant(idShort:string) {\r\n  const username=localStorage.getItem(\"name\")\r\n  const color=localStorage.getItem(\"color\")\r\n  const data= await listenRoom(idShort)\r\n  const fullid=data.idFull\r\n\r\n  fetch(API_BASE_URL + \"/chat/\" + idShort +\"/addparticipant\", {\r\n    method: \"PUT\",\r\n    headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    body: JSON.stringify({name: username, color: color, idShort: idShort, fullid:fullid}),\r\n  })\r\n    .then((res) => res.json())\r\n    .then((data) => {\r\n\r\n      console.log(\"The room \" + idShort + \" added the participant:\", username);\r\n    });\r\n}\r\n\r\n// Remove a participant from the db\r\nasync function removeParticipant() {\r\n  const username=localStorage.getItem(\"name\")\r\n  const idShort=window.location.pathname.split(\"/\")[2]\r\n  const data= await listenRoom(idShort)\r\n  const fullid=data.idFull\r\n\r\n  await fetch(API_BASE_URL + \"/chat/\"+ idShort +\"/removeparticipant\", {\r\n    method: \"PUT\",\r\n    headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({name: username, idShort: idShort, fullid:fullid}),\r\n    })\r\n\r\n  console.log(\"The room \" + idShort + \" removed the participant:\", username);\r\n    \r\n  await checkAndDeleteChatroom(idShort)\r\n}\r\n\r\n// Delete empty room\r\nasync function checkAndDeleteChatroom(idShort:string) {\r\n  const dataRoom= await listenRoom(idShort)\r\n  const numPart = dataRoom.chatroom.participants ? Object.keys(dataRoom.chatroom.participants).length : 0;\r\n  const fullid=dataRoom.idFull\r\n  if (numPart==1){\r\n  fetch(API_BASE_URL + \"/chat/\"+ idShort +\"/deletechatroom\", {\r\n    method: \"PUT\",\r\n    headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({ idShort: idShort, fullid:fullid}),\r\n    })\r\n    .then((res) => res.json())\r\n    .then((data) => {\r\n      console.log(\"The room \" + idShort + \" is deleted\");\r\n    });\r\n}}\r\n\r\n// Listen changes in a specific room\r\nasync function listenRoom(idShort: string) {\r\n  try{\r\n    const response = await fetch(API_BASE_URL + \"/chat/\" + idShort ,{\r\n      method: \"GET\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n\r\n    });\r\n    if (!response.ok) throw new Error(\"Error en la solicitud\")\r\n      const data = await response.json();\r\n    return data;\r\n  }catch (error){\r\n    console.log(\"ERROR at listening room\")\r\n    return null\r\n  }\r\n}\r\n\r\nfunction publicParticipantsLoad(){\r\n  listenToParticipants(\"22338437\")\r\n  listenToParticipants(\"4f94d8d9\")\r\n  listenToParticipants(\"96479775\")\r\n}  \r\n\r\n  // Listen to change in participant numbers \r\nasync function listenToParticipants(idShort:string) {\r\n  const roomData= await listenRoom(idShort)\r\n  const fullid=roomData.idFull\r\n  \r\n  const numPart=Object.keys(roomData.chatroom.participants).length-1\r\n  \r\n  if (idShort==\"22338437\"){\r\n    const counterEl = document.querySelector(\".pc1-participants\");\r\n    if (counterEl) counterEl.textContent = JSON.stringify(numPart)\r\n  }else if (idShort==\"4f94d8d9\"){\r\n    const counterEl = document.querySelector(\".pc2-participants\");\r\n    if (counterEl) counterEl.textContent = JSON.stringify(numPart)\r\n  }else if (idShort==\"96479775\"){\r\n    const counterEl = document.querySelector(\".pc3-participants\");\r\n    if (counterEl) counterEl.textContent = JSON.stringify(numPart)\r\n  }\r\n  return numPart\r\n}  \r\n\r\n// Write messages in the database\r\nasync function writeMessages(user: string, message: string) {\r\n  const idShort=window.location.pathname.split(\"/\")[2]\r\n  const time=Date.now()\r\n  const color= localStorage.getItem(\"color\")\r\n\r\n  const roomData= await listenRoom(idShort)\r\n  const fullid=roomData.idFull\r\n\r\n    fetch(API_BASE_URL + `/chat/${idShort}/writemessages`, {\r\n        method: \"PUT\",\r\n        headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n          body: JSON.stringify({ idShort: idShort, fullid:fullid, user:user, message:message, timestamp:time, color:color}),\r\n        })\r\n        .then((res) => res.json())\r\n        .then((data) => {\r\n          console.log(\"The message has been written.\")\r\n    }\r\n    );\r\n  }\r\n  \r\n// Listen messages on change\r\nasync function listenMessages(idShort: string) {\r\n  const roomData = await listenRoom(idShort);\r\n  const fullid = roomData.idFull;\r\n  const username=localStorage.getItem(\"name\")\r\n  console.log(\"the username is:\", username)\r\n  \r\n\r\n  const eventSource = new EventSource(`${API_BASE_URL}/chat/${idShort}/listenmessages?fullid=${fullid}`);\r\n\r\n  eventSource.onmessage = (event) => {\r\n      const data = JSON.parse(event.data);\r\n      \r\n      if (data.messages!=null){\r\n        console.log(\"Messages updated:\", data.messages); \r\n        renderMessages(data.messages);\r\n      }\r\n  };\r\n\r\n  eventSource.onerror = (error) => {\r\n      console.error(\"Error in the SSE:\", error);\r\n      eventSource.close();\r\n  };\r\n}\r\n\r\n\r\nfunction renderMessages(messages: Record<string, {username:string, color:string, message:string, timeInDB: number}>) {\r\n  const container = document.querySelector(\".messages-container\");\r\n  container!.innerHTML = \"\"; \r\n  \r\n  let previousUserMsg=\"\";\r\n  let n=0;\r\n  Object.entries(messages).forEach(([idTime, msgData]) => {\r\n    if (idTime!=\"0\"){\r\n      const messageEl = document.createElement(\"div\");\r\n      messageEl.classList.add(\"message\");\r\n      if (msgData.username==localStorage.getItem(\"name\") && msgData.color==localStorage.getItem(\"color\")){\r\n        var userAdmin=\"admin\"  \r\n      }else{\r\n        var userAdmin=\"user\"  \r\n        \r\n      }\r\n      messageEl.classList.add(`${userAdmin}`);\r\n      messageEl.textContent = msgData.message;\r\n      const userEl = document.createElement(\"p\");\r\n      userEl.classList.add(\"user-msg\");\r\n      userEl.classList.add(`${userAdmin}`);\r\n\r\n      const colorUser=msgData.color;\r\n      if(colorUser!=null){\r\n        userEl.style.color=colorUser;\r\n      }\r\n      if (userAdmin==\"user\"&&previousUserMsg!=msgData.username){\r\n        userEl.textContent = msgData.username;\r\n      }\r\n\r\n      container!.appendChild(userEl);\r\n      container!.appendChild(messageEl);\r\n      previousUserMsg=msgData.username\r\n      n+=1\r\n    }\r\n  });\r\n  if (container){\r\n    container.scrollTop=container.scrollHeight\r\n  }\r\n}\r\n\r\n\r\nexport {listenRoom, createChatroom, writeMessages, removeParticipant, addParticipant, \r\n  listenToParticipants, publicParticipantsLoad, checkAndDeleteChatroom, listenMessages,\r\n  getAllUsers, checkRooms}","import {Router} from '@vaadin/router';\r\n\r\nimport \"./pages/chatselection/index.ts\";\r\nimport \"./pages/homepage/index.ts\";\r\nimport \"./pages/chat/index.ts\";\r\n\r\n// const initURL=''\r\nconst initURL='/live-chat'\r\n\r\nconst router = new Router(document.querySelector(\".root\"), {\r\n  baseUrl: initURL,\r\n});\r\nconsole.log(\"se ha iniciado el router.\")\r\n\r\nconsole.log(\"la abse url del router es: \",router.baseUrl)\r\nrouter.setRoutes([\r\n  {path: '/', component: 'home-page'},\r\n  {path: '/chatrooms', component: 'chatrooms-page'},\r\n  {path: '/chat/:id', component: 'chats-page'},\r\n]);\r\n\r\n\r\n"],"names":["$parcel$interopDefault","a","__esModule","default","$parcel$global","globalThis","$parcel$modules","$parcel$inits","parcelRequire","$aee334e867208ba0$export$98e6a39c04603d36","str","options","tokens","$aee334e867208ba0$var$lexer","i","length","char","push","type","index","value","name","j","code","charCodeAt","TypeError","concat","count","pattern","_a","prefixes","_b","delimiter","result","key","path","tryConsume","mustConsume","undefined","nextType","consumeText","isSafe","_i","delimiter_1","indexOf","safePattern","prefix","prev","prevText","$aee334e867208ba0$var$escapeString","suffix","modifier","name_1","pattern_1","$aee334e867208ba0$export$5b9bad9e403cf3d9","reFlags","$aee334e867208ba0$var$flags","encode","x","validate","matches","map","token","RegExp","data","optional","repeat","Array","isArray","segment","test","String","typeOfMessage","replace","sensitive","$d9d3e6e22f6ea036$export$a6cdc56e425d0d0a","o","$d9d3e6e22f6ea036$export$f6e2535fb5126e54","f","$d9d3e6e22f6ea036$export$844ec244b1367d54","s","$d9d3e6e22f6ea036$export$45b10814cc054894","$d9d3e6e22f6ea036$export$bef1f36f5486a6a3","msg","id","exports","init","module","call","err","Error","register","parcelRegister","Object","defineProperty","get","$18c11f3350a906ea$export$6503ec6e8aabbaf","set","v","enumerable","configurable","$18c11f3350a906ea$var$mapping","Map","baseUrl","manifest","URL","url","toString","JSON","parse","$d9d3e6e22f6ea036$export$78c95b58762d2106","context","constructor","pathname","$d9d3e6e22f6ea036$export$264e4f112ccbf139","Symbol","$d9d3e6e22f6ea036$export$b09f2ff0bbcb43c7","$d9d3e6e22f6ea036$export$9085faa507254a1c","route","$5827ae9c1dc37950$var$cache","$5827ae9c1dc37950$var$decodeParam","val","decodeURIComponent","keys","$5827ae9c1dc37950$export$2e2bcd8739ae039","routePath","exact","parentKeys","parentParams","cacheKey","_path","regexp","$aee334e867208ba0$export$71304158c7e35877","parts","$aee334e867208ba0$var$regexpToRegexp","groupsRegex","execResult","exec","source","paths","join","strict","start","_c","end","_d","_e","_f","endsWith","endsWithRe","delimiterRe","tokens_1","mod","endToken","isEndDelimited","m","params","prop","hasOwn","split","$33b86c3940475ac4$export$2e2bcd8739ae039","$33b86c3940475ac4$var$matchRoute","ignoreLeadingSlash","match","childMatches","childIndex","routepath","startsWith","substring","next","routeToSkip","children","done","__children","childRoute","parent","matchedLength","charAt","childMatch","$6c597e935b3ed056$export$2e2bcd8739ae039","action","$330a99cf2659a530$export$b5e98c7d6c2b9496","errorMessage","warn","console","message","$330a99cf2659a530$export$2e2bcd8739ae039","errorHandler","resolveRoute","routes","__synthetic","hash","resolver","search","chain","root","__effectiveBaseUrl","document","baseURI","href","getRoutes","removeRoutes","resolve","pathnameOrContext","self","__normalizePathname","nextMatches","currentContext","resume","prevResult","$330a99cf2659a530$var$isDescendantRoute","maybeParent","_route","$330a99cf2659a530$var$updateChainForRoute","pop","slice","resolution","$330a99cf2659a530$var$isRouteContext","error","_error","cause","setRoutes","base","origin","normalizedUrl","addRoutes","$41c693d437999aea$var$getRouteByName","routesByName","routeName","$41c693d437999aea$export$2e2bcd8739ae039","cache","clear","$41c693d437999aea$var$cacheRoutes","cacheKeyProvider","has","cached","fullPath","rt","create","item","toPath","encodeURIComponent","stringifyQueryParams","queryParams","entries","query","$ce7a05f478de2e36$var$DEV_MODE_CODE_REGEXP","$ce7a05f478de2e36$var$FlowClients","window","Vaadin","Flow","clients","$ce7a05f478de2e36$var$uncommentAndRun","callback","args","Function","e","log","$ce7a05f478de2e36$export$75b841fa655dc08","developmentMode","$ce7a05f478de2e36$var$isDevelopmentMode","localStorage","getItem","location","hostname","productionModeApps","filter","client","productionMode","$aa000bcaed4d108c$var$__REGISTER__","vaadinObj","registrations","is","version","$807fa8d631faba60$var$willAnimate","elem","getComputedStyle","getPropertyValue","$807fa8d631faba60$var$waitForAnimation","cb","listener","removeEventListener","addEventListener","$807fa8d631faba60$var$animate","className","classList","add","Promise","rect","getBoundingClientRect","size","bottom","top","right","left","setAttribute","remove","removeAttribute","$f24d6edca6b27d4b$export$c05151d780e05e08","component","redirect","forEach","overriddenProp","$f24d6edca6b27d4b$export$a288cdf6a1a81f15","$f24d6edca6b27d4b$export$f0514b59ea71bf5a","router","$f24d6edca6b27d4b$export$4b553d2ff8d0a311","pathItems","pathItem","reduce","b","$f24d6edca6b27d4b$export$90c043f1c57770b8","redirectFrom","getUrl","userParams","chainItem","at","searchParams","URLSearchParams","$f24d6edca6b27d4b$export$9f7e219408b475f6","from","$f24d6edca6b27d4b$export$904cfe4529b56dee","thisArg","apply","$f24d6edca6b27d4b$export$38f45d231404a8d9","fn","obj","$f24d6edca6b27d4b$export$36dd1de443a195bb","detail","dispatchEvent","CustomEvent","cancelable","$3ea31ff2525bab2b$var$getNormalizedNodeName","Element","nodeName","toLowerCase","$3ea31ff2525bab2b$var$vaadinRouterGlobalClickHandler","event","defaultPrevented","button","shiftKey","ctrlKey","altKey","metaKey","anchorCandidate","target","MouseEvent","composedPath","Node","parentNode","anchor","hasAttribute","$3ea31ff2525bab2b$var$getAnchorOrigin","port","protocol","host","defaultHttp","preventDefault","scrollTo","$aff71581b687f200$var$vaadinRouterGlobalPopstateHandler","state","$a3fb241618c8c6d9$var$triggers","$a3fb241618c8c6d9$export$527ad8aac0f51e68","CLICK","activate","inactivate","POPSTATE","$a3fb241618c8c6d9$export$1612575e5ebd32d3","newTriggers","trigger","$7c59ada63ffb8a20$var$prevent","cancel","$7c59ada63ffb8a20$var$rootContext","__renderId","$7c59ada63ffb8a20$export$55185c17a0fcbe46","ready","WeakSet","bind","__previousContext","outlet","baseElement","head","querySelector","baseHref","getAttribute","values","setOutlet","subscribe","_","newChildren","child","commands","element","createElement","prevent","then","HTMLElement","getOutlet","skipRender","render","shouldUpdateHistory","renderId","ctx","contextWithChain","previousContext","__skipAttach","animationDone","assign","topOfTheChainContextBeforeRedirects","contextBeforeRedirects","contextAfterRedirects","topOfTheChainContextAfterRedirects","redirectsHappened","isFound","matchedPath","findNextContextIfAny","nextContext2","nextContext","__redirectCount","stringType","stringify","contextWithFullChain","amendedContext","newContext","previousChain","newChain","callbacks","__divergedChainIndex","Math","min","amendmentResult","chainElement","beforeLeaveFunction","beforeEnterFunction","otherElement","localName","redirectData","counter","urlForPath","DocumentFragment","history","title","PopStateEvent","deepestCommonParent","unchangedElement","parentElement","elementToAdd","appendChild","targetContext","currentComponent","onAfterLeave","includes","onAfterEnter","config","to","promises","animate","leave","enter","all","unsubscribe","setTriggers","triggers","urlForName","go","$8b2cd5f999582188$exports","$e7453e1bf0e39a4e$var$ChatHeader","attachShadow","mode","connectedCallback","isChatPage","shadowRoot","innerHTML","customElements","define","$ecaa8b9711b5322e$var$HomePage","container","warning","firstVisit","containsBadWords","text","textLower","badWords","some","word","getNiceRandomColor","r","floor","max","random","g","initURL","formEl","nameInput","elements","trim","setItem","divToChat","buttonDeleteEl","removeItem","$93f5404284e15007$exports","$ce4ca84d4ceca81d$var$Chatrooms","backbuttonEl","$4490c55d1790ab5f$exports","$54897bc0fa12a0bd$var$ChatPage","idShort","$e817d3341cf3ea9c$var$router","$8765107ad740dd46$var$API_BASE_URL","$8765107ad740dd46$export$590c8e4e60a086f","fetch","method","headers","body","username","color","res","json","$8765107ad740dd46$export$1a58a31768717a0c","fullid","$8765107ad740dd46$export$d301f6f8f77a2a94","idFull","$8765107ad740dd46$export$971a7382b074b466","$8765107ad740dd46$export$7c3f85fd24d3f52","dataRoom","numPart","chatroom","participants","response","ok","$8765107ad740dd46$export$cd380920575d3d6a","$8765107ad740dd46$export$83659e7c1ad7cc7d","roomData","counterEl","textContent","$8765107ad740dd46$export$dd0c7f4308217d35","user","time","Date","now","timestamp","$8765107ad740dd46$export$6563956773976c90","eventSource","EventSource","onmessage","messages","$8765107ad740dd46$var$renderMessages","previousUserMsg","n","idTime","msgData","messageEl","userAdmin","userEl","colorUser","style","scrollTop","scrollHeight","onerror","close","$0844466ed0f7159c$var$listurl","$0844466ed0f7159c$var$idShort","$0844466ed0f7159c$var$initURL","listurl","setInterval","contains","inputEl","inputValue","textarea","$8765107ad740dd46$var$initURL","participantsText","participantsCount","parseInt","isNaN","popupJoinEl","inputElement","alertEl"],"version":3,"file":"index.898e3a20.js.map"}