{"mappings":"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","sources":["node_modules/@parcel/runtime-browser-hmr/lib/runtime-7b14b1ca88e7165a.js","src/frontend/index.ts","src/pages/homepage/index.ts","node_modules/@vaadin/router/dist/index.js","node_modules/@vaadin/router/src/index.ts","node_modules/@vaadin/router/dist/router.js","node_modules/@vaadin/router/src/router.ts","node_modules/@vaadin/router/node_modules/path-to-regexp/dist.es2015/index.js","node_modules/@vaadin/router/node_modules/path-to-regexp/src/index.ts","node_modules/@parcel/transformer-js/src/esmodule-helpers.js","node_modules/@vaadin/router/dist/resolver/generateUrls.js","node_modules/@vaadin/router/src/resolver/generateUrls.ts","node_modules/@vaadin/router/dist/resolver/resolver.js","node_modules/@vaadin/router/src/resolver/resolver.ts","node_modules/@vaadin/router/dist/resolver/matchRoute.js","node_modules/@vaadin/router/src/resolver/matchRoute.ts","node_modules/@vaadin/router/dist/resolver/matchPath.js","node_modules/@vaadin/router/src/resolver/matchPath.ts","node_modules/@vaadin/router/dist/resolver/utils.js","node_modules/@vaadin/router/src/resolver/utils.ts","node_modules/@vaadin/router/dist/resolver/resolveRoute.js","node_modules/@vaadin/router/src/resolver/resolveRoute.ts","node_modules/@vaadin/router/dist/router-config.js","node_modules/@vaadin/router/src/router-config.ts","node_modules/@vaadin/router/dist/router-meta.js","node_modules/@vaadin/router/scripts/register.js","node_modules/@vaadin/router/src/router-meta.ts","node_modules/@vaadin/vaadin-usage-statistics/vaadin-usage-statistics.js","node_modules/@vaadin/vaadin-usage-statistics/vaadin-usage-statistics-collect.js","node_modules/@vaadin/vaadin-development-mode-detector/vaadin-development-mode-detector.js","node_modules/@vaadin/router/dist/transitions/animate.js","node_modules/@vaadin/router/src/transitions/animate.ts","node_modules/@vaadin/router/dist/triggers/navigation.js","node_modules/@vaadin/router/src/triggers/navigation.ts","node_modules/@vaadin/router/dist/triggers/click.js","node_modules/@vaadin/router/src/triggers/click.ts","node_modules/@vaadin/router/dist/utils.js","node_modules/@vaadin/router/src/utils.ts","node_modules/@vaadin/router/dist/triggers/popstate.js","node_modules/@vaadin/router/src/triggers/popstate.ts","src/components/header.ts","node_modules/@parcel/runtime-js/lib/runtime-7cd18488b85aac51.js","node_modules/@parcel/runtime-js/lib/helpers/bundle-url.js","src/pages/chatselection/index.ts","node_modules/@parcel/runtime-js/lib/runtime-b6a5d206fd045564.js","src/pages/chat/index.ts","node_modules/@parcel/runtime-js/lib/runtime-74890bd7bfc2f16d.js","src/frontend/api.ts","src/router.ts"],"sourcesContent":["var HMR_HOST = null;var HMR_PORT = null;var HMR_SECURE = false;var HMR_ENV_HASH = \"d6ea1d42532a7575\";var HMR_USE_SSE = false;module.bundle.HMR_BUNDLE_ID = \"abe7572201440a15\";\"use strict\";\n\n/* global HMR_HOST, HMR_PORT, HMR_ENV_HASH, HMR_SECURE, HMR_USE_SSE, chrome, browser, __parcel__import__, __parcel__importScripts__, ServiceWorkerGlobalScope */\n/*::\nimport type {\n  HMRAsset,\n  HMRMessage,\n} from '@parcel/reporter-dev-server/src/HMRServer.js';\ninterface ParcelRequire {\n  (string): mixed;\n  cache: {|[string]: ParcelModule|};\n  hotData: {|[string]: mixed|};\n  Module: any;\n  parent: ?ParcelRequire;\n  isParcelRequire: true;\n  modules: {|[string]: [Function, {|[string]: string|}]|};\n  HMR_BUNDLE_ID: string;\n  root: ParcelRequire;\n}\ninterface ParcelModule {\n  hot: {|\n    data: mixed,\n    accept(cb: (Function) => void): void,\n    dispose(cb: (mixed) => void): void,\n    // accept(deps: Array<string> | string, cb: (Function) => void): void,\n    // decline(): void,\n    _acceptCallbacks: Array<(Function) => void>,\n    _disposeCallbacks: Array<(mixed) => void>,\n  |};\n}\ninterface ExtensionContext {\n  runtime: {|\n    reload(): void,\n    getURL(url: string): string;\n    getManifest(): {manifest_version: number, ...};\n  |};\n}\ndeclare var module: {bundle: ParcelRequire, ...};\ndeclare var HMR_HOST: string;\ndeclare var HMR_PORT: string;\ndeclare var HMR_ENV_HASH: string;\ndeclare var HMR_SECURE: boolean;\ndeclare var HMR_USE_SSE: boolean;\ndeclare var chrome: ExtensionContext;\ndeclare var browser: ExtensionContext;\ndeclare var __parcel__import__: (string) => Promise<void>;\ndeclare var __parcel__importScripts__: (string) => Promise<void>;\ndeclare var globalThis: typeof self;\ndeclare var ServiceWorkerGlobalScope: Object;\n*/\nvar OVERLAY_ID = '__parcel__error__overlay__';\nvar OldModule = module.bundle.Module;\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData[moduleName],\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n  module.bundle.hotData[moduleName] = undefined;\n}\nmodule.bundle.Module = Module;\nmodule.bundle.hotData = {};\nvar checkedAssets /*: {|[string]: boolean|} */, disposedAssets /*: {|[string]: boolean|} */, assetsToDispose /*: Array<[ParcelRequire, string]> */, assetsToAccept /*: Array<[ParcelRequire, string]> */;\nfunction getHostname() {\n  return HMR_HOST || (location.protocol.indexOf('http') === 0 ? location.hostname : 'localhost');\n}\nfunction getPort() {\n  return HMR_PORT || location.port;\n}\n\n// eslint-disable-next-line no-redeclare\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = getHostname();\n  var port = getPort();\n  var protocol = HMR_SECURE || location.protocol == 'https:' && !['localhost', '127.0.0.1', '0.0.0.0'].includes(hostname) ? 'wss' : 'ws';\n  var ws;\n  if (HMR_USE_SSE) {\n    ws = new EventSource('/__parcel_hmr');\n  } else {\n    try {\n      ws = new WebSocket(protocol + '://' + hostname + (port ? ':' + port : '') + '/');\n    } catch (err) {\n      if (err.message) {\n        console.error(err.message);\n      }\n      ws = {};\n    }\n  }\n\n  // Web extension context\n  var extCtx = typeof browser === 'undefined' ? typeof chrome === 'undefined' ? null : chrome : browser;\n\n  // Safari doesn't support sourceURL in error stacks.\n  // eval may also be disabled via CSP, so do a quick check.\n  var supportsSourceURL = false;\n  try {\n    (0, eval)('throw new Error(\"test\"); //# sourceURL=test.js');\n  } catch (err) {\n    supportsSourceURL = err.stack.includes('test.js');\n  }\n\n  // $FlowFixMe\n  ws.onmessage = async function (event /*: {data: string, ...} */) {\n    checkedAssets = {} /*: {|[string]: boolean|} */;\n    disposedAssets = {} /*: {|[string]: boolean|} */;\n    assetsToAccept = [];\n    assetsToDispose = [];\n    var data /*: HMRMessage */ = JSON.parse(event.data);\n    if (data.type === 'reload') {\n      fullReload();\n    } else if (data.type === 'update') {\n      // Remove error overlay if there is one\n      if (typeof document !== 'undefined') {\n        removeErrorOverlay();\n      }\n      let assets = data.assets.filter(asset => asset.envHash === HMR_ENV_HASH);\n\n      // Handle HMR Update\n      let handled = assets.every(asset => {\n        return asset.type === 'css' || asset.type === 'js' && hmrAcceptCheck(module.bundle.root, asset.id, asset.depsByBundle);\n      });\n      if (handled) {\n        console.clear();\n\n        // Dispatch custom event so other runtimes (e.g React Refresh) are aware.\n        if (typeof window !== 'undefined' && typeof CustomEvent !== 'undefined') {\n          window.dispatchEvent(new CustomEvent('parcelhmraccept'));\n        }\n        await hmrApplyUpdates(assets);\n        hmrDisposeQueue();\n\n        // Run accept callbacks. This will also re-execute other disposed assets in topological order.\n        let processedAssets = {};\n        for (let i = 0; i < assetsToAccept.length; i++) {\n          let id = assetsToAccept[i][1];\n          if (!processedAssets[id]) {\n            hmrAccept(assetsToAccept[i][0], id);\n            processedAssets[id] = true;\n          }\n        }\n      } else fullReload();\n    }\n    if (data.type === 'error') {\n      // Log parcel errors to console\n      for (let ansiDiagnostic of data.diagnostics.ansi) {\n        let stack = ansiDiagnostic.codeframe ? ansiDiagnostic.codeframe : ansiDiagnostic.stack;\n        console.error(' [parcel]: ' + ansiDiagnostic.message + '\\n' + stack + '\\n\\n' + ansiDiagnostic.hints.join('\\n'));\n      }\n      if (typeof document !== 'undefined') {\n        // Render the fancy html overlay\n        removeErrorOverlay();\n        var overlay = createErrorOverlay(data.diagnostics.html);\n        // $FlowFixMe\n        document.body.appendChild(overlay);\n      }\n    }\n  };\n  if (ws instanceof WebSocket) {\n    ws.onerror = function (e) {\n      if (e.message) {\n        console.error(e.message);\n      }\n    };\n    ws.onclose = function () {\n      console.warn('[parcel]  Connection to the HMR server was lost');\n    };\n  }\n}\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n    console.log('[parcel]  Error resolved');\n  }\n}\nfunction createErrorOverlay(diagnostics) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n  let errorHTML = '<div style=\"background: black; opacity: 0.85; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; font-family: Menlo, Consolas, monospace; z-index: 9999;\">';\n  for (let diagnostic of diagnostics) {\n    let stack = diagnostic.frames.length ? diagnostic.frames.reduce((p, frame) => {\n      return `${p}\n<a href=\"/__parcel_launch_editor?file=${encodeURIComponent(frame.location)}\" style=\"text-decoration: underline; color: #888\" onclick=\"fetch(this.href); return false\">${frame.location}</a>\n${frame.code}`;\n    }, '') : diagnostic.stack;\n    errorHTML += `\n      <div>\n        <div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">\n           ${diagnostic.message}\n        </div>\n        <pre>${stack}</pre>\n        <div>\n          ${diagnostic.hints.map(hint => '<div> ' + hint + '</div>').join('')}\n        </div>\n        ${diagnostic.documentation ? `<div> <a style=\"color: violet\" href=\"${diagnostic.documentation}\" target=\"_blank\">Learn more</a></div>` : ''}\n      </div>\n    `;\n  }\n  errorHTML += '</div>';\n  overlay.innerHTML = errorHTML;\n  return overlay;\n}\nfunction fullReload() {\n  if ('reload' in location) {\n    location.reload();\n  } else if (extCtx && extCtx.runtime && extCtx.runtime.reload) {\n    extCtx.runtime.reload();\n  }\n}\nfunction getParents(bundle, id) /*: Array<[ParcelRequire, string]> */{\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n  var parents = [];\n  var k, d, dep;\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || Array.isArray(dep) && dep[dep.length - 1] === id) {\n        parents.push([bundle, k]);\n      }\n    }\n  }\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n  return parents;\n}\nfunction updateLink(link) {\n  var href = link.getAttribute('href');\n  if (!href) {\n    return;\n  }\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    if (link.parentNode !== null) {\n      // $FlowFixMe\n      link.parentNode.removeChild(link);\n    }\n  };\n  newLink.setAttribute('href',\n  // $FlowFixMe\n  href.split('?')[0] + '?' + Date.now());\n  // $FlowFixMe\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      // $FlowFixMe[incompatible-type]\n      var href /*: string */ = links[i].getAttribute('href');\n      var hostname = getHostname();\n      var servedFromHMRServer = hostname === 'localhost' ? new RegExp('^(https?:\\\\/\\\\/(0.0.0.0|127.0.0.1)|localhost):' + getPort()).test(href) : href.indexOf(hostname + ':' + getPort());\n      var absolute = /^https?:\\/\\//i.test(href) && href.indexOf(location.origin) !== 0 && !servedFromHMRServer;\n      if (!absolute) {\n        updateLink(links[i]);\n      }\n    }\n    cssTimeout = null;\n  }, 50);\n}\nfunction hmrDownload(asset) {\n  if (asset.type === 'js') {\n    if (typeof document !== 'undefined') {\n      let script = document.createElement('script');\n      script.src = asset.url + '?t=' + Date.now();\n      if (asset.outputFormat === 'esmodule') {\n        script.type = 'module';\n      }\n      return new Promise((resolve, reject) => {\n        var _document$head;\n        script.onload = () => resolve(script);\n        script.onerror = reject;\n        (_document$head = document.head) === null || _document$head === void 0 || _document$head.appendChild(script);\n      });\n    } else if (typeof importScripts === 'function') {\n      // Worker scripts\n      if (asset.outputFormat === 'esmodule') {\n        return __parcel__import__(asset.url + '?t=' + Date.now());\n      } else {\n        return new Promise((resolve, reject) => {\n          try {\n            __parcel__importScripts__(asset.url + '?t=' + Date.now());\n            resolve();\n          } catch (err) {\n            reject(err);\n          }\n        });\n      }\n    }\n  }\n}\nasync function hmrApplyUpdates(assets) {\n  global.parcelHotUpdate = Object.create(null);\n  let scriptsToRemove;\n  try {\n    // If sourceURL comments aren't supported in eval, we need to load\n    // the update from the dev server over HTTP so that stack traces\n    // are correct in errors/logs. This is much slower than eval, so\n    // we only do it if needed (currently just Safari).\n    // https://bugs.webkit.org/show_bug.cgi?id=137297\n    // This path is also taken if a CSP disallows eval.\n    if (!supportsSourceURL) {\n      let promises = assets.map(asset => {\n        var _hmrDownload;\n        return (_hmrDownload = hmrDownload(asset)) === null || _hmrDownload === void 0 ? void 0 : _hmrDownload.catch(err => {\n          // Web extension fix\n          if (extCtx && extCtx.runtime && extCtx.runtime.getManifest().manifest_version == 3 && typeof ServiceWorkerGlobalScope != 'undefined' && global instanceof ServiceWorkerGlobalScope) {\n            extCtx.runtime.reload();\n            return;\n          }\n          throw err;\n        });\n      });\n      scriptsToRemove = await Promise.all(promises);\n    }\n    assets.forEach(function (asset) {\n      hmrApply(module.bundle.root, asset);\n    });\n  } finally {\n    delete global.parcelHotUpdate;\n    if (scriptsToRemove) {\n      scriptsToRemove.forEach(script => {\n        if (script) {\n          var _document$head2;\n          (_document$head2 = document.head) === null || _document$head2 === void 0 || _document$head2.removeChild(script);\n        }\n      });\n    }\n  }\n}\nfunction hmrApply(bundle /*: ParcelRequire */, asset /*:  HMRAsset */) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n  if (asset.type === 'css') {\n    reloadCSS();\n  } else if (asset.type === 'js') {\n    let deps = asset.depsByBundle[bundle.HMR_BUNDLE_ID];\n    if (deps) {\n      if (modules[asset.id]) {\n        // Remove dependencies that are removed and will become orphaned.\n        // This is necessary so that if the asset is added back again, the cache is gone, and we prevent a full page reload.\n        let oldDeps = modules[asset.id][1];\n        for (let dep in oldDeps) {\n          if (!deps[dep] || deps[dep] !== oldDeps[dep]) {\n            let id = oldDeps[dep];\n            let parents = getParents(module.bundle.root, id);\n            if (parents.length === 1) {\n              hmrDelete(module.bundle.root, id);\n            }\n          }\n        }\n      }\n      if (supportsSourceURL) {\n        // Global eval. We would use `new Function` here but browser\n        // support for source maps is better with eval.\n        (0, eval)(asset.output);\n      }\n\n      // $FlowFixMe\n      let fn = global.parcelHotUpdate[asset.id];\n      modules[asset.id] = [fn, deps];\n    }\n\n    // Always traverse to the parent bundle, even if we already replaced the asset in this bundle.\n    // This is required in case modules are duplicated. We need to ensure all instances have the updated code.\n    if (bundle.parent) {\n      hmrApply(bundle.parent, asset);\n    }\n  }\n}\nfunction hmrDelete(bundle, id) {\n  let modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n  if (modules[id]) {\n    // Collect dependencies that will become orphaned when this module is deleted.\n    let deps = modules[id][1];\n    let orphans = [];\n    for (let dep in deps) {\n      let parents = getParents(module.bundle.root, deps[dep]);\n      if (parents.length === 1) {\n        orphans.push(deps[dep]);\n      }\n    }\n\n    // Delete the module. This must be done before deleting dependencies in case of circular dependencies.\n    delete modules[id];\n    delete bundle.cache[id];\n\n    // Now delete the orphans.\n    orphans.forEach(id => {\n      hmrDelete(module.bundle.root, id);\n    });\n  } else if (bundle.parent) {\n    hmrDelete(bundle.parent, id);\n  }\n}\nfunction hmrAcceptCheck(bundle /*: ParcelRequire */, id /*: string */, depsByBundle /*: ?{ [string]: { [string]: string } }*/) {\n  if (hmrAcceptCheckOne(bundle, id, depsByBundle)) {\n    return true;\n  }\n\n  // Traverse parents breadth first. All possible ancestries must accept the HMR update, or we'll reload.\n  let parents = getParents(module.bundle.root, id);\n  let accepted = false;\n  while (parents.length > 0) {\n    let v = parents.shift();\n    let a = hmrAcceptCheckOne(v[0], v[1], null);\n    if (a) {\n      // If this parent accepts, stop traversing upward, but still consider siblings.\n      accepted = true;\n    } else {\n      // Otherwise, queue the parents in the next level upward.\n      let p = getParents(module.bundle.root, v[1]);\n      if (p.length === 0) {\n        // If there are no parents, then we've reached an entry without accepting. Reload.\n        accepted = false;\n        break;\n      }\n      parents.push(...p);\n    }\n  }\n  return accepted;\n}\nfunction hmrAcceptCheckOne(bundle /*: ParcelRequire */, id /*: string */, depsByBundle /*: ?{ [string]: { [string]: string } }*/) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n  if (depsByBundle && !depsByBundle[bundle.HMR_BUNDLE_ID]) {\n    // If we reached the root bundle without finding where the asset should go,\n    // there's nothing to do. Mark as \"accepted\" so we don't reload the page.\n    if (!bundle.parent) {\n      return true;\n    }\n    return hmrAcceptCheck(bundle.parent, id, depsByBundle);\n  }\n  if (checkedAssets[id]) {\n    return true;\n  }\n  checkedAssets[id] = true;\n  var cached = bundle.cache[id];\n  assetsToDispose.push([bundle, id]);\n  if (!cached || cached.hot && cached.hot._acceptCallbacks.length) {\n    assetsToAccept.push([bundle, id]);\n    return true;\n  }\n}\nfunction hmrDisposeQueue() {\n  // Dispose all old assets.\n  for (let i = 0; i < assetsToDispose.length; i++) {\n    let id = assetsToDispose[i][1];\n    if (!disposedAssets[id]) {\n      hmrDispose(assetsToDispose[i][0], id);\n      disposedAssets[id] = true;\n    }\n  }\n  assetsToDispose = [];\n}\nfunction hmrDispose(bundle /*: ParcelRequire */, id /*: string */) {\n  var cached = bundle.cache[id];\n  bundle.hotData[id] = {};\n  if (cached && cached.hot) {\n    cached.hot.data = bundle.hotData[id];\n  }\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData[id]);\n    });\n  }\n  delete bundle.cache[id];\n}\nfunction hmrAccept(bundle /*: ParcelRequire */, id /*: string */) {\n  // Execute the module.\n  bundle(id);\n\n  // Run the accept callbacks in the new version of the module.\n  var cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    let assetsToAlsoAccept = [];\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      let additionalAssets = cb(function () {\n        return getParents(module.bundle.root, id);\n      });\n      if (Array.isArray(additionalAssets) && additionalAssets.length) {\n        assetsToAlsoAccept.push(...additionalAssets);\n      }\n    });\n    if (assetsToAlsoAccept.length) {\n      let handled = assetsToAlsoAccept.every(function (a) {\n        return hmrAcceptCheck(a[0], a[1]);\n      });\n      if (!handled) {\n        return fullReload();\n      }\n      hmrDisposeQueue();\n    }\n  }\n}","import \"../pages/homepage/index\"\r\nimport \"../pages/chatselection/index\"\r\nimport \"../pages/chat/index\"\r\nimport {Router} from \"@vaadin/router\"\r\n\r\nimport {listenRoom, createChatroom, writeMessages, removeParticipant, addParticipant, \r\n    listenToParticipants, publicParticipantsLoad, checkAndDeleteChatroom, listenMessages,\r\n    getAllUsers, checkRooms}\r\nfrom \"./api.ts\"\r\n\r\nconst listurl=window.location.pathname.split(\"/\")\r\nconst idShort=listurl[listurl.length-1]\r\n\r\n// const initURL='/live-chat'\r\nconst initURL=''\r\n\r\nwindow.addEventListener('popstate', (event) => {\r\n    console.log('The URL changed to: ', window.location.pathname);\r\n    const listurl=window.location.pathname.split(\"/\")\r\n    const idShort=listurl[listurl.length-1]\r\n\r\n    if (window.location.pathname.startsWith(initURL+\"/chatrooms\")) {\r\n        publicParticipantsLoad(); \r\n        checkRooms();\r\n\r\n    setInterval(() => {\r\n        if (window.location.pathname.startsWith(initURL+\"/chatrooms\")){\r\n            publicParticipantsLoad(); \r\n        }\r\n    }, 3000);\r\n    }\r\n    if (window.location.pathname.startsWith(initURL+\"/chat/\"+idShort)) {\r\n        window.addEventListener(\"DOMContentLoaded\", () => {\r\n            addParticipant(idShort);\r\n        });\r\n    }\r\n    if (window.location.pathname.startsWith(initURL+\"/chat/\")) {\r\n        listenMessages(idShort); \r\n    }\r\n});\r\n\r\nif (window.location.pathname.startsWith(initURL+\"/chatrooms\")) {\r\n    const name=localStorage.getItem(\"name\")\r\n    const color=localStorage.getItem(\"color\")\r\n    if (!name&&!color){\r\n        Router.go(\"/\")\r\n    }\r\n    publicParticipantsLoad(); \r\n    checkRooms();\r\n    \r\n    setInterval(() => {\r\n        if (window.location.pathname.startsWith(initURL+\"/chatrooms\")){\r\n            publicParticipantsLoad(); \r\n        }\r\n    }, 3000);\r\n}\r\nif (window.location.pathname.startsWith(initURL+\"/chat/\"+idShort)) {\r\n    const name=localStorage.getItem(\"name\")\r\n    const color=localStorage.getItem(\"color\")\r\n    if (!name&&!color){\r\n        Router.go(\"/\")\r\n    }\r\n\r\n\r\n    window.addEventListener(\"DOMContentLoaded\", () => {\r\n        addParticipant(idShort);\r\n    });\r\n}\r\n\r\n\r\ndocument.addEventListener(\"submit\", async (event) => {\r\n    const target = event.target as HTMLElement;\r\n\r\n    if (target.classList.contains(\"form-send-msg\")) {\r\n        event.preventDefault();\r\n        const inputEl = document.querySelector(\".input-send-msg\") as HTMLInputElement\r\n        const inputValue = inputEl.value;\r\n        const username=localStorage.getItem(\"name\")!\r\n        writeMessages(username, inputValue)\r\n        inputEl.value=\"\";\r\n    }\r\n})   \r\n\r\ndocument!.addEventListener(\"keydown\", function (e) {\r\n    const target = e.target as HTMLElement;\r\n\r\n    if (target.classList.contains(\"input-send-msg\")) {\r\n        const textarea = document.querySelector(\".input-send-msg\") as HTMLInputElement\r\n        const inputValue = textarea.value;\r\n        const username=localStorage.getItem(\"name\")\r\n        if (username && e.key === \"Enter\" && !e.shiftKey) {\r\n            e.preventDefault(); \r\n            writeMessages(username, inputValue)\r\n            textarea.value=\"\";\r\n  }\r\n}\r\n});\r\n\r\n\r\nif (window.location.pathname.startsWith(initURL+\"/chat/\")) {\r\n    listenMessages(idShort); \r\n}\r\n\r\ndocument.addEventListener(\"click\", async (event) => {\r\n    const target = event.target as HTMLElement;\r\n    \r\n    if (target.classList.contains(\"create_private\")) {\r\n        event.preventDefault();\r\n        createChatroom();\r\n    }\r\n    else if (target.classList.contains(\"back-button\")) {\r\n        event.preventDefault();\r\n        removeParticipant();\r\n        Router.go(initURL+\"/chatrooms\")\r\n    }\r\n    else if (target.classList.contains(\"public_chat_1\")) {\r\n        event.preventDefault();\r\n        const participantsText = document.querySelector(\".pc1-participants\")!;\r\n        if (participantsText && participantsText.textContent) {\r\n        const participantsCount = parseInt(participantsText.textContent, 10);\r\n        if (!isNaN(participantsCount) && participantsCount <= 10) {\r\n            const idShort=\"22338437\"\r\n            Router.go(initURL+\"/chat/\"+idShort);\r\n            addParticipant(idShort);\r\n        }}\r\n      }\r\n    else if (target.classList.contains(\"public_chat_2\")) {\r\n        event.preventDefault();\r\n        const participantsText = document.querySelector(\".pc2-participants\")!;\r\n        if (participantsText && participantsText.textContent) {\r\n        const participantsCount = parseInt(participantsText.textContent, 10);\r\n        if (!isNaN(participantsCount) && participantsCount <= 10) {\r\n            const idShort=\"4f94d8d9\"\r\n            Router.go(initURL+\"/chat/\"+idShort);\r\n            addParticipant(idShort);\r\n        }}\r\n      }\r\n    else if (target.classList.contains(\"public_chat_3\")) {\r\n        event.preventDefault();\r\n        const participantsText = document.querySelector(\".pc3-participants\")!;\r\n        if (participantsText && participantsText.textContent) {\r\n        const participantsCount = parseInt(participantsText.textContent, 10);\r\n        if (!isNaN(participantsCount) && participantsCount <= 10) {\r\n            const idShort=\"96479775\"\r\n            Router.go(initURL+\"/chat/\"+idShort);\r\n            addParticipant(idShort);\r\n        }}\r\n      }\r\n    else if (target.classList.contains(\"join_private\")) {\r\n        event.preventDefault();\r\n        const popupJoinEl=document.querySelector(\".popup-container\")\r\n        popupJoinEl!.innerHTML=`\r\n        <div class=\"popup-join\">\r\n            <h2 class=\"insert-id\">Insert ChatRoom ID to join</h2>\r\n            <form class=\"join-form\">\r\n                <input class=\"id-input\" placeholder=\"ID: 12345678\">\r\n                <div class=\"id-miss-alert\"></div>\r\n                <button class=\"button-join-chat\">Enter ChatRoom </button>\r\n            </form>\r\n            <button type=\"submit\" class=\"close-x\">x</button>\r\n        </div>\r\n        `\r\n      }\r\n    else if (target.classList.contains(\"close-x\")) {\r\n        event.preventDefault();\r\n        const popupJoinEl=document.querySelector(\".popup-container\")\r\n        popupJoinEl!.innerHTML=``\r\n      }\r\n    else if (target.classList.contains(\"button-join-chat\")) {\r\n        event.preventDefault();\r\n        const inputElement = document.querySelector(\".id-input\")! as HTMLInputElement\r\n        const idShort=inputElement.value\r\n        if (idShort.length!=8){\r\n            const alertEl=document.querySelector(\".id-miss-alert\")\r\n            alertEl!.innerHTML=`<p class=\"miss-alert-text\">The ID must have 8 characters.</p>`\r\n        }else{\r\n            const test=await listenRoom(idShort)\r\n            const numPart=test? Object.keys(test.chatroom.participants).length-1:0\r\n\r\n            if (test!=null && numPart<1){ \r\n                // The room exists and it is not full\r\n                console.log(\"you entered to the room with the idShort:\" ,idShort)\r\n                Router.go(initURL+\"/chat/\"+idShort);\r\n                addParticipant(idShort);\r\n            }else if (numPart ==1){\r\n                const alertEl=document.querySelector(\".id-miss-alert\")\r\n                alertEl!.innerHTML=`<p class=\"miss-alert-text\">The room is full. Please try again later!</p>`\r\n            }else{\r\n                const alertEl=document.querySelector(\".id-miss-alert\")\r\n                alertEl!.innerHTML=`<p class=\"miss-alert-text\">The Chatroom does not exist!</p>`\r\n            }\r\n        }\r\n      }\r\n    ;}\r\n  );\r\n\r\n","import {Router} from \"@vaadin/router\"\r\nimport \"../../components/header.ts\"\r\n\r\nclass HomePage extends HTMLElement{\r\n    name: string|null|undefined\r\n    warning: string|null|undefined\r\n    shadow!: ShadowRoot\r\n    container!: HTMLDivElement;\r\n    constructor(){\r\n        super();\r\n        this.attachShadow({ mode: \"open\" })\r\n        this.container=document.createElement(\"div\");\r\n        this.shadowRoot!.appendChild(this.container);\r\n        this.container.className=\"shadow\"\r\n        this.name=localStorage.getItem(\"name\")\r\n        this.warning=``\r\n    }\r\nfirstVisit(){\r\n    return this.name===null||undefined\r\n}\r\ncontainsBadWords(text:string){\r\n    const badWords=[\"ass\", \"nig\", \"whore\", \"dick\", \"hole\", \"bitch\",\"pussy\",\"69\",\"suck\", \"cock\",\"sex\",\"fuck\",\"fagg\",\"puta\",\"puto\",\"nazi\",\r\n        \"gil\",\"polla\",\"pene\",\"verga\",\"subnor\",\"imbecil\",\"foll\",\"coi\",\"coo\",\"vagin\",\"choch\",\"chucha\",\"hdp\", \"moro\",\"null\",\"undefined\",\r\n        \"raul\",\"Raul\",\"ral\",\"Ral\"]\r\n    const textLower=text.toLowerCase();\r\n    return badWords.some(word => textLower.includes(word));\r\n}\r\n\r\nconnectedCallback(){    \r\n    // the router needs to add empty component, so we insert HTML in connectedCallback() that executes after putting the element in the DOM.\r\n    this.render(); \r\n}\r\ngetNiceRandomColor() {\r\n    const min = 100;\r\n    const max = 200;\r\n    const r = Math.floor(Math.random() * (max - min) + min);\r\n    const g = Math.floor(Math.random() * (max - min) + min);\r\n    const b = Math.floor(Math.random() * (max - min) + min);\r\n    return `rgb(${r}, ${g}, ${b})`;\r\n}\r\n\r\nrender(){\r\n    this.container!.innerHTML=`\r\n    <style>\r\n    .homepage-body{\r\n        height:100vh;\r\n        width: 100vw;\r\n        background:linear-gradient(to bottom,rgba(114, 232, 222, 0.87) , rgb(12, 129, 74,0.3));\r\n        display: flex;\r\n        flex-direction: column;\r\n        align-items: center;\r\n    }\r\n    header-comp{\r\n        margin-bottom:100px;\r\n    }\r\n    h1, h2, p{\r\n        margin: 0;\r\n        color: white;\r\n    }\r\n    div.titles{\r\n        display:flex;\r\n        flex-direction:column;\r\n        align-items:center;\r\n        gap:10px;\r\n        padding-bottom:30px;\r\n    }\r\n    \r\n    @media (width>600px){\r\n        div.titles{\r\n            flex-direction:row;\r\n        }\r\n    }\r\n\r\n    h1{\r\n        font-size:40px;\r\n        -webkit-text-stroke: 0.1px rgb(0,0,0,0.5);\r\n    } \r\n\r\n    @media(width>980px){\r\n        h1{\r\n            font-size:60px;\r\n        }\r\n    }\r\n\r\n    div.label-input{\r\n        display:flex;\r\n        justify-content:center;\r\n        margin-bottom:15px;\r\n    }\r\n\r\n    label{\r\n        font-size:20px;\r\n        font-weight:bold;\r\n    \r\n    }\r\n    input{\r\n        width:35vW;\r\n        height:30px;\r\n        padding-left:20px;\r\n        border-radius:50px;\r\n    }\r\n\r\n    button{\r\n        color:rgb(0,0,0,0.7);\r\n        background-color: rgba(43, 180, 198, 0.62);\r\n        border-radius:50px;\r\n        border:solid 2px rgb(255,255,255,0.5);\r\n        margin-left:5px;\r\n        font-weight:bold;\r\n        font-size:16px;\r\n        height:50px;\r\n        width:180px;\r\n        font-family: \"McLaren\";\r\n\r\n    }\r\n\r\n    @media(width<600px){\r\n        .input-button{\r\n            flex-direction:column;\r\n        }\r\n        input{\r\n            width:200px;\r\n        }\r\n    }\r\n    @media(width>980px){\r\n        label{\r\n            font-size:30px;\r\n            margin-bottom:20px;\r\n        }\r\n        input{\r\n            width:400px;\r\n            height:30px;\r\n        }\r\n        button{\r\n            font-size:22px;\r\n            height:55px;\r\n            width:220px;\r\n        }\r\n        \r\n    }\r\n\r\n    h2{\r\n        display:flex;\r\n        gap:10px;\r\n\r\n    }\r\n    span.name{\r\n        background-color:white;\r\n        color: rgb(39, 160, 176);\r\n        padding-right:10px;\r\n        padding-left:10px;\r\n        // font-style: oblique;\r\n        border-radius:50px;\r\n    }\r\n    form{\r\n        width:100vw;\r\n    }\r\n    .input-button{\r\n        display:flex;\r\n        gap:20px;\r\n        justify-content:center;\r\n        align-items:center;\r\n    }\r\n    div.badwords{\r\n        height:100px;\r\n        width:100vw;\r\n        display:flex;\r\n        justify-content:center;\r\n        padding-top:30px;\r\n    }\r\n\r\n    p.warning{\r\n        color: #EA253D;\r\n        opacity:0.7;\r\n        font-size:20px;\r\n        font-weight:bold;\r\n    }\r\n    \r\n    @media(width>980px){\r\n        p.warning{\r\n            font-size:30px;\r\n        }\r\n    }\r\n\r\n    .to-chatrooms{\r\n        margin-top:20px;\r\n        color-background:;\r\n    }\r\n    \r\n    .change-name{\r\n        margin-top:20px;\r\n    }\r\n\r\n    </style>\r\n\r\n\r\n    <div class=\"homepage-body\">\r\n    <header-comp></header-comp>\r\n        <div class=\"titles\">\r\n            <h1 class=\"main_title-welcome\">Welcome to </h1>\r\n            <h1 class=\"main_title-livechat\"> Raul's LiveChat</h1>\r\n        </div>\r\n    ${this.firstVisit()? \r\n        `<form class=\"form\">\r\n            <div class=\"label-input\">\r\n                <label class=\"enter_name\">Enter your name</label>\r\n            </div> \r\n            <div class=\"input-button\">\r\n                <input class=\"input_name\" type=\"text\" name=\"name\" placeholder=\"Name\">\r\n                <button class=\"form_button\">Start LiveChat</button>\r\n            </div>\r\n        </form>       \r\n        <div class=\"badwords\">`+this.warning+`</div>\r\n        `:\r\n        `<h2 class=\"subtitle\">Welcome back    <span class=\"name\">${this.name}</span>!</h2>    \r\n        <button class=\"to-chatrooms\">Start LiveChat</button>\r\n        <button class=\"change-name\">Change Name</button>\r\n        </div>`\r\n    }`\r\n        //set the form \r\n        const formEl = this.container.querySelector(\".form\")\r\n        if (formEl){\r\n        formEl?.addEventListener(\"submit\",((e)=>{\r\n            e.preventDefault();\r\n            const target = e.target as any\r\n            const nameInput=target.elements.name.value.trim()\r\n    \r\n            if (this.containsBadWords(nameInput)||nameInput===\"\"){\r\n                this.warning=`<p class=\"warning\">Please, use other words as a name.</p>`\r\n                this.render()\r\n            }\r\n            else{\r\n                localStorage.setItem(\"name\", nameInput)\r\n                localStorage.setItem(\"color\", this.getNiceRandomColor())\r\n                this.name=nameInput\r\n                Router.go(\"/live-chat/chatrooms\"); \r\n            } \r\n        }))}\r\n    \r\n        //button to chatrooms\r\n        const divToChat=this.container.querySelector(\".to-chatrooms\")\r\n        if(divToChat){\r\n    \r\n            divToChat.addEventListener(\"click\",((e)=>{\r\n                e.preventDefault();\r\n                Router.go(\"/live-chat/chatrooms\")\r\n            }))\r\n        }\r\n        \r\n        //button change name\r\n        const buttonDeleteEl=this.container.querySelector(\".change-name\")\r\n        if (buttonDeleteEl){\r\n    \r\n            buttonDeleteEl?.addEventListener(\"click\",((e)=>{\r\n                e.preventDefault();\r\n                const target = e.target as any\r\n                localStorage.removeItem(\"name\")\r\n                this.name=null\r\n                this.render()\r\n            }))\r\n        }\r\n    \r\n}\r\n}\r\ncustomElements.define(\"home-page\", HomePage);\r\n",null,"export * from './router.js';\r\nexport type * from './types.js';\r\nexport {\r\n  processNewChildren,\r\n  amend,\r\n  maybeCall,\r\n  renderElement,\r\n  createRedirect,\r\n  createLocation,\r\n  getMatchedPath,\r\n  getPathnameForRouter,\r\n  copyContextWithoutNext,\r\n} from './utils.js';\r\n",null,"/* eslint-disable @typescript-eslint/consistent-return */\r\nimport { compile } from 'path-to-regexp';\r\nimport type { EmptyObject, Writable } from 'type-fest';\r\nimport generateUrls from './resolver/generateUrls.js';\r\nimport Resolver from './resolver/resolver.js';\r\nimport './router-config.js';\r\nimport { getNotFoundError, isFunction, isObject, isString, log, notFoundResult } from './resolver/utils.js';\r\nimport animate from './transitions/animate.js';\r\nimport { DEFAULT_TRIGGERS, setNavigationTriggers } from './triggers/navigation.js';\r\nimport type {\r\n  ActionResult,\r\n  AnyObject,\r\n  Commands,\r\n  ChainItem,\r\n  ContextExtension,\r\n  EmptyCommands,\r\n  NavigationTrigger,\r\n  Params,\r\n  PreventAndRedirectCommands,\r\n  PreventCommands,\r\n  PreventResult,\r\n  RedirectContextInfo,\r\n  RedirectResult,\r\n  ResolveContext,\r\n  Route,\r\n  RouteContext,\r\n  RouteExtension,\r\n  RouterLocation,\r\n  WebComponentInterface,\r\n  RouterOptions,\r\n  ActionValue,\r\n  NextResult,\r\n} from './types.js';\r\nimport {\r\n  amend,\r\n  copyContextWithoutNext,\r\n  createLocation,\r\n  createRedirect,\r\n  ensureRoutes,\r\n  fireRouterEvent,\r\n  getMatchedPath,\r\n  getPathnameForRouter,\r\n  logValue,\r\n  maybeCall,\r\n  processNewChildren,\r\n  renderElement,\r\n} from './utils.js';\r\n\r\nconst MAX_REDIRECT_COUNT = 256;\r\n\r\nfunction prevent(): PreventResult {\r\n  return { cancel: true };\r\n}\r\n\r\nconst rootContext: RouteContext = {\r\n  __renderId: -1,\r\n  params: {},\r\n  route: {\r\n    __synthetic: true,\r\n    children: [],\r\n    path: '',\r\n    action() {\r\n      return undefined;\r\n    },\r\n  },\r\n  pathname: '',\r\n  // eslint-disable-next-line @typescript-eslint/require-await\r\n  async next() {\r\n    return notFoundResult;\r\n  },\r\n};\r\n\r\n/**\r\n * A simple client-side router for single-page applications. It uses\r\n * express-style middleware and has a first-class support for Web Components and\r\n * lazy-loading. Works great in Polymer and non-Polymer apps.\r\n *\r\n * Use `new Router(outlet, options)` to create a new Router instance.\r\n *\r\n * * The `outlet` parameter is a reference to the DOM node to render\r\n *   the content into.\r\n *\r\n * * The `options` parameter is an optional object with options. The following\r\n *   keys are supported:\r\n *   * `baseUrl`  the initial value for [\r\n *     the `baseUrl` property\r\n *   ](#/classes/Router#property-baseUrl)\r\n *\r\n * The Router instance is automatically subscribed to navigation events\r\n * on `window`.\r\n *\r\n * See [Live Examples](#/classes/Router/demos/demo/index.html) for the detailed usage demo and code snippets.\r\n *\r\n * See also detailed API docs for the following methods, for the advanced usage:\r\n *\r\n * * [setOutlet](#/classes/Router#method-setOutlet)  should be used to configure the outlet.\r\n * * [setTriggers](#/classes/Router#method-setTriggers)  should be used to configure the navigation events.\r\n * * [setRoutes](#/classes/Router#method-setRoutes)  should be used to configure the routes.\r\n *\r\n * Only `setRoutes` has to be called manually, others are automatically invoked when creating a new instance.\r\n */\r\nexport class Router<R extends AnyObject = EmptyObject, C extends AnyObject = EmptyObject> extends Resolver<\r\n  ActionValue,\r\n  RouteExtension<R, C>,\r\n  ContextExtension<R, C>\r\n> {\r\n  /**\r\n   * Contains read-only information about the current router location:\r\n   * pathname, active routes, parameters. See the\r\n   * [Location type declaration](#/classes/RouterLocation)\r\n   * for more details.\r\n   */\r\n  location = createLocation({ resolver: this });\r\n\r\n  /**\r\n   * A promise that is settled after the current render cycle completes. If\r\n   * there is no render cycle in progress the promise is immediately settled\r\n   * with the last render cycle result.\r\n   */\r\n  ready: Promise<RouterLocation<R, C>> = Promise.resolve(this.location);\r\n\r\n  readonly #addedByRouter = new WeakSet<Element>();\r\n  readonly #createdByRouter = new WeakSet<Element>();\r\n  readonly #navigationEventHandler = this.#onNavigationEvent.bind(this);\r\n\r\n  #lastStartedRenderId = 0;\r\n  #outlet: Element | DocumentFragment | null | undefined;\r\n  private __previousContext?: RouteContext<R, C>;\r\n\r\n  #urlForName?: ReturnType<typeof generateUrls>;\r\n\r\n  #appearingContent: Element[] | null = null;\r\n  #disappearingContent: Element[] | null = null;\r\n\r\n  /**\r\n   * Creates a new Router instance with a given outlet, and\r\n   * automatically subscribes it to navigation events on the `window`.\r\n   * Using a constructor argument or a setter for outlet is equivalent:\r\n   *\r\n   * ```\r\n   * const router = new Router();\r\n   * router.setOutlet(outlet);\r\n   * ```\r\n   * @param outlet - a container to render the resolved route\r\n   * @param options - an optional object with options\r\n   */\r\n  constructor(outlet?: Element | DocumentFragment | null, options?: RouterOptions<R, C>) {\r\n    const baseElement = document.head.querySelector('base');\r\n    const baseHref = baseElement?.getAttribute('href');\r\n    super([], {\r\n      baseUrl: baseHref ? new URL(baseHref, document.URL).href.replace(/[^/]*$/u, '') : undefined,\r\n      ...options,\r\n      resolveRoute: async (context) => await this.#resolveRoute(context),\r\n    });\r\n\r\n    setNavigationTriggers(Object.values(DEFAULT_TRIGGERS));\r\n\r\n    this.setOutlet(outlet);\r\n    this.subscribe();\r\n  }\r\n\r\n  async #resolveRoute(context: RouteContext<R, C>): Promise<ActionResult | RouteContext<R, C>> {\r\n    const { route } = context;\r\n\r\n    if (isFunction(route.children)) {\r\n      let children = await route.children(copyContextWithoutNext(context));\r\n\r\n      // The route.children() callback might have re-written the\r\n      // route.children property instead of returning a value\r\n      if (!isFunction(route.children)) {\r\n        // eslint-disable-next-line no-param-reassign\r\n        ({ children } = route);\r\n      }\r\n      processNewChildren(children, route);\r\n    }\r\n\r\n    const commands: Commands = {\r\n      component: (component: string) => {\r\n        const element = document.createElement(component);\r\n        this.#createdByRouter.add(element);\r\n        return element;\r\n      },\r\n      prevent,\r\n      redirect: (path) => createRedirect(context, path),\r\n    };\r\n\r\n    return await Promise.resolve()\r\n      .then(async () => {\r\n        if (this.#isLatestRender(context)) {\r\n          // eslint-disable-next-line @typescript-eslint/unbound-method\r\n          return await maybeCall(route.action, route, context, commands);\r\n        }\r\n      })\r\n      .then((result) => {\r\n        if (result != null && (typeof result === 'object' || typeof result === 'symbol')) {\r\n          // Actions like `() => import('my-view.js')` are not expected to\r\n          // end the resolution, despite the result is not empty. Checking\r\n          // the result with a whitelist of values that end the resolution.\r\n          if (\r\n            result instanceof HTMLElement ||\r\n            result === notFoundResult ||\r\n            (isObject(result) && 'redirect' in result)\r\n          ) {\r\n            return result;\r\n          }\r\n        }\r\n\r\n        if (isString(route.redirect)) {\r\n          return commands.redirect(route.redirect);\r\n        }\r\n      })\r\n      .then((result) => {\r\n        if (result != null) {\r\n          return result;\r\n        }\r\n        if (isString(route.component)) {\r\n          return commands.component(route.component);\r\n        }\r\n      });\r\n  }\r\n\r\n  /**\r\n   * Sets the router outlet (the DOM node where the content for the current\r\n   * route is inserted). Any content pre-existing in the router outlet is\r\n   * removed at the end of each render pass.\r\n   *\r\n   * @remarks\r\n   * This method is automatically invoked first time when creating a new Router\r\n   * instance.\r\n   *\r\n   * @param outlet - the DOM node where the content for the current route is\r\n   * inserted.\r\n   */\r\n  setOutlet(outlet?: Element | DocumentFragment | null): void {\r\n    if (outlet) {\r\n      this.#ensureOutlet(outlet);\r\n    }\r\n    this.#outlet = outlet;\r\n  }\r\n\r\n  /**\r\n   * Returns the current router outlet. The initial value is `undefined`.\r\n   *\r\n   * @returns the current router outlet (or `undefined`)\r\n   */\r\n  getOutlet(): Element | DocumentFragment | null | undefined {\r\n    return this.#outlet;\r\n  }\r\n\r\n  /**\r\n   * Sets the routing config (replacing the existing one) and triggers a\r\n   * navigation event so that the router outlet is refreshed according to the\r\n   * current `window.location` and the new routing config.\r\n   *\r\n   * Each route object may have the following properties, listed here in the processing order:\r\n   * * `path`  the route path (relative to the parent route if any) in the\r\n   * [express.js syntax](https://expressjs.com/en/guide/routing.html#route-paths).\r\n   *\r\n   * * `children`  an array of nested routes or a function that provides this\r\n   * array at the render time. The function can be synchronous or asynchronous:\r\n   * in the latter case the render is delayed until the returned promise is\r\n   * resolved. The `children` function is executed every time when this route is\r\n   * being rendered. This allows for dynamic route structures (e.g. backend-defined),\r\n   * but it might have a performance impact as well. In order to avoid calling\r\n   * the function on subsequent renders, you can override the `children` property\r\n   * of the route object and save the calculated array there\r\n   * (via `context.route.children = [ route1, route2, ...];`).\r\n   * Parent routes are fully resolved before resolving the children. Children\r\n   * 'path' values are relative to the parent ones.\r\n   *\r\n   * * `action`  the action that is executed before the route is resolved.\r\n   * The value for this property should be a function, accepting `context`\r\n   * and `commands` parameters described below. If present, this function is\r\n   * always invoked first, disregarding of the other properties' presence.\r\n   * The action can return a result directly or within a `Promise`, which\r\n   * resolves to the result. If the action result is an `HTMLElement` instance,\r\n   * a `commands.component(name)` result, a `commands.redirect(path)` result,\r\n   * or a `context.next()` result, the current route resolution is finished,\r\n   * and other route config properties are ignored.\r\n   * See also **Route Actions** section in [Live Examples](#/classes/Router/demos/demo/index.html).\r\n   *\r\n   * * `redirect`  other route's path to redirect to. Passes all route parameters to the redirect target.\r\n   * The target route should also be defined.\r\n   * See also **Redirects** section in [Live Examples](#/classes/Router/demos/demo/index.html).\r\n   *\r\n   * * `component`  the tag name of the Web Component to resolve the route to.\r\n   * The property is ignored when either an `action` returns the result or `redirect` property is present.\r\n   * If route contains the `component` property (or an action that return a component)\r\n   * and its child route also contains the `component` property, child route's component\r\n   * will be rendered as a light dom child of a parent component.\r\n   *\r\n   * * `name`  the string name of the route to use in the\r\n   * [`router.urlForName(name, params)`](#/classes/Router#method-urlForName)\r\n   * navigation helper method.\r\n   *\r\n   * For any route function (`action`, `children`) defined, the corresponding `route` object is available inside the\r\n   * callback through the `this` reference. If you need to access it, make sure you define the callback as a non-arrow\r\n   * function because arrow functions do not have their own `this` reference.\r\n   *\r\n   * `context` object that is passed to `action` function holds the following properties:\r\n   * * `context.pathname`  string with the pathname being resolved\r\n   *\r\n   * * `context.search`  search query string\r\n   *\r\n   * * `context.hash`  hash string\r\n   *\r\n   * * `context.params`  object with route parameters\r\n   *\r\n   * * `context.route`  object that holds the route that is currently being rendered.\r\n   *\r\n   * * `context.next()`  function for asynchronously getting the next route\r\n   * contents from the resolution chain (if any)\r\n   *\r\n   * `commands` object that is passed to `action` function has\r\n   * the following methods:\r\n   *\r\n   * * `commands.redirect(path)`  function that creates a redirect data\r\n   * for the path specified.\r\n   *\r\n   * * `commands.component(component)`  function that creates a new HTMLElement\r\n   * with current context. Note: the component created by this function is reused if visiting the same path twice in\r\n   * row.\r\n   *\r\n   * @param routes - a single route or an array of those\r\n   * @param skipRender - configure the router but skip rendering the\r\n   *     route corresponding to the current `window.location` values\r\n   */\r\n  // eslint-disable-next-line @typescript-eslint/no-misused-promises\r\n  override async setRoutes(\r\n    routes: Route<R, C> | ReadonlyArray<Route<R, C>>,\r\n    skipRender = false,\r\n  ): Promise<RouterLocation<R, C>> {\r\n    this.__previousContext = undefined;\r\n    this.#urlForName = undefined;\r\n    ensureRoutes(routes);\r\n    super.setRoutes(routes);\r\n    if (!skipRender) {\r\n      this.#onNavigationEvent();\r\n    }\r\n    return await this.ready;\r\n  }\r\n\r\n  protected override addRoutes(routes: Route<R, C> | ReadonlyArray<Route<R, C>>): ReadonlyArray<Route<R, C>> {\r\n    ensureRoutes(routes);\r\n    return super.addRoutes(routes);\r\n  }\r\n\r\n  /**\r\n   * Asynchronously resolves the given pathname and renders the resolved route\r\n   * component into the router outlet. If no router outlet is set at the time of\r\n   * calling this method, or at the time when the route resolution is completed,\r\n   * a `TypeError` is thrown.\r\n   *\r\n   * Returns a promise that is fulfilled with the router outlet DOM Element | DocumentFragment after\r\n   * the route component is created and inserted into the router outlet, or\r\n   * rejected if no route matches the given path.\r\n   *\r\n   * If another render pass is started before the previous one is completed, the\r\n   * result of the previous render pass is ignored.\r\n   *\r\n   * @param pathnameOrContext - the pathname to render or a context object with\r\n   * a `pathname` property, optional `search` and `hash` properties, and other\r\n   * properties to pass to the resolver.\r\n   * @param shouldUpdateHistory - update browser history with the rendered\r\n   * location\r\n   */\r\n  async render(\r\n    pathnameOrContext: string | ResolveContext,\r\n    shouldUpdateHistory: boolean = false,\r\n  ): Promise<RouterLocation<R, C>> {\r\n    this.#lastStartedRenderId += 1;\r\n    const renderId = this.#lastStartedRenderId;\r\n    const context = {\r\n      ...(rootContext as RouteContext<R, C>),\r\n      ...(isString(pathnameOrContext) ? { hash: '', search: '', pathname: pathnameOrContext } : pathnameOrContext),\r\n      __renderId: renderId,\r\n    } satisfies RouteContext<R, C>;\r\n\r\n    this.ready = this.#doRender(context, shouldUpdateHistory);\r\n    return await this.ready;\r\n  }\r\n\r\n  async #doRender(context: RouteContext<R, C>, shouldUpdateHistory: boolean) {\r\n    const { __renderId: renderId } = context;\r\n    try {\r\n      // Find the first route that resolves to a non-empty result\r\n      const ctx = await this.resolve(context);\r\n\r\n      // Process the result of this.resolve() and handle all special commands:\r\n      // (redirect / prevent / component). If the result is a 'component',\r\n      // then go deeper and build the entire chain of nested components matching\r\n      // the pathname. Also call all 'on before' callbacks along the way.\r\n      const contextWithChain = await this.#fullyResolveChain(ctx);\r\n\r\n      if (!this.#isLatestRender(contextWithChain)) {\r\n        return this.location;\r\n      }\r\n\r\n      const previousContext = this.__previousContext;\r\n\r\n      // Check if the render was prevented and make an early return in that case\r\n      if (contextWithChain === previousContext) {\r\n        // Replace the history with the previous context\r\n        // to make sure the URL stays the same.\r\n        this.#updateBrowserHistory(previousContext, true);\r\n        return this.location;\r\n      }\r\n\r\n      this.location = createLocation(contextWithChain);\r\n\r\n      if (shouldUpdateHistory) {\r\n        // Replace only if first render redirects, so that we dont leave\r\n        // the redirecting record in the history\r\n        this.#updateBrowserHistory(contextWithChain, renderId === 1);\r\n      }\r\n\r\n      fireRouterEvent('location-changed', {\r\n        router: this,\r\n        location: this.location,\r\n      });\r\n\r\n      // Skip detaching/re-attaching there are no render changes\r\n      if (contextWithChain.__skipAttach) {\r\n        this.#copyUnchangedElements(contextWithChain, previousContext);\r\n        this.__previousContext = contextWithChain;\r\n        return this.location;\r\n      }\r\n\r\n      this.#addAppearingContent(contextWithChain, previousContext);\r\n      const animationDone = this.#animateIfNeeded(contextWithChain);\r\n\r\n      this.#runOnAfterEnterCallbacks(contextWithChain);\r\n      this.#runOnAfterLeaveCallbacks(contextWithChain, previousContext);\r\n\r\n      await animationDone;\r\n\r\n      if (this.#isLatestRender(contextWithChain)) {\r\n        // If there is another render pass started after this one,\r\n        // the 'disappearing content' would be removed when the other\r\n        // render pass calls `this.__addAppearingContent()`\r\n        this.#removeDisappearingContent();\r\n\r\n        this.__previousContext = contextWithChain;\r\n        return this.location;\r\n      }\r\n    } catch (error: unknown) {\r\n      if (renderId === this.#lastStartedRenderId) {\r\n        if (shouldUpdateHistory) {\r\n          this.#updateBrowserHistory(this.context);\r\n        }\r\n\r\n        for (const child of this.#outlet?.children ?? []) {\r\n          child.remove();\r\n        }\r\n\r\n        this.location = createLocation(Object.assign(context, { resolver: this }));\r\n        fireRouterEvent('error', {\r\n          router: this,\r\n          error,\r\n          ...context,\r\n        });\r\n        throw error;\r\n      }\r\n    }\r\n\r\n    return this.location;\r\n  }\r\n\r\n  // `topOfTheChainContextBeforeRedirects` is a context coming from Resolver.resolve().\r\n  // It would contain a 'redirect' route or the first 'component' route that\r\n  // matched the pathname. There might be more child 'component' routes to be\r\n  // resolved and added into the chain. This method would find and add them.\r\n  // `contextBeforeRedirects` is the context containing such a child component\r\n  // route. It's only necessary when this method is called recursively (otherwise\r\n  // it's the same as the 'top of the chain' context).\r\n  //\r\n  // Apart from building the chain of child components, this method would also\r\n  // handle 'redirect' routes, call 'onBefore' callbacks and handle 'prevent'\r\n  // and 'redirect' callback results.\r\n  async #fullyResolveChain(\r\n    topOfTheChainContextBeforeRedirects: RouteContext<R, C>,\r\n    contextBeforeRedirects: RouteContext<R, C> = topOfTheChainContextBeforeRedirects,\r\n  ): Promise<RouteContext<R, C>> {\r\n    const contextAfterRedirects = await this.#findComponentContextAfterAllRedirects(contextBeforeRedirects);\r\n\r\n    const redirectsHappened = contextAfterRedirects !== contextBeforeRedirects;\r\n    const topOfTheChainContextAfterRedirects = redirectsHappened\r\n      ? contextAfterRedirects\r\n      : topOfTheChainContextBeforeRedirects;\r\n\r\n    const matchedPath = getPathnameForRouter(getMatchedPath(contextAfterRedirects.chain ?? []), this);\r\n    const isFound = matchedPath === contextAfterRedirects.pathname;\r\n\r\n    // Recursive method to try matching more child and sibling routes\r\n    const findNextContextIfAny = async (\r\n      context: RouteContext<R, C>,\r\n      parent: Route<R, C> | undefined = context.route,\r\n      prevResult?: NextResult<R, C> | null,\r\n    ): Promise<NextResult<R, C>> => {\r\n      const nextContext = await context.next(false, parent, prevResult);\r\n\r\n      if (nextContext === null || nextContext === notFoundResult) {\r\n        // Next context is not found in children, ...\r\n        if (isFound) {\r\n          // ...but original context is already fully matching - use it\r\n          return context;\r\n        } else if (parent.parent != null) {\r\n          // ...and there is no full match yet - step up to check siblings\r\n          return await findNextContextIfAny(context, parent.parent, nextContext);\r\n        }\r\n        return nextContext;\r\n      }\r\n\r\n      return nextContext;\r\n    };\r\n\r\n    const nextContext = await findNextContextIfAny(contextAfterRedirects);\r\n\r\n    if (nextContext == null || nextContext === notFoundResult) {\r\n      throw getNotFoundError<ActionValue, RouteExtension<R, C>, ContextExtension<R, C>>(\r\n        topOfTheChainContextAfterRedirects,\r\n      );\r\n    }\r\n\r\n    return nextContext !== contextAfterRedirects\r\n      ? await this.#fullyResolveChain(topOfTheChainContextAfterRedirects, nextContext)\r\n      : await this.#amendWithOnBeforeCallbacks(contextAfterRedirects);\r\n  }\r\n\r\n  async #findComponentContextAfterAllRedirects(context: RouteContext<R, C>): Promise<RouteContext<R, C>> {\r\n    const { result } = context;\r\n    if (result instanceof HTMLElement) {\r\n      renderElement(context, result as WebComponentInterface<R, C>);\r\n      return context;\r\n    } else if (result && 'redirect' in result) {\r\n      const ctx = await this.#redirect(result.redirect, context.__redirectCount, context.__renderId);\r\n      return await this.#findComponentContextAfterAllRedirects(ctx);\r\n    }\r\n\r\n    throw result instanceof Error\r\n      ? result\r\n      : new Error(\r\n          log(\r\n            `Invalid route resolution result for path \"${context.pathname}\". ` +\r\n              `Expected redirect object or HTML element, but got: \"${logValue(result)}\". ` +\r\n              `Double check the action return value for the route.`,\r\n          ),\r\n        );\r\n  }\r\n\r\n  async #amendWithOnBeforeCallbacks(contextWithFullChain: RouteContext<R, C>): Promise<RouteContext<R, C>> {\r\n    return await this.#runOnBeforeCallbacks(contextWithFullChain).then(async (amendedContext) => {\r\n      if (amendedContext === this.__previousContext || amendedContext === contextWithFullChain) {\r\n        return amendedContext;\r\n      }\r\n      return await this.#fullyResolveChain(amendedContext);\r\n    });\r\n  }\r\n\r\n  async #runOnBeforeCallbacks(newContext: RouteContext<R, C>): Promise<RouteContext<R, C>> {\r\n    const previousContext = (this.__previousContext ?? {}) as Partial<RouteContext<R, C>>;\r\n    const previousChain = previousContext.chain ?? [];\r\n    const newChain = newContext.chain ?? [];\r\n\r\n    let callbacks: Promise<ActionResult> = Promise.resolve(undefined);\r\n    const redirect = (pathname: string) => createRedirect(newContext, pathname) as unknown as RedirectResult;\r\n\r\n    newContext.__divergedChainIndex = 0;\r\n    newContext.__skipAttach = false;\r\n    if (previousChain.length) {\r\n      for (let i = 0; i < Math.min(previousChain.length, newChain.length); newContext.__divergedChainIndex++, i++) {\r\n        if (\r\n          previousChain[i].route !== newChain[i].route ||\r\n          (previousChain[i].path !== newChain[i].path && previousChain[i].element !== newChain[i].element) ||\r\n          !this.#isReusableElement(\r\n            previousChain[i].element as HTMLElement | undefined,\r\n            newChain[i].element as HTMLElement | undefined,\r\n          )\r\n        ) {\r\n          break;\r\n        }\r\n      }\r\n\r\n      // Skip re-attaching and notifications if element and chain do not change\r\n      newContext.__skipAttach =\r\n        // Same route chain\r\n        newChain.length === previousChain.length &&\r\n        newContext.__divergedChainIndex === newChain.length &&\r\n        // Same element\r\n        this.#isReusableElement(newContext.result, previousContext.result);\r\n\r\n      if (newContext.__skipAttach) {\r\n        // execute onBeforeLeave for changed segment element when skipping attach\r\n        for (let i = newChain.length - 1; i >= 0; i--) {\r\n          callbacks = this.#runOnBeforeLeaveCallbacks(callbacks, newContext, { prevent }, previousChain[i]);\r\n        }\r\n        // execute onBeforeEnter for changed segment element when skipping attach\r\n        for (let i = 0; i < newChain.length; i++) {\r\n          callbacks = this.#runOnBeforeEnterCallbacks(\r\n            callbacks,\r\n            newContext,\r\n            {\r\n              prevent,\r\n              redirect,\r\n            },\r\n            newChain[i],\r\n          );\r\n          previousChain[i].element!.location = createLocation(newContext, previousChain[i].route);\r\n        }\r\n      } else {\r\n        // execute onBeforeLeave when NOT skipping attach\r\n        for (let i = previousChain.length - 1; i >= newContext.__divergedChainIndex; i--) {\r\n          callbacks = this.#runOnBeforeLeaveCallbacks(callbacks, newContext, { prevent }, previousChain[i]);\r\n        }\r\n      }\r\n    }\r\n    // execute onBeforeEnter when NOT skipping attach\r\n    if (!newContext.__skipAttach) {\r\n      for (let i = 0; i < newChain.length; i++) {\r\n        if (i < newContext.__divergedChainIndex) {\r\n          if (i < previousChain.length && previousChain[i].element) {\r\n            previousChain[i].element!.location = createLocation(newContext, previousChain[i].route);\r\n          }\r\n        } else {\r\n          callbacks = this.#runOnBeforeEnterCallbacks(\r\n            callbacks,\r\n            newContext,\r\n            {\r\n              prevent,\r\n              redirect,\r\n            },\r\n            newChain[i],\r\n          );\r\n          if (newChain[i].element) {\r\n            newChain[i].element!.location = createLocation(newContext, newChain[i].route);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return await callbacks.then(async (amendmentResult: ActionResult) => {\r\n      if (amendmentResult && isObject(amendmentResult)) {\r\n        if ('cancel' in amendmentResult && this.__previousContext) {\r\n          this.__previousContext.__renderId = newContext.__renderId;\r\n          return this.__previousContext;\r\n        }\r\n        if ('redirect' in amendmentResult) {\r\n          return await this.#redirect(amendmentResult.redirect, newContext.__redirectCount, newContext.__renderId);\r\n        }\r\n      }\r\n      return newContext;\r\n    });\r\n  }\r\n\r\n  async #runOnBeforeLeaveCallbacks(\r\n    callbacks: Promise<ActionResult>,\r\n    newContext: RouteContext<R, C>,\r\n    commands: PreventCommands,\r\n    chainElement: ChainItem<R, C>,\r\n  ): Promise<ActionResult> {\r\n    const location = createLocation(newContext);\r\n\r\n    let result: ActionResult = await callbacks;\r\n\r\n    if (this.#isLatestRender(newContext)) {\r\n      const beforeLeaveFunction = amend('onBeforeLeave', chainElement.element, location, commands, this);\r\n      result = beforeLeaveFunction(result);\r\n    }\r\n\r\n    if (!(isObject(result) && 'redirect' in result)) {\r\n      return result as ActionResult;\r\n    }\r\n  }\r\n\r\n  async #runOnBeforeEnterCallbacks(\r\n    callbacks: Promise<ActionResult>,\r\n    newContext: RouteContext<R, C>,\r\n    commands: PreventAndRedirectCommands,\r\n    chainElement: ChainItem<R, C>,\r\n  ): Promise<ActionResult> {\r\n    const location = createLocation(newContext, chainElement.route);\r\n    const result = await callbacks;\r\n\r\n    if (this.#isLatestRender(newContext)) {\r\n      const beforeEnterFunction = amend('onBeforeEnter', chainElement.element, location, commands, this);\r\n      return beforeEnterFunction(result);\r\n    }\r\n  }\r\n\r\n  #isReusableElement(element?: unknown, otherElement?: unknown): boolean {\r\n    if (element instanceof Element && otherElement instanceof Element) {\r\n      return this.#createdByRouter.has(element) && this.#createdByRouter.has(otherElement)\r\n        ? element.localName === otherElement.localName\r\n        : element === otherElement;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  #isLatestRender(context: Partial<RouteContext<R, C>>): boolean {\r\n    return context.__renderId === this.#lastStartedRenderId;\r\n  }\r\n\r\n  declare ['resolve']: (\r\n    contextOrPathname: RouteContext<R, C> | string,\r\n  ) => Promise<RouteContext<R, C> & RedirectContextInfo>;\r\n\r\n  async #redirect(\r\n    redirectData: RedirectContextInfo,\r\n    counter: number = 0,\r\n    renderId: number = 0,\r\n  ): Promise<RouteContext<R, C> & RedirectContextInfo> {\r\n    if (counter > MAX_REDIRECT_COUNT) {\r\n      throw new Error(log(`Too many redirects when rendering ${redirectData.from}`));\r\n    }\r\n\r\n    return await this.resolve({\r\n      ...(rootContext as RouteContext<R, C>),\r\n      pathname: this.urlForPath(redirectData.pathname, redirectData.params),\r\n      redirectFrom: redirectData.from,\r\n      __redirectCount: counter + 1,\r\n      __renderId: renderId,\r\n    });\r\n  }\r\n\r\n  #ensureOutlet(outlet: Element | DocumentFragment | undefined | null = this.#outlet): void {\r\n    if (!(outlet instanceof Element || outlet instanceof DocumentFragment)) {\r\n      throw new TypeError(\r\n        log(`Expected router outlet to be a valid DOM Element | DocumentFragment (but got ${outlet})`),\r\n      );\r\n    }\r\n  }\r\n\r\n  // eslint-disable-next-line @typescript-eslint/class-methods-use-this\r\n  #updateBrowserHistory({ pathname, search = '', hash = '' }: ResolveContext, replace?: boolean): void {\r\n    if (window.location.pathname !== pathname || window.location.search !== search || window.location.hash !== hash) {\r\n      const changeState = replace ? 'replaceState' : 'pushState';\r\n      window.history[changeState](null, document.title, pathname + search + hash);\r\n      window.dispatchEvent(new PopStateEvent('popstate', { state: 'vaadin-router-ignore' }));\r\n    }\r\n  }\r\n\r\n  #copyUnchangedElements(\r\n    context: RouteContext<R, C>,\r\n    previousContext?: RouteContext<R, C>,\r\n  ): Element | DocumentFragment | null | undefined {\r\n    // Find the deepest common parent between the last and the new component\r\n    // chains. Update references for the unchanged elements in the new chain\r\n    let deepestCommonParent = this.#outlet;\r\n    for (let i = 0; i < (context.__divergedChainIndex ?? 0); i++) {\r\n      const unchangedElement = previousContext?.chain?.[i].element;\r\n      if (unchangedElement) {\r\n        if (unchangedElement.parentNode === deepestCommonParent) {\r\n          (context.chain![i] as Writable<ChainItem<R, C>>).element = unchangedElement;\r\n          deepestCommonParent = unchangedElement;\r\n        } else {\r\n          break;\r\n        }\r\n      }\r\n    }\r\n    return deepestCommonParent;\r\n  }\r\n\r\n  #addAppearingContent(context: RouteContext<R, C>, previousContext?: RouteContext<R, C>): void {\r\n    this.#ensureOutlet();\r\n\r\n    // If the previous 'entering' animation has not completed yet,\r\n    // stop it and remove that content from the DOM before adding new one.\r\n    this.#removeAppearingContent();\r\n\r\n    // Copy reusable elements from the previousContext to current\r\n    const deepestCommonParent = this.#copyUnchangedElements(context, previousContext);\r\n\r\n    // Keep two lists of DOM elements:\r\n    //  - those that should be removed once the transition animation is over\r\n    //  - and those that should remain\r\n    this.#appearingContent = [];\r\n    this.#disappearingContent = Array.from(deepestCommonParent?.children ?? []).filter(\r\n      // Only remove layout content that was added by router\r\n      (e) =>\r\n        this.#addedByRouter.has(e) &&\r\n        // Do not remove the result element to avoid flickering\r\n        e !== context.result,\r\n    );\r\n\r\n    // Add new elements (starting after the deepest common parent) to the DOM.\r\n    // That way only the components that are actually different between the two\r\n    // locations are added to the DOM (and those that are common remain in the\r\n    // DOM without first removing and then adding them again).\r\n    let parentElement = deepestCommonParent;\r\n    for (let i = context.__divergedChainIndex ?? 0; i < (context.chain?.length ?? 0); i++) {\r\n      const elementToAdd = context.chain![i].element;\r\n      if (elementToAdd) {\r\n        parentElement?.appendChild(elementToAdd);\r\n        this.#addedByRouter.add(elementToAdd);\r\n        if (parentElement === deepestCommonParent) {\r\n          this.#appearingContent.push(elementToAdd);\r\n        }\r\n        parentElement = elementToAdd;\r\n      }\r\n    }\r\n  }\r\n\r\n  #removeDisappearingContent(): void {\r\n    if (this.#disappearingContent) {\r\n      for (const element of this.#disappearingContent) {\r\n        element.remove();\r\n      }\r\n    }\r\n    this.#disappearingContent = null;\r\n    this.#appearingContent = null;\r\n  }\r\n\r\n  #removeAppearingContent(): void {\r\n    if (this.#disappearingContent && this.#appearingContent) {\r\n      for (const element of this.#appearingContent) {\r\n        element.remove();\r\n      }\r\n      this.#disappearingContent = null;\r\n      this.#appearingContent = null;\r\n    }\r\n  }\r\n\r\n  #runOnAfterLeaveCallbacks(currentContext: RouteContext<R, C>, targetContext?: RouteContext<R, C>): void {\r\n    if (!targetContext?.chain || currentContext.__divergedChainIndex == null) {\r\n      return;\r\n    }\r\n\r\n    // REVERSE iteration: from Z to A\r\n    for (let i = targetContext.chain.length - 1; i >= currentContext.__divergedChainIndex; i--) {\r\n      if (!this.#isLatestRender(currentContext)) {\r\n        break;\r\n      }\r\n      const currentComponent = targetContext.chain[i].element;\r\n      if (!currentComponent) {\r\n        continue;\r\n      }\r\n      try {\r\n        const location = createLocation(currentContext);\r\n        // eslint-disable-next-line @typescript-eslint/unbound-method\r\n        maybeCall(currentComponent.onAfterLeave, currentComponent, location, {} as EmptyCommands, this);\r\n      } finally {\r\n        if (this.#disappearingContent?.includes(currentComponent)) {\r\n          for (const child of currentComponent.children) {\r\n            child.remove();\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  #runOnAfterEnterCallbacks(currentContext: RouteContext<R, C>): void {\r\n    if (!currentContext.chain || currentContext.__divergedChainIndex == null) {\r\n      return;\r\n    }\r\n\r\n    // forward iteration: from A to Z\r\n    for (let i = currentContext.__divergedChainIndex; i < currentContext.chain.length; i++) {\r\n      if (!this.#isLatestRender(currentContext)) {\r\n        break;\r\n      }\r\n      const currentComponent = currentContext.chain[i].element;\r\n      if (currentComponent) {\r\n        const location = createLocation(currentContext, currentContext.chain[i].route);\r\n        // eslint-disable-next-line @typescript-eslint/unbound-method\r\n        maybeCall(currentComponent.onAfterEnter, currentComponent, location, {}, this);\r\n      }\r\n    }\r\n  }\r\n\r\n  async #animateIfNeeded(context: RouteContext<R, C>): Promise<RouteContext<R, C>> {\r\n    const from = this.#disappearingContent?.[0];\r\n    const to = this.#appearingContent?.[0];\r\n    const promises = [];\r\n\r\n    const { chain = [] } = context;\r\n    let config;\r\n    for (let i = chain.length - 1; i >= 0; i--) {\r\n      if (chain[i].route.animate) {\r\n        config = chain[i].route.animate;\r\n        break;\r\n      }\r\n    }\r\n\r\n    if (from && to && config) {\r\n      const leave = isObject(config) && config.leave ? config.leave : 'leaving';\r\n      const enter = isObject(config) && config.enter ? config.enter : 'entering';\r\n      promises.push(animate(from, leave));\r\n      promises.push(animate(to, enter));\r\n    }\r\n\r\n    await Promise.all(promises);\r\n\r\n    return context;\r\n  }\r\n\r\n  /**\r\n   * Subscribes this instance to navigation events on the `window`.\r\n   *\r\n   * NOTE: beware of resource leaks. For as long as a router instance is\r\n   * subscribed to navigation events, it won't be garbage collected.\r\n   */\r\n  subscribe(): void {\r\n    window.addEventListener('vaadin-router-go', this.#navigationEventHandler);\r\n  }\r\n\r\n  /**\r\n   * Removes the subscription to navigation events created in the `subscribe()`\r\n   * method.\r\n   */\r\n  unsubscribe(): void {\r\n    window.removeEventListener('vaadin-router-go', this.#navigationEventHandler);\r\n  }\r\n\r\n  #onNavigationEvent(event?: Event): void {\r\n    const { pathname, search, hash } =\r\n      event instanceof CustomEvent ? (event.detail as ResolveContext) : window.location;\r\n\r\n    if (isString(this.__normalizePathname(pathname))) {\r\n      if (event?.preventDefault) {\r\n        event.preventDefault();\r\n      }\r\n      // eslint-disable-next-line no-void\r\n      void this.render({ pathname, search, hash }, true);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Configures what triggers Router navigation events:\r\n   *  - `POPSTATE`: popstate events on the current `window`\r\n   *  - `CLICK`: click events on `<a>` links leading to the current page\r\n   *\r\n   * This method is invoked with the pre-configured values when creating a new Router instance.\r\n   * By default, both `POPSTATE` and `CLICK` are enabled. This setup is expected to cover most of the use cases.\r\n   *\r\n   * See the `router-config.js` for the default navigation triggers config. Based on it, you can\r\n   * create the own one and only import the triggers you need, instead of pulling in all the code,\r\n   * e.g. if you want to handle `click` differently.\r\n   *\r\n   * See also **Navigation Triggers** section in [Live Examples](#/classes/Router/demos/demo/index.html).\r\n   *\r\n   * @param triggers - navigation triggers\r\n   */\r\n  static setTriggers(...triggers: readonly NavigationTrigger[]): void {\r\n    setNavigationTriggers(triggers);\r\n  }\r\n\r\n  /**\r\n   * Generates a URL for the route with the given name, optionally performing\r\n   * substitution of parameters.\r\n   *\r\n   * The route is searched in all the Router instances subscribed to\r\n   * navigation events.\r\n   *\r\n   * **Note:** For child route names, only array children are considered.\r\n   * It is not possible to generate URLs using a name for routes set with\r\n   * a children function.\r\n   *\r\n   * @param name - The route name or the routes `component` name.\r\n   * @param params - Optional object with route path parameters.\r\n   * Named parameters are passed by name (`params[name] = value`), unnamed\r\n   * parameters are passed by index (`params[index] = value`).\r\n   */\r\n  urlForName(name: string, params?: Params | null): string {\r\n    if (!this.#urlForName) {\r\n      this.#urlForName = generateUrls(this, {\r\n        cacheKeyProvider(route): string | undefined {\r\n          return 'component' in route && typeof route.component === 'string'\r\n            ? (route as Readonly<{ component: string }>).component\r\n            : undefined;\r\n        },\r\n      });\r\n    }\r\n    return getPathnameForRouter(this.#urlForName(name, params ?? undefined), this);\r\n  }\r\n\r\n  /**\r\n   * Generates a URL for the given route path, optionally performing\r\n   * substitution of parameters.\r\n   *\r\n   * @param path - String route path declared in [express.js\r\n   * syntax](https://expressjs.com/en/guide/routing.html#route-paths).\r\n   * @param params - Optional object with route path parameters.\r\n   * Named parameters are passed by name (`params[name] = value`), unnamed\r\n   * parameters are passed by index (`params[index] = value`).\r\n   */\r\n  urlForPath(path: string, params?: Params | null): string {\r\n    return getPathnameForRouter(\r\n      compile(path)((params as Partial<Record<string, string | string[]>> | null) ?? undefined),\r\n      this,\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Triggers navigation to a new path. Returns a boolean without waiting until\r\n   * the navigation is complete. Returns `true` if at least one `Router`\r\n   * has handled the navigation (was subscribed and had `baseUrl` matching\r\n   * the `path` argument), otherwise returns `false`.\r\n   *\r\n   * @param path - A new in-app path string, or an URL-like object with\r\n   * `pathname` string property, and optional `search` and `hash` string\r\n   * properties.\r\n   */\r\n  static go(path: string | ResolveContext): boolean {\r\n    const { pathname, search, hash } = isString(path)\r\n      ? new URL(path, 'http://a') // some base to omit origin\r\n      : path;\r\n    return fireRouterEvent('go', { pathname, search, hash });\r\n  }\r\n}\r\n",null,"/**\n * Tokenizer results.\n */\ninterface LexToken {\n  type:\n    | \"OPEN\"\n    | \"CLOSE\"\n    | \"PATTERN\"\n    | \"NAME\"\n    | \"CHAR\"\n    | \"ESCAPED_CHAR\"\n    | \"MODIFIER\"\n    | \"END\";\n  index: number;\n  value: string;\n}\n\n/**\n * Tokenize input string.\n */\nfunction lexer(str: string): LexToken[] {\n  const tokens: LexToken[] = [];\n  let i = 0;\n\n  while (i < str.length) {\n    const char = str[i];\n\n    if (char === \"*\" || char === \"+\" || char === \"?\") {\n      tokens.push({ type: \"MODIFIER\", index: i, value: str[i++] });\n      continue;\n    }\n\n    if (char === \"\\\\\") {\n      tokens.push({ type: \"ESCAPED_CHAR\", index: i++, value: str[i++] });\n      continue;\n    }\n\n    if (char === \"{\") {\n      tokens.push({ type: \"OPEN\", index: i, value: str[i++] });\n      continue;\n    }\n\n    if (char === \"}\") {\n      tokens.push({ type: \"CLOSE\", index: i, value: str[i++] });\n      continue;\n    }\n\n    if (char === \":\") {\n      let name = \"\";\n      let j = i + 1;\n\n      while (j < str.length) {\n        const code = str.charCodeAt(j);\n\n        if (\n          // `0-9`\n          (code >= 48 && code <= 57) ||\n          // `A-Z`\n          (code >= 65 && code <= 90) ||\n          // `a-z`\n          (code >= 97 && code <= 122) ||\n          // `_`\n          code === 95\n        ) {\n          name += str[j++];\n          continue;\n        }\n\n        break;\n      }\n\n      if (!name) throw new TypeError(`Missing parameter name at ${i}`);\n\n      tokens.push({ type: \"NAME\", index: i, value: name });\n      i = j;\n      continue;\n    }\n\n    if (char === \"(\") {\n      let count = 1;\n      let pattern = \"\";\n      let j = i + 1;\n\n      if (str[j] === \"?\") {\n        throw new TypeError(`Pattern cannot start with \"?\" at ${j}`);\n      }\n\n      while (j < str.length) {\n        if (str[j] === \"\\\\\") {\n          pattern += str[j++] + str[j++];\n          continue;\n        }\n\n        if (str[j] === \")\") {\n          count--;\n          if (count === 0) {\n            j++;\n            break;\n          }\n        } else if (str[j] === \"(\") {\n          count++;\n          if (str[j + 1] !== \"?\") {\n            throw new TypeError(`Capturing groups are not allowed at ${j}`);\n          }\n        }\n\n        pattern += str[j++];\n      }\n\n      if (count) throw new TypeError(`Unbalanced pattern at ${i}`);\n      if (!pattern) throw new TypeError(`Missing pattern at ${i}`);\n\n      tokens.push({ type: \"PATTERN\", index: i, value: pattern });\n      i = j;\n      continue;\n    }\n\n    tokens.push({ type: \"CHAR\", index: i, value: str[i++] });\n  }\n\n  tokens.push({ type: \"END\", index: i, value: \"\" });\n\n  return tokens;\n}\n\nexport interface ParseOptions {\n  /**\n   * Set the default delimiter for repeat parameters. (default: `'/'`)\n   */\n  delimiter?: string;\n  /**\n   * List of characters to automatically consider prefixes when parsing.\n   */\n  prefixes?: string;\n}\n\n/**\n * Parse a string for the raw tokens.\n */\nexport function parse(str: string, options: ParseOptions = {}): Token[] {\n  const tokens = lexer(str);\n  const { prefixes = \"./\", delimiter = \"/#?\" } = options;\n  const result: Token[] = [];\n  let key = 0;\n  let i = 0;\n  let path = \"\";\n\n  const tryConsume = (type: LexToken[\"type\"]): string | undefined => {\n    if (i < tokens.length && tokens[i].type === type) return tokens[i++].value;\n  };\n\n  const mustConsume = (type: LexToken[\"type\"]): string => {\n    const value = tryConsume(type);\n    if (value !== undefined) return value;\n    const { type: nextType, index } = tokens[i];\n    throw new TypeError(`Unexpected ${nextType} at ${index}, expected ${type}`);\n  };\n\n  const consumeText = (): string => {\n    let result = \"\";\n    let value: string | undefined;\n    while ((value = tryConsume(\"CHAR\") || tryConsume(\"ESCAPED_CHAR\"))) {\n      result += value;\n    }\n    return result;\n  };\n\n  const isSafe = (value: string): boolean => {\n    for (const char of delimiter) if (value.indexOf(char) > -1) return true;\n    return false;\n  };\n\n  const safePattern = (prefix: string) => {\n    const prev = result[result.length - 1];\n    const prevText = prefix || (prev && typeof prev === \"string\" ? prev : \"\");\n\n    if (prev && !prevText) {\n      throw new TypeError(\n        `Must have text between two parameters, missing text after \"${(prev as Key).name}\"`,\n      );\n    }\n\n    if (!prevText || isSafe(prevText)) return `[^${escapeString(delimiter)}]+?`;\n    return `(?:(?!${escapeString(prevText)})[^${escapeString(delimiter)}])+?`;\n  };\n\n  while (i < tokens.length) {\n    const char = tryConsume(\"CHAR\");\n    const name = tryConsume(\"NAME\");\n    const pattern = tryConsume(\"PATTERN\");\n\n    if (name || pattern) {\n      let prefix = char || \"\";\n\n      if (prefixes.indexOf(prefix) === -1) {\n        path += prefix;\n        prefix = \"\";\n      }\n\n      if (path) {\n        result.push(path);\n        path = \"\";\n      }\n\n      result.push({\n        name: name || key++,\n        prefix,\n        suffix: \"\",\n        pattern: pattern || safePattern(prefix),\n        modifier: tryConsume(\"MODIFIER\") || \"\",\n      });\n      continue;\n    }\n\n    const value = char || tryConsume(\"ESCAPED_CHAR\");\n    if (value) {\n      path += value;\n      continue;\n    }\n\n    if (path) {\n      result.push(path);\n      path = \"\";\n    }\n\n    const open = tryConsume(\"OPEN\");\n    if (open) {\n      const prefix = consumeText();\n      const name = tryConsume(\"NAME\") || \"\";\n      const pattern = tryConsume(\"PATTERN\") || \"\";\n      const suffix = consumeText();\n\n      mustConsume(\"CLOSE\");\n\n      result.push({\n        name: name || (pattern ? key++ : \"\"),\n        pattern: name && !pattern ? safePattern(prefix) : pattern,\n        prefix,\n        suffix,\n        modifier: tryConsume(\"MODIFIER\") || \"\",\n      });\n      continue;\n    }\n\n    mustConsume(\"END\");\n  }\n\n  return result;\n}\n\nexport interface TokensToFunctionOptions {\n  /**\n   * When `true` the regexp will be case sensitive. (default: `false`)\n   */\n  sensitive?: boolean;\n  /**\n   * Function for encoding input strings for output.\n   */\n  encode?: (value: string, token: Key) => string;\n  /**\n   * When `false` the function can produce an invalid (unmatched) path. (default: `true`)\n   */\n  validate?: boolean;\n}\n\n/**\n * Compile a string to a template function for the path.\n */\nexport function compile<P extends object = object>(\n  str: string,\n  options?: ParseOptions & TokensToFunctionOptions,\n) {\n  return tokensToFunction<P>(parse(str, options), options);\n}\n\nexport type PathFunction<P extends object = object> = (data?: P) => string;\n\n/**\n * Expose a method for transforming tokens into the path function.\n */\nexport function tokensToFunction<P extends object = object>(\n  tokens: Token[],\n  options: TokensToFunctionOptions = {},\n): PathFunction<P> {\n  const reFlags = flags(options);\n  const { encode = (x: string) => x, validate = true } = options;\n\n  // Compile all the tokens into regexps.\n  const matches = tokens.map((token) => {\n    if (typeof token === \"object\") {\n      return new RegExp(`^(?:${token.pattern})$`, reFlags);\n    }\n  });\n\n  return (data: Record<string, any> | null | undefined) => {\n    let path = \"\";\n\n    for (let i = 0; i < tokens.length; i++) {\n      const token = tokens[i];\n\n      if (typeof token === \"string\") {\n        path += token;\n        continue;\n      }\n\n      const value = data ? data[token.name] : undefined;\n      const optional = token.modifier === \"?\" || token.modifier === \"*\";\n      const repeat = token.modifier === \"*\" || token.modifier === \"+\";\n\n      if (Array.isArray(value)) {\n        if (!repeat) {\n          throw new TypeError(\n            `Expected \"${token.name}\" to not repeat, but got an array`,\n          );\n        }\n\n        if (value.length === 0) {\n          if (optional) continue;\n\n          throw new TypeError(`Expected \"${token.name}\" to not be empty`);\n        }\n\n        for (let j = 0; j < value.length; j++) {\n          const segment = encode(value[j], token);\n\n          if (validate && !(matches[i] as RegExp).test(segment)) {\n            throw new TypeError(\n              `Expected all \"${token.name}\" to match \"${token.pattern}\", but got \"${segment}\"`,\n            );\n          }\n\n          path += token.prefix + segment + token.suffix;\n        }\n\n        continue;\n      }\n\n      if (typeof value === \"string\" || typeof value === \"number\") {\n        const segment = encode(String(value), token);\n\n        if (validate && !(matches[i] as RegExp).test(segment)) {\n          throw new TypeError(\n            `Expected \"${token.name}\" to match \"${token.pattern}\", but got \"${segment}\"`,\n          );\n        }\n\n        path += token.prefix + segment + token.suffix;\n        continue;\n      }\n\n      if (optional) continue;\n\n      const typeOfMessage = repeat ? \"an array\" : \"a string\";\n      throw new TypeError(`Expected \"${token.name}\" to be ${typeOfMessage}`);\n    }\n\n    return path;\n  };\n}\n\nexport interface RegexpToFunctionOptions {\n  /**\n   * Function for decoding strings for params.\n   */\n  decode?: (value: string, token: Key) => string;\n}\n\n/**\n * A match result contains data about the path match.\n */\nexport interface MatchResult<P extends object = object> {\n  path: string;\n  index: number;\n  params: P;\n}\n\n/**\n * A match is either `false` (no match) or a match result.\n */\nexport type Match<P extends object = object> = false | MatchResult<P>;\n\n/**\n * The match function takes a string and returns whether it matched the path.\n */\nexport type MatchFunction<P extends object = object> = (\n  path: string,\n) => Match<P>;\n\n/**\n * Create path match function from `path-to-regexp` spec.\n */\nexport function match<P extends object = object>(\n  str: Path,\n  options?: ParseOptions & TokensToRegexpOptions & RegexpToFunctionOptions,\n) {\n  const keys: Key[] = [];\n  const re = pathToRegexp(str, keys, options);\n  return regexpToFunction<P>(re, keys, options);\n}\n\n/**\n * Create a path match function from `path-to-regexp` output.\n */\nexport function regexpToFunction<P extends object = object>(\n  re: RegExp,\n  keys: Key[],\n  options: RegexpToFunctionOptions = {},\n): MatchFunction<P> {\n  const { decode = (x: string) => x } = options;\n\n  return function (pathname: string) {\n    const m = re.exec(pathname);\n    if (!m) return false;\n\n    const { 0: path, index } = m;\n    const params = Object.create(null);\n\n    for (let i = 1; i < m.length; i++) {\n      if (m[i] === undefined) continue;\n\n      const key = keys[i - 1];\n\n      if (key.modifier === \"*\" || key.modifier === \"+\") {\n        params[key.name] = m[i].split(key.prefix + key.suffix).map((value) => {\n          return decode(value, key);\n        });\n      } else {\n        params[key.name] = decode(m[i], key);\n      }\n    }\n\n    return { path, index, params };\n  };\n}\n\n/**\n * Escape a regular expression string.\n */\nfunction escapeString(str: string) {\n  return str.replace(/([.+*?=^!:${}()[\\]|/\\\\])/g, \"\\\\$1\");\n}\n\n/**\n * Get the flags for a regexp from the options.\n */\nfunction flags(options?: { sensitive?: boolean }) {\n  return options && options.sensitive ? \"\" : \"i\";\n}\n\n/**\n * Metadata about a key.\n */\nexport interface Key {\n  name: string | number;\n  prefix: string;\n  suffix: string;\n  pattern: string;\n  modifier: string;\n}\n\n/**\n * A token is a string (nothing special) or key metadata (capture group).\n */\nexport type Token = string | Key;\n\n/**\n * Pull out keys from a regexp.\n */\nfunction regexpToRegexp(path: RegExp, keys?: Key[]): RegExp {\n  if (!keys) return path;\n\n  const groupsRegex = /\\((?:\\?<(.*?)>)?(?!\\?)/g;\n\n  let index = 0;\n  let execResult = groupsRegex.exec(path.source);\n  while (execResult) {\n    keys.push({\n      // Use parenthesized substring match if available, index otherwise\n      name: execResult[1] || index++,\n      prefix: \"\",\n      suffix: \"\",\n      modifier: \"\",\n      pattern: \"\",\n    });\n    execResult = groupsRegex.exec(path.source);\n  }\n\n  return path;\n}\n\n/**\n * Transform an array into a regexp.\n */\nfunction arrayToRegexp(\n  paths: Array<string | RegExp>,\n  keys?: Key[],\n  options?: TokensToRegexpOptions & ParseOptions,\n): RegExp {\n  const parts = paths.map((path) => pathToRegexp(path, keys, options).source);\n  return new RegExp(`(?:${parts.join(\"|\")})`, flags(options));\n}\n\n/**\n * Create a path regexp from string input.\n */\nfunction stringToRegexp(\n  path: string,\n  keys?: Key[],\n  options?: TokensToRegexpOptions & ParseOptions,\n) {\n  return tokensToRegexp(parse(path, options), keys, options);\n}\n\nexport interface TokensToRegexpOptions {\n  /**\n   * When `true` the regexp will be case sensitive. (default: `false`)\n   */\n  sensitive?: boolean;\n  /**\n   * When `true` the regexp won't allow an optional trailing delimiter to match. (default: `false`)\n   */\n  strict?: boolean;\n  /**\n   * When `true` the regexp will match to the end of the string. (default: `true`)\n   */\n  end?: boolean;\n  /**\n   * When `true` the regexp will match from the beginning of the string. (default: `true`)\n   */\n  start?: boolean;\n  /**\n   * Sets the final character for non-ending optimistic matches. (default: `/`)\n   */\n  delimiter?: string;\n  /**\n   * List of characters that can also be \"end\" characters.\n   */\n  endsWith?: string;\n  /**\n   * Encode path tokens for use in the `RegExp`.\n   */\n  encode?: (value: string) => string;\n}\n\n/**\n * Expose a function for taking tokens and returning a RegExp.\n */\nexport function tokensToRegexp(\n  tokens: Token[],\n  keys?: Key[],\n  options: TokensToRegexpOptions = {},\n) {\n  const {\n    strict = false,\n    start = true,\n    end = true,\n    encode = (x: string) => x,\n    delimiter = \"/#?\",\n    endsWith = \"\",\n  } = options;\n  const endsWithRe = `[${escapeString(endsWith)}]|$`;\n  const delimiterRe = `[${escapeString(delimiter)}]`;\n  let route = start ? \"^\" : \"\";\n\n  // Iterate over the tokens and create our regexp string.\n  for (const token of tokens) {\n    if (typeof token === \"string\") {\n      route += escapeString(encode(token));\n    } else {\n      const prefix = escapeString(encode(token.prefix));\n      const suffix = escapeString(encode(token.suffix));\n\n      if (token.pattern) {\n        if (keys) keys.push(token);\n\n        if (prefix || suffix) {\n          if (token.modifier === \"+\" || token.modifier === \"*\") {\n            const mod = token.modifier === \"*\" ? \"?\" : \"\";\n            route += `(?:${prefix}((?:${token.pattern})(?:${suffix}${prefix}(?:${token.pattern}))*)${suffix})${mod}`;\n          } else {\n            route += `(?:${prefix}(${token.pattern})${suffix})${token.modifier}`;\n          }\n        } else {\n          if (token.modifier === \"+\" || token.modifier === \"*\") {\n            throw new TypeError(\n              `Can not repeat \"${token.name}\" without a prefix and suffix`,\n            );\n          }\n\n          route += `(${token.pattern})${token.modifier}`;\n        }\n      } else {\n        route += `(?:${prefix}${suffix})${token.modifier}`;\n      }\n    }\n  }\n\n  if (end) {\n    if (!strict) route += `${delimiterRe}?`;\n\n    route += !options.endsWith ? \"$\" : `(?=${endsWithRe})`;\n  } else {\n    const endToken = tokens[tokens.length - 1];\n    const isEndDelimited =\n      typeof endToken === \"string\"\n        ? delimiterRe.indexOf(endToken[endToken.length - 1]) > -1\n        : endToken === undefined;\n\n    if (!strict) {\n      route += `(?:${delimiterRe}(?=${endsWithRe}))?`;\n    }\n\n    if (!isEndDelimited) {\n      route += `(?=${delimiterRe}|${endsWithRe})`;\n    }\n  }\n\n  return new RegExp(route, flags(options));\n}\n\n/**\n * Supported `path-to-regexp` input types.\n */\nexport type Path = string | RegExp | Array<string | RegExp>;\n\n/**\n * Normalize the given path string, returning a regular expression.\n *\n * An empty array can be passed in for the keys, which will hold the\n * placeholder key descriptions. For example, using `/user/:id`, `keys` will\n * contain `[{ name: 'id', delimiter: '/', optional: false, repeat: false }]`.\n */\nexport function pathToRegexp(\n  path: Path,\n  keys?: Key[],\n  options?: TokensToRegexpOptions & ParseOptions,\n) {\n  if (path instanceof RegExp) return regexpToRegexp(path, keys);\n  if (Array.isArray(path)) return arrayToRegexp(path, keys, options);\n  return stringToRegexp(path, keys, options);\n}\n","exports.interopDefault = function (a) {\n  return a && a.__esModule ? a : {default: a};\n};\n\nexports.defineInteropFlag = function (a) {\n  Object.defineProperty(a, '__esModule', {value: true});\n};\n\nexports.exportAll = function (source, dest) {\n  Object.keys(source).forEach(function (key) {\n    if (\n      key === 'default' ||\n      key === '__esModule' ||\n      Object.prototype.hasOwnProperty.call(dest, key)\n    ) {\n      return;\n    }\n\n    Object.defineProperty(dest, key, {\n      enumerable: true,\n      get: function () {\n        return source[key];\n      },\n    });\n  });\n\n  return dest;\n};\n\nexports.export = function (dest, destName, get) {\n  Object.defineProperty(dest, destName, {\n    enumerable: true,\n    get: get,\n  });\n};\n",null,"/**\r\n * Universal Router (https://www.kriasoft.com/universal-router/)\r\n *\r\n * Copyright (c) 2015-present Kriasoft.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE.txt file in the root directory of this source tree.\r\n */\r\n\r\nimport { parse, type ParseOptions, type Token, tokensToFunction, type TokensToFunctionOptions } from 'path-to-regexp';\r\nimport type { EmptyObject, Writable } from 'type-fest';\r\nimport Resolver from './resolver.js';\r\nimport type { AnyObject, ChildrenCallback, IndexedParams, Params, Route } from './types.js';\r\nimport { getRoutePath, isString } from './utils.js';\r\n\r\nexport type UrlParams = Readonly<Record<string, ReadonlyArray<number | string> | number | string>>;\r\n\r\nfunction cacheRoutes<T, R extends AnyObject, C extends AnyObject>(\r\n  routesByName: Map<string, Array<Route<T, R, C>>>,\r\n  route: Route<T, R, C>,\r\n  routes?: ReadonlyArray<Route<T, R, C>> | ChildrenCallback<T, R, C>,\r\n  cacheKeyProvider?: (route: Route<T, R, C>) => string | undefined,\r\n): void {\r\n  const name = route.name ?? cacheKeyProvider?.(route);\r\n  if (name) {\r\n    if (routesByName.has(name)) {\r\n      routesByName.get(name)?.push(route);\r\n    } else {\r\n      routesByName.set(name, [route]);\r\n    }\r\n  }\r\n\r\n  if (Array.isArray(routes)) {\r\n    for (const childRoute of routes) {\r\n      childRoute.parent = route;\r\n      cacheRoutes(routesByName, childRoute, childRoute.__children ?? childRoute.children, cacheKeyProvider);\r\n    }\r\n  }\r\n}\r\n\r\nfunction getRouteByName<T, R extends AnyObject, C extends AnyObject>(\r\n  routesByName: Map<string, Array<Route<T, R, C>>>,\r\n  routeName: string,\r\n): Route<T, R, C> | undefined {\r\n  const routes = routesByName.get(routeName);\r\n\r\n  if (routes) {\r\n    if (routes.length > 1) {\r\n      throw new Error(`Duplicate route with name \"${routeName}\".` + ` Try seting unique 'name' route properties.`);\r\n    }\r\n\r\n    return routes[0];\r\n  }\r\n\r\n  return undefined;\r\n}\r\n\r\nexport type StringifyQueryParams = (params: UrlParams) => string;\r\n\r\nexport type GenerateUrlOptions<T, R extends AnyObject, C extends AnyObject> = ParseOptions &\r\n  Readonly<{\r\n    /**\r\n     * Add a query string to generated url based on unknown route params.\r\n     */\r\n    stringifyQueryParams?: StringifyQueryParams;\r\n    /**\r\n     * Generates a unique route name based on all parent routes with the specified separator.\r\n     */\r\n    uniqueRouteNameSep?: string;\r\n    cacheKeyProvider?(route: Route<T, R, C>): string | undefined;\r\n  }> &\r\n  TokensToFunctionOptions;\r\n\r\ntype RouteCacheRecord = Readonly<{\r\n  keys: Record<string, true>;\r\n  tokens: Token[];\r\n}>;\r\n\r\nexport type UrlGenerator = (routeName: string, params?: Params) => string;\r\n\r\nfunction generateUrls<T = unknown, R extends AnyObject = EmptyObject, C extends AnyObject = EmptyObject>(\r\n  resolver: Resolver<T, R, C>,\r\n  options: GenerateUrlOptions<T, R, C> = {},\r\n): UrlGenerator {\r\n  if (!(resolver instanceof Resolver)) {\r\n    throw new TypeError('An instance of Resolver is expected');\r\n  }\r\n\r\n  const cache = new Map<string, RouteCacheRecord>();\r\n  const routesByName = new Map<string, Array<Route<T, R, C>>>();\r\n\r\n  return (routeName, params) => {\r\n    let route = getRouteByName(routesByName, routeName);\r\n    if (!route) {\r\n      routesByName.clear(); // clear cache\r\n      cacheRoutes(routesByName, resolver.root, resolver.root.__children, options.cacheKeyProvider);\r\n\r\n      route = getRouteByName(routesByName, routeName);\r\n      if (!route) {\r\n        throw new Error(`Route \"${routeName}\" not found`);\r\n      }\r\n    }\r\n\r\n    let cached: RouteCacheRecord | undefined = route.fullPath ? cache.get(route.fullPath) : undefined;\r\n    if (!cached) {\r\n      let fullPath = getRoutePath(route);\r\n      let rt = route.parent;\r\n      while (rt) {\r\n        const path = getRoutePath(rt);\r\n        if (path) {\r\n          fullPath = `${path.replace(/\\/$/u, '')}/${fullPath.replace(/^\\//u, '')}`;\r\n        }\r\n        rt = rt.parent;\r\n      }\r\n      const tokens = parse(fullPath);\r\n      const keys: Record<string, true> = Object.create(null);\r\n      for (const item of tokens) {\r\n        if (!isString(item)) {\r\n          keys[item.name] = true;\r\n        }\r\n      }\r\n      cached = { keys, tokens };\r\n      cache.set(fullPath, cached);\r\n      route.fullPath = fullPath;\r\n    }\r\n\r\n    const toPath = tokensToFunction(cached.tokens, { encode: encodeURIComponent, ...options });\r\n    let url = toPath(params) || '/';\r\n\r\n    if (options.stringifyQueryParams && params) {\r\n      const queryParams: Writable<IndexedParams> = {};\r\n      for (const [key, value] of Object.entries(params)) {\r\n        if (!(key in cached.keys) && value) {\r\n          queryParams[key] = value;\r\n        }\r\n      }\r\n      const query = options.stringifyQueryParams(queryParams as UrlParams);\r\n      if (query) {\r\n        url += query.startsWith('?') ? query : `?${query}`;\r\n      }\r\n    }\r\n\r\n    return url;\r\n  };\r\n}\r\n\r\nexport default generateUrls;\r\n",null,"/**\r\n * Universal Router (https://www.kriasoft.com/universal-router/)\r\n *\r\n * Copyright (c) 2015-present Kriasoft.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE.txt file in the root directory of this source tree.\r\n */\r\nimport type { EmptyObject } from 'type-fest';\r\nimport matchRoute, { type MatchWithRoute } from './matchRoute.js';\r\nimport defaultResolveRoute from './resolveRoute.js';\r\nimport type {\r\n  ActionResult,\r\n  AnyObject,\r\n  BasicRoutePart,\r\n  Match,\r\n  MaybePromise,\r\n  ResolveContext,\r\n  Route,\r\n  RouteContext,\r\n} from './types.js';\r\nimport { getNotFoundError, getRoutePath, isString, NotFoundError, notFoundResult, toArray } from './utils.js';\r\n\r\nfunction isDescendantRoute<T, R extends AnyObject, C extends AnyObject>(\r\n  route?: Route<T, R, C>,\r\n  maybeParent?: Route<T, R, C>,\r\n) {\r\n  let _route = route;\r\n  while (_route) {\r\n    _route = _route.parent;\r\n    if (_route === maybeParent) {\r\n      return true;\r\n    }\r\n  }\r\n  return false;\r\n}\r\n\r\nfunction isRouteContext<T, R extends AnyObject, C extends AnyObject>(value: unknown): value is RouteContext<T, R, C> {\r\n  return (\r\n    !!value &&\r\n    typeof value === 'object' &&\r\n    'next' in value &&\r\n    'params' in value &&\r\n    'result' in value &&\r\n    'route' in value\r\n  );\r\n}\r\n\r\nexport interface ResolutionErrorOptions extends ErrorOptions {\r\n  code?: number;\r\n}\r\n\r\nexport class ResolutionError<T, R extends AnyObject = EmptyObject, C extends AnyObject = EmptyObject> extends Error {\r\n  readonly code?: number;\r\n  readonly context: RouteContext<T, R, C>;\r\n\r\n  constructor(context: RouteContext<T, R, C>, options?: ResolutionErrorOptions) {\r\n    let errorMessage = `Path '${context.pathname}' is not properly resolved due to an error.`;\r\n    const routePath = getRoutePath(context.route);\r\n    if (routePath) {\r\n      errorMessage += ` Resolution had failed on route: '${routePath}'`;\r\n    }\r\n    super(errorMessage, options);\r\n    this.code = options?.code;\r\n    this.context = context;\r\n  }\r\n\r\n  warn(): void {\r\n    console.warn(this.message);\r\n  }\r\n}\r\n\r\nfunction updateChainForRoute<T, R extends AnyObject, C extends AnyObject>(\r\n  context: RouteContext<T, R, C>,\r\n  match: Match<T, R, C>,\r\n) {\r\n  const { path, route } = match;\r\n\r\n  if (route && !route.__synthetic) {\r\n    const item = { path, route };\r\n    if (route.parent && context.chain) {\r\n      for (let i = context.chain.length - 1; i >= 0; i--) {\r\n        if (context.chain[i].route === route.parent) {\r\n          break;\r\n        }\r\n\r\n        context.chain.pop();\r\n      }\r\n    }\r\n    context.chain?.push(item);\r\n  }\r\n}\r\n\r\nexport type ErrorHandlerCallback<T> = (error: unknown) => T;\r\n\r\nexport type ResolveRouteCallback<T, R extends AnyObject, C extends AnyObject> = (\r\n  context: RouteContext<T, R, C>,\r\n) => MaybePromise<ActionResult<T | RouteContext<T, R, C>>>;\r\n\r\nexport type ResolverOptions<T, R extends AnyObject, C extends AnyObject> = Readonly<{\r\n  baseUrl?: string;\r\n  context?: RouteContext<T, R, C>;\r\n  errorHandler?: ErrorHandlerCallback<T>;\r\n  resolveRoute?: ResolveRouteCallback<T, R, C>;\r\n}>;\r\n\r\nexport default class Resolver<T = unknown, R extends AnyObject = EmptyObject, C extends AnyObject = EmptyObject> {\r\n  /**\r\n   * The base URL for all routes in the router instance. By default,\r\n   * if the base element exists in the `<head>`, vaadin-router\r\n   * takes the `<base href>` attribute value, resolved against the current\r\n   * `document.URL`.\r\n   */\r\n  readonly baseUrl: string;\r\n  #context: RouteContext<T, R, C>;\r\n  readonly errorHandler?: ErrorHandlerCallback<T>;\r\n  readonly resolveRoute: ResolveRouteCallback<T, R, C>;\r\n  readonly #root: BasicRoutePart<T, R, C>;\r\n\r\n  constructor(routes: ReadonlyArray<Route<T, R, C>> | Route<T, R, C>, options?: ResolverOptions<T, R, C>);\r\n  constructor(\r\n    routes: ReadonlyArray<Route<T, R, C>> | Route<T, R, C>,\r\n    { baseUrl = '', context, errorHandler, resolveRoute = defaultResolveRoute }: ResolverOptions<T, R, C> = {},\r\n  ) {\r\n    if (Object(routes) !== routes) {\r\n      throw new TypeError('Invalid routes');\r\n    }\r\n\r\n    this.baseUrl = baseUrl;\r\n    this.errorHandler = errorHandler;\r\n    this.resolveRoute = resolveRoute;\r\n\r\n    if (Array.isArray(routes)) {\r\n      // @FIXME: We should have a route array instead of a single route object\r\n      // to avoid type clash because of a missing `R` part of a route.\r\n      // eslint-disable-next-line @typescript-eslint/consistent-type-assertions\r\n      this.#root = {\r\n        __children: routes,\r\n        __synthetic: true,\r\n        action: () => undefined,\r\n        path: '',\r\n      };\r\n    } else {\r\n      this.#root = { ...routes, parent: undefined };\r\n    }\r\n\r\n    this.#context = {\r\n      ...context!,\r\n      hash: '',\r\n      // eslint-disable-next-line @typescript-eslint/require-await\r\n      async next() {\r\n        return notFoundResult;\r\n      },\r\n      params: {},\r\n      pathname: '',\r\n      resolver: this,\r\n      route: this.#root as Route<T, R, C>,\r\n      search: '',\r\n      chain: [],\r\n    };\r\n  }\r\n\r\n  get root(): Route<T, R, C> {\r\n    return this.#root as Route<T, R, C>;\r\n  }\r\n\r\n  get context(): RouteContext<T, R, C> {\r\n    return this.#context;\r\n  }\r\n\r\n  /**\r\n   * If the baseUrl property is set, transforms the baseUrl and returns the full\r\n   * actual `base` string for using in the `new URL(path, base);` and for\r\n   * prepernding the paths with. The returned base ends with a trailing slash.\r\n   *\r\n   * Otherwise, returns empty string.\r\n   */\r\n  protected get __effectiveBaseUrl(): string {\r\n    return this.baseUrl ? new URL(this.baseUrl, document.baseURI || document.URL).href.replace(/[^/]*$/u, '') : '';\r\n  }\r\n\r\n  /**\r\n   * Returns the current list of routes (as a shallow copy). Adding / removing\r\n   * routes to / from the returned array does not affect the routing config,\r\n   * but modifying the route objects does.\r\n   *\r\n   * @public\r\n   */\r\n  getRoutes(): ReadonlyArray<Route<T, R, C>> {\r\n    return [...(this.#root.__children ?? [])];\r\n  }\r\n\r\n  /**\r\n   * Removes all existing routes from the routing config.\r\n   *\r\n   * @public\r\n   */\r\n  removeRoutes(): void {\r\n    this.#root.__children = [];\r\n  }\r\n\r\n  /**\r\n   * Asynchronously resolves the given pathname, i.e. finds all routes matching\r\n   * the pathname and tries resolving them one after another in the order they\r\n   * are listed in the routes config until the first non-null result.\r\n   *\r\n   * Returns a promise that is fulfilled with the return value of an object that consists of the first\r\n   * route handler result that returns something other than `null` or `undefined` and context used to get this result.\r\n   *\r\n   * If no route handlers return a non-null result, or if no route matches the\r\n   * given pathname the returned promise is rejected with a 'page not found'\r\n   * `Error`.\r\n   *\r\n   * @param pathnameOrContext - the pathname to\r\n   *    resolve or a context object with a `pathname` property and other\r\n   *    properties to pass to the route resolver functions.\r\n   */\r\n  async resolve(pathnameOrContext: ResolveContext<C> | string): Promise<ActionResult<RouteContext<T, R, C>>> {\r\n    const self = this;\r\n    const context: RouteContext<T, R, C> = {\r\n      ...this.#context,\r\n      ...(isString(pathnameOrContext) ? { pathname: pathnameOrContext } : pathnameOrContext),\r\n      // eslint-disable-next-line @typescript-eslint/no-use-before-define\r\n      next,\r\n    };\r\n    const match = matchRoute(\r\n      this.#root as Route<T, R, C>,\r\n      this.__normalizePathname(context.pathname) ?? context.pathname,\r\n      !!this.baseUrl,\r\n    );\r\n    const resolve = this.resolveRoute;\r\n    let matches: IteratorResult<MatchWithRoute<T, R, C>, undefined> | null = null;\r\n    let nextMatches: IteratorResult<MatchWithRoute<T, R, C>, undefined> | null = null;\r\n    let currentContext = context;\r\n\r\n    async function next(\r\n      resume: boolean = false,\r\n      parent: Route<T, R, C> | undefined = matches?.value?.route,\r\n      prevResult?: ActionResult<T | RouteContext<T, R, C>>,\r\n    ): Promise<ActionResult<RouteContext<T, R, C>>> {\r\n      const routeToSkip = prevResult === null ? matches?.value?.route : undefined;\r\n      matches = nextMatches ?? match.next(routeToSkip);\r\n      nextMatches = null;\r\n\r\n      if (!resume) {\r\n        if (!!matches.done || !isDescendantRoute(matches.value.route, parent)) {\r\n          nextMatches = matches;\r\n          return notFoundResult;\r\n        }\r\n      }\r\n\r\n      if (matches.done) {\r\n        throw getNotFoundError(context);\r\n      }\r\n\r\n      currentContext = {\r\n        ...context,\r\n        params: matches.value.params,\r\n        route: matches.value.route,\r\n        chain: currentContext.chain?.slice(),\r\n      };\r\n      updateChainForRoute(currentContext, matches.value);\r\n\r\n      const resolution = await resolve(currentContext);\r\n\r\n      if (resolution !== null && resolution !== undefined && resolution !== notFoundResult) {\r\n        currentContext.result = isRouteContext<T, R, C>(resolution) ? resolution.result : resolution;\r\n        self.#context = currentContext;\r\n        return currentContext;\r\n      }\r\n      return await next(resume, parent, resolution);\r\n    }\r\n\r\n    try {\r\n      return await next(true, this.#root as Route<T, R, C>);\r\n    } catch (error: unknown) {\r\n      const _error =\r\n        error instanceof NotFoundError\r\n          ? error\r\n          : new ResolutionError(currentContext as RouteContext<R>, { code: 500, cause: error });\r\n\r\n      if (this.errorHandler) {\r\n        currentContext.result = this.errorHandler(_error);\r\n        return currentContext;\r\n      }\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Sets the routing config (replacing the existing one).\r\n   *\r\n   * @param routes - a single route or an array of those\r\n   *    (the array is shallow copied)\r\n   */\r\n  setRoutes(routes: ReadonlyArray<Route<T, R, C>> | Route<T, R, C>): void {\r\n    this.#root.__children = [...toArray(routes)];\r\n  }\r\n\r\n  /**\r\n   * If the baseUrl is set, matches the pathname with the routers baseUrl,\r\n   * and returns the local pathname with the baseUrl stripped out.\r\n   *\r\n   * If the pathname does not match the baseUrl, returns undefined.\r\n   *\r\n   * If the `baseUrl` is not set, returns the unmodified pathname argument.\r\n   */\r\n  protected __normalizePathname(pathname: string): string | undefined {\r\n    if (!this.baseUrl) {\r\n      // No base URL, no need to transform the pathname.\r\n      return pathname;\r\n    }\r\n\r\n    const base = this.__effectiveBaseUrl;\r\n    // Convert pathname to a valid URL constructor argument\r\n    const url = pathname.startsWith('/') ? new URL(base).origin + pathname : `./${pathname}`;\r\n    const normalizedUrl = new URL(url, base).href;\r\n    if (normalizedUrl.startsWith(base)) {\r\n      return normalizedUrl.slice(base.length);\r\n    }\r\n\r\n    return undefined;\r\n  }\r\n\r\n  /**\r\n   * Appends one or several routes to the routing config and returns the\r\n   * effective routing config after the operation.\r\n   *\r\n   * @param routes - a single route or an array of those\r\n   *    (the array is shallow copied)\r\n   */\r\n  protected addRoutes(routes: ReadonlyArray<Route<T, R, C>> | Route<T, R, C>): ReadonlyArray<Route<T, R, C>> {\r\n    this.#root.__children = [...(this.#root.__children ?? []), ...toArray(routes)];\r\n    return this.getRoutes();\r\n  }\r\n}\r\n",null,"/**\r\n * Universal Router (https://www.kriasoft.com/universal-router/)\r\n *\r\n * Copyright (c) 2015-present Kriasoft.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE.txt file in the root directory of this source tree.\r\n */\r\n\r\nimport type { Key } from 'path-to-regexp';\r\nimport matchPath, { type Match } from './matchPath.js';\r\nimport type { AnyObject, IndexedParams, Route } from './types.js';\r\nimport { getRoutePath, unwrapChildren } from './utils.js';\r\n\r\nexport type MatchWithRoute<T, R extends AnyObject, C extends AnyObject> = Match &\r\n  Readonly<{\r\n    route: Route<T, R, C>;\r\n  }>;\r\n\r\ntype RouteMatchIterator<T, R extends AnyObject, C extends AnyObject> = Iterator<\r\n  MatchWithRoute<T, R, C>,\r\n  undefined,\r\n  Route<T, R, C> | undefined\r\n>;\r\n\r\n/**\r\n * Traverses the routes tree and matches its nodes to the given pathname from\r\n * the root down to the leaves. Each match consumes a part of the pathname and\r\n * the matching process continues for as long as there is a matching child\r\n * route for the remaining part of the pathname.\r\n *\r\n * The returned value is a lazily evaluated iterator.\r\n *\r\n * The leading \"/\" in a route path matters only for the root of the routes\r\n * tree (or if all parent routes are \"\"). In all other cases a leading \"/\" in\r\n * a child route path has no significance.\r\n *\r\n * The trailing \"/\" in a _route path_ matters only for the leaves of the\r\n * routes tree. A leaf route with a trailing \"/\" matches only a pathname that\r\n * also has a trailing \"/\".\r\n *\r\n * The trailing \"/\" in a route path does not affect matching of child routes\r\n * in any way.\r\n *\r\n * The trailing \"/\" in a _pathname_ generally does not matter (except for\r\n * the case of leaf nodes described above).\r\n *\r\n * The \"\" and \"/\" routes have special treatment:\r\n *  1. as a single route\r\n *     the \"\" and \"/\" routes match only the \"\" and \"/\" pathnames respectively\r\n *  2. as a parent in the routes tree\r\n *     the \"\" route matches any pathname without consuming any part of it\r\n *     the \"/\" route matches any absolute pathname consuming its leading \"/\"\r\n *  3. as a leaf in the routes tree\r\n *     the \"\" and \"/\" routes match only if the entire pathname is consumed by\r\n *         the parent routes chain. In this case \"\" and \"/\" are equivalent.\r\n *  4. several directly nested \"\" or \"/\" routes\r\n *     - directly nested \"\" or \"/\" routes are 'squashed' (i.e. nesting two\r\n *       \"/\" routes does not require a double \"/\" in the pathname to match)\r\n *     - if there are only \"\" in the parent routes chain, no part of the\r\n *       pathname is consumed, and the leading \"/\" in the child routes' paths\r\n *       remains significant\r\n *\r\n * Side effect:\r\n *   - the routes tree `{ path: '' }` matches only the '' pathname\r\n *   - the routes tree `{ path: '', children: [ { path: '' } ] }` matches any\r\n *     pathname (for the tree root)\r\n *\r\n * Prefix matching can be enabled also by `children: true`.\r\n */\r\n// eslint-disable-next-line @typescript-eslint/max-params\r\nfunction matchRoute<T, R extends AnyObject, C extends AnyObject>(\r\n  route: Route<T, R, C>,\r\n  pathname: string,\r\n  ignoreLeadingSlash?: boolean,\r\n  parentKeys?: readonly Key[],\r\n  parentParams?: IndexedParams,\r\n): Iterator<MatchWithRoute<T, R, C>, undefined, Route<T, R, C> | undefined> {\r\n  let match: Match | null;\r\n  let childMatches: RouteMatchIterator<T, R, C> | null;\r\n  let childIndex = 0;\r\n  let routepath = getRoutePath(route);\r\n  if (routepath.startsWith('/')) {\r\n    if (ignoreLeadingSlash) {\r\n      routepath = routepath.substring(1);\r\n    }\r\n    // eslint-disable-next-line no-param-reassign\r\n    ignoreLeadingSlash = true;\r\n  }\r\n\r\n  return {\r\n    next(routeToSkip?: Route<T, R, C>): IteratorResult<MatchWithRoute<T, R, C>, undefined> {\r\n      if (route === routeToSkip) {\r\n        return { done: true, value: undefined };\r\n      }\r\n\r\n      route.__children ??= unwrapChildren(route.children);\r\n      const children = route.__children ?? [];\r\n      const exact = !route.__children && !route.children;\r\n\r\n      if (!match) {\r\n        match = matchPath(routepath, pathname, exact, parentKeys, parentParams);\r\n\r\n        if (match) {\r\n          return {\r\n            value: {\r\n              keys: match.keys,\r\n              params: match.params,\r\n              path: match.path,\r\n              route,\r\n            },\r\n          };\r\n        }\r\n      }\r\n\r\n      if (match && children.length > 0) {\r\n        while (childIndex < children.length) {\r\n          if (!childMatches) {\r\n            const childRoute = children[childIndex];\r\n            childRoute.parent = route;\r\n\r\n            let matchedLength = match.path.length;\r\n            if (matchedLength > 0 && pathname.charAt(matchedLength) === '/') {\r\n              matchedLength += 1;\r\n            }\r\n\r\n            childMatches = matchRoute(\r\n              childRoute,\r\n              pathname.substring(matchedLength),\r\n              ignoreLeadingSlash,\r\n              match.keys,\r\n              match.params,\r\n            );\r\n          }\r\n\r\n          const childMatch = childMatches.next(routeToSkip);\r\n          if (!childMatch.done) {\r\n            return {\r\n              done: false,\r\n              value: childMatch.value,\r\n            };\r\n          }\r\n\r\n          childMatches = null;\r\n          childIndex += 1;\r\n        }\r\n      }\r\n\r\n      return { done: true, value: undefined };\r\n    },\r\n  };\r\n}\r\n\r\nexport default matchRoute;\r\n",null,"/**\r\n * Universal Router (https://www.kriasoft.com/universal-router/)\r\n *\r\n * Copyright (c) 2015-present Kriasoft.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE.txt file in the root directory of this source tree.\r\n */\r\n\r\nimport { type Key, pathToRegexp } from 'path-to-regexp';\r\nimport type { Writable } from 'type-fest';\r\nimport type { IndexedParams } from '../types.js';\r\nimport { resolvePath } from './utils.js';\r\n\r\nexport interface RegExpExecOptArray extends ReadonlyArray<string | undefined> {\r\n  0: string;\r\n  index: number;\r\n  input: string;\r\n}\r\n\r\ntype Matcher = Readonly<{\r\n  keys: readonly Key[];\r\n  pattern: RegExp;\r\n}>;\r\n\r\nexport type Match = Readonly<{\r\n  keys: readonly Key[];\r\n  params: IndexedParams;\r\n  path: string;\r\n}>;\r\n\r\nconst cache = new Map<string, Matcher>();\r\n// see https://github.com/pillarjs/path-to-regexp/issues/148\r\ncache.set('|false', {\r\n  keys: [],\r\n  pattern: /(?:)/u,\r\n});\r\n\r\nfunction decodeParam(val: string): string {\r\n  try {\r\n    return decodeURIComponent(val);\r\n  } catch {\r\n    return val;\r\n  }\r\n}\r\n\r\n// eslint-disable-next-line @typescript-eslint/max-params\r\nfunction matchPath(\r\n  routePath: string,\r\n  path?: string[] | string,\r\n  exact: boolean = false,\r\n  parentKeys: readonly Key[] = [],\r\n  parentParams?: IndexedParams,\r\n): Match | null {\r\n  const cacheKey = `${routePath}|${String(exact)}`;\r\n  const _path = resolvePath(path);\r\n  let regexp = cache.get(cacheKey);\r\n\r\n  if (!regexp) {\r\n    const keys: Key[] = [];\r\n    regexp = {\r\n      keys,\r\n      pattern: pathToRegexp(routePath, keys, {\r\n        end: exact,\r\n        strict: routePath === '',\r\n      }),\r\n    };\r\n    cache.set(cacheKey, regexp);\r\n  }\r\n\r\n  const m: RegExpExecOptArray | null = regexp.pattern.exec(_path);\r\n  if (!m) {\r\n    return null;\r\n  }\r\n\r\n  const params: Writable<IndexedParams> = { ...parentParams };\r\n\r\n  for (let i = 1; i < m.length; i++) {\r\n    const key = regexp.keys[i - 1];\r\n    const prop = key.name;\r\n    const value = m[i];\r\n    if (value !== undefined || !Object.hasOwn(params, prop)) {\r\n      if (key.modifier === '+' || key.modifier === '*') {\r\n        // by default, as of path-to-regexp 6.0.0, the default delimiters\r\n        // are `/`, `#` and `?`.\r\n        params[prop] = value ? value.split(/[/?#]/u).map(decodeParam) : [];\r\n      } else {\r\n        params[prop] = value ? decodeParam(value) : value!;\r\n      }\r\n    }\r\n  }\r\n\r\n  return {\r\n    keys: [...parentKeys, ...regexp.keys],\r\n    params,\r\n    path: m[0],\r\n  };\r\n}\r\n\r\nexport default matchPath;\r\n",null,"import type { AnyObject, ChildrenCallback, Route, RouteContext } from './types.js';\r\n\r\nexport function isObject(o: unknown): o is object {\r\n  // guard against null passing the typeof check\r\n  return typeof o === 'object' && !!o;\r\n}\r\n\r\n// eslint-disable-next-line @typescript-eslint/ban-types\r\nexport function isFunction(f: unknown): f is Function {\r\n  return typeof f === 'function';\r\n}\r\n\r\nexport function isString(s: unknown): s is string {\r\n  return typeof s === 'string';\r\n}\r\n\r\nexport function toArray<T>(value: T | readonly T[] = []): readonly T[] {\r\n  return Array.isArray(value) ? value : [value];\r\n}\r\n\r\nexport function log(msg: string): string {\r\n  return `[Vaadin.Router] ${msg}`;\r\n}\r\n\r\nexport class NotFoundError<T, R extends AnyObject, C extends AnyObject> extends Error {\r\n  readonly code: number;\r\n  readonly context: RouteContext<T, R, C>;\r\n\r\n  constructor(context: RouteContext<T, R, C>) {\r\n    super(log(`Page not found (${context.pathname})`));\r\n    this.context = context;\r\n    this.code = 404;\r\n  }\r\n}\r\n\r\nexport const notFoundResult = Symbol('NotFoundResult');\r\nexport type NotFoundResult = typeof notFoundResult;\r\n\r\nexport function getNotFoundError<T, R extends AnyObject, C extends AnyObject>(\r\n  context: RouteContext<T, R, C>,\r\n): NotFoundError<T, R, C> {\r\n  return new NotFoundError(context);\r\n}\r\n\r\nexport function resolvePath(path?: string | readonly string[]): string {\r\n  return (Array.isArray(path) ? path[0] : path) ?? '';\r\n}\r\n\r\nexport function getRoutePath<T, R extends AnyObject, C extends AnyObject>(route: Route<T, R, C> | undefined): string {\r\n  return resolvePath(route?.path);\r\n}\r\n\r\nexport function unwrapChildren<T, R extends AnyObject, C extends AnyObject>(\r\n  children: ChildrenCallback<T, R, C> | ReadonlyArray<Route<T, R, C>> | undefined,\r\n): ReadonlyArray<Route<T, R, C>> | undefined {\r\n  return Array.isArray<ReadonlyArray<Route<T, R, C>>>(children) && children.length > 0 ? children : undefined;\r\n}\r\n",null,"/**\r\n * Universal Router (https://www.kriasoft.com/universal-router/)\r\n *\r\n * Copyright (c) 2015-present Kriasoft.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE.txt file in the root directory of this source tree.\r\n */\r\nimport type { ActionResult, AnyObject, MaybePromise, RouteContext } from './types.js';\r\nimport { isFunction } from './utils.js';\r\n\r\n// eslint-disable-next-line @typescript-eslint/no-invalid-void-type\r\nexport default function resolveRoute<T, R extends AnyObject, C extends AnyObject>(\r\n  context: RouteContext<T, R, C>,\r\n): MaybePromise<ActionResult<T | RouteContext<T, R, C>>> {\r\n  if (isFunction(context.route.action)) {\r\n    // @ts-expect-error: ignore \"never\" type here\r\n    return context.route.action(context);\r\n  }\r\n  return undefined;\r\n}\r\n",null,"import './router-meta.js';\r\n",null,"export function __REGISTER__(feature, vaadinObj = (window.Vaadin ??= {})) {\r\n  vaadinObj.registrations ??= [];\r\n  vaadinObj.registrations.push({\r\n    is: feature ? `${__NAME__}/${feature}` : __NAME__,\r\n    version: __VERSION__,\r\n  });\r\n}\r\n","import { usageStatistics } from '@vaadin/vaadin-usage-statistics/vaadin-usage-statistics.js';\r\n\r\n// @ts-expect-error: Generated function\r\n// eslint-disable-next-line @typescript-eslint/no-unsafe-call\r\n__REGISTER__();\r\n\r\nusageStatistics();\r\n","export * from './vaadin-usage-statistics-collect.js';\n","/* This file is autogenerated from src/vaadin-usage-statistics.tpl.html */\n/*\n\nThis script gathers usage statistics from the application running in development mode.\n\nStatistics gathering is automatically disabled and excluded from production builds.\n\nFor details and to opt-out, see https://github.com/vaadin/vaadin-usage-statistics.\n\n*/\n/*\n  FIXME(polymer-modulizer): the above comments were extracted\n  from HTML and may be out of place here. Review them and\n  then delete this comment!\n*/\nimport { runIfDevelopmentMode } from '@vaadin/vaadin-development-mode-detector/vaadin-development-mode-detector.js';\n\nfunction maybeGatherAndSendStats() {\n  /*! vaadin-dev-mode:start\n  (function () {\n'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar getPolymerVersion = function getPolymerVersion() {\n  return window.Polymer && window.Polymer.version;\n};\n\nvar StatisticsGatherer = function () {\n  function StatisticsGatherer(logger) {\n    classCallCheck(this, StatisticsGatherer);\n\n    this.now = new Date().getTime();\n    this.logger = logger;\n  }\n\n  createClass(StatisticsGatherer, [{\n    key: 'frameworkVersionDetectors',\n    value: function frameworkVersionDetectors() {\n      return {\n        'Flow': function Flow() {\n          if (window.Vaadin && window.Vaadin.Flow && window.Vaadin.Flow.clients) {\n            var flowVersions = Object.keys(window.Vaadin.Flow.clients).map(function (key) {\n              return window.Vaadin.Flow.clients[key];\n            }).filter(function (client) {\n              return client.getVersionInfo;\n            }).map(function (client) {\n              return client.getVersionInfo().flow;\n            });\n            if (flowVersions.length > 0) {\n              return flowVersions[0];\n            }\n          }\n        },\n        'Vaadin Framework': function VaadinFramework() {\n          if (window.vaadin && window.vaadin.clients) {\n            var frameworkVersions = Object.values(window.vaadin.clients).filter(function (client) {\n              return client.getVersionInfo;\n            }).map(function (client) {\n              return client.getVersionInfo().vaadinVersion;\n            });\n            if (frameworkVersions.length > 0) {\n              return frameworkVersions[0];\n            }\n          }\n        },\n        'AngularJs': function AngularJs() {\n          if (window.angular && window.angular.version && window.angular.version) {\n            return window.angular.version.full;\n          }\n        },\n        'Angular': function Angular() {\n          if (window.ng) {\n            var tags = document.querySelectorAll(\"[ng-version]\");\n            if (tags.length > 0) {\n              return tags[0].getAttribute(\"ng-version\");\n            }\n            return \"Unknown\";\n          }\n        },\n        'Backbone.js': function BackboneJs() {\n          if (window.Backbone) {\n            return window.Backbone.VERSION;\n          }\n        },\n        'React': function React() {\n          var reactSelector = '[data-reactroot], [data-reactid]';\n          if (!!document.querySelector(reactSelector)) {\n            // React does not publish the version by default\n            return \"unknown\";\n          }\n        },\n        'Ember': function Ember() {\n          if (window.Em && window.Em.VERSION) {\n            return window.Em.VERSION;\n          } else if (window.Ember && window.Ember.VERSION) {\n            return window.Ember.VERSION;\n          }\n        },\n        'jQuery': function (_jQuery) {\n          function jQuery() {\n            return _jQuery.apply(this, arguments);\n          }\n\n          jQuery.toString = function () {\n            return _jQuery.toString();\n          };\n\n          return jQuery;\n        }(function () {\n          if (typeof jQuery === 'function' && jQuery.prototype.jquery !== undefined) {\n            return jQuery.prototype.jquery;\n          }\n        }),\n        'Polymer': function Polymer() {\n          var version = getPolymerVersion();\n          if (version) {\n            return version;\n          }\n        },\n        'LitElement': function LitElement() {\n          var version = window.litElementVersions && window.litElementVersions[0];\n          if (version) {\n            return version;\n          }\n        },\n        'LitHtml': function LitHtml() {\n          var version = window.litHtmlVersions && window.litHtmlVersions[0];\n          if (version) {\n            return version;\n          }\n        },\n        'Vue.js': function VueJs() {\n          if (window.Vue) {\n            return window.Vue.version;\n          }\n        }\n      };\n    }\n  }, {\n    key: 'getUsedVaadinElements',\n    value: function getUsedVaadinElements(elements) {\n      var version = getPolymerVersion();\n      var elementClasses = void 0;\n      // NOTE: In case you edit the code here, YOU MUST UPDATE any statistics reporting code in Flow.\n      // Check all locations calling the method getEntries() in\n      // https://github.com/vaadin/flow/blob/master/flow-server/src/main/java/com/vaadin/flow/internal/UsageStatistics.java#L106\n      // Currently it is only used by BootstrapHandler.\n      if (version && version.indexOf('2') === 0) {\n        // Polymer 2: components classes are stored in window.Vaadin\n        elementClasses = Object.keys(window.Vaadin).map(function (c) {\n          return window.Vaadin[c];\n        }).filter(function (c) {\n          return c.is;\n        });\n      } else {\n        // Polymer 3: components classes are stored in window.Vaadin.registrations\n        elementClasses = window.Vaadin.registrations || [];\n      }\n      elementClasses.forEach(function (klass) {\n        var version = klass.version ? klass.version : \"0.0.0\";\n        elements[klass.is] = { version: version };\n      });\n    }\n  }, {\n    key: 'getUsedVaadinThemes',\n    value: function getUsedVaadinThemes(themes) {\n      ['Lumo', 'Material'].forEach(function (themeName) {\n        var theme;\n        var version = getPolymerVersion();\n        if (version && version.indexOf('2') === 0) {\n          // Polymer 2: themes are stored in window.Vaadin\n          theme = window.Vaadin[themeName];\n        } else {\n          // Polymer 3: themes are stored in custom element registry\n          theme = customElements.get('vaadin-' + themeName.toLowerCase() + '-styles');\n        }\n        if (theme && theme.version) {\n          themes[themeName] = { version: theme.version };\n        }\n      });\n    }\n  }, {\n    key: 'getFrameworks',\n    value: function getFrameworks(frameworks) {\n      var detectors = this.frameworkVersionDetectors();\n      Object.keys(detectors).forEach(function (framework) {\n        var detector = detectors[framework];\n        try {\n          var version = detector();\n          if (version) {\n            frameworks[framework] = { version: version };\n          }\n        } catch (e) {}\n      });\n    }\n  }, {\n    key: 'gather',\n    value: function gather(storage) {\n      var storedStats = storage.read();\n      var gatheredStats = {};\n      var types = [\"elements\", \"frameworks\", \"themes\"];\n\n      types.forEach(function (type) {\n        gatheredStats[type] = {};\n        if (!storedStats[type]) {\n          storedStats[type] = {};\n        }\n      });\n\n      var previousStats = JSON.stringify(storedStats);\n\n      this.getUsedVaadinElements(gatheredStats.elements);\n      this.getFrameworks(gatheredStats.frameworks);\n      this.getUsedVaadinThemes(gatheredStats.themes);\n\n      var now = this.now;\n      types.forEach(function (type) {\n        var keys = Object.keys(gatheredStats[type]);\n        keys.forEach(function (key) {\n          if (!storedStats[type][key] || _typeof(storedStats[type][key]) != _typeof({})) {\n            storedStats[type][key] = { firstUsed: now };\n          }\n          // Discards any previously logged version number\n          storedStats[type][key].version = gatheredStats[type][key].version;\n          storedStats[type][key].lastUsed = now;\n        });\n      });\n\n      var newStats = JSON.stringify(storedStats);\n      storage.write(newStats);\n      if (newStats != previousStats && Object.keys(storedStats).length > 0) {\n        this.logger.debug(\"New stats: \" + newStats);\n      }\n    }\n  }]);\n  return StatisticsGatherer;\n}();\n\nvar StatisticsStorage = function () {\n  function StatisticsStorage(key) {\n    classCallCheck(this, StatisticsStorage);\n\n    this.key = key;\n  }\n\n  createClass(StatisticsStorage, [{\n    key: 'read',\n    value: function read() {\n      var localStorageStatsString = localStorage.getItem(this.key);\n      try {\n        return JSON.parse(localStorageStatsString ? localStorageStatsString : '{}');\n      } catch (e) {\n        return {};\n      }\n    }\n  }, {\n    key: 'write',\n    value: function write(data) {\n      localStorage.setItem(this.key, data);\n    }\n  }, {\n    key: 'clear',\n    value: function clear() {\n      localStorage.removeItem(this.key);\n    }\n  }, {\n    key: 'isEmpty',\n    value: function isEmpty() {\n      var storedStats = this.read();\n      var empty = true;\n      Object.keys(storedStats).forEach(function (key) {\n        if (Object.keys(storedStats[key]).length > 0) {\n          empty = false;\n        }\n      });\n\n      return empty;\n    }\n  }]);\n  return StatisticsStorage;\n}();\n\nvar StatisticsSender = function () {\n  function StatisticsSender(url, logger) {\n    classCallCheck(this, StatisticsSender);\n\n    this.url = url;\n    this.logger = logger;\n  }\n\n  createClass(StatisticsSender, [{\n    key: 'send',\n    value: function send(data, errorHandler) {\n      var logger = this.logger;\n\n      if (navigator.onLine === false) {\n        logger.debug(\"Offline, can't send\");\n        errorHandler();\n        return;\n      }\n      logger.debug(\"Sending data to \" + this.url);\n\n      var req = new XMLHttpRequest();\n      req.withCredentials = true;\n      req.addEventListener(\"load\", function () {\n        // Stats sent, nothing more to do\n        logger.debug(\"Response: \" + req.responseText);\n      });\n      req.addEventListener(\"error\", function () {\n        logger.debug(\"Send failed\");\n        errorHandler();\n      });\n      req.addEventListener(\"abort\", function () {\n        logger.debug(\"Send aborted\");\n        errorHandler();\n      });\n      req.open(\"POST\", this.url);\n      req.setRequestHeader(\"Content-Type\", \"application/json\");\n      req.send(data);\n    }\n  }]);\n  return StatisticsSender;\n}();\n\nvar StatisticsLogger = function () {\n  function StatisticsLogger(id) {\n    classCallCheck(this, StatisticsLogger);\n\n    this.id = id;\n  }\n\n  createClass(StatisticsLogger, [{\n    key: '_isDebug',\n    value: function _isDebug() {\n      return localStorage.getItem(\"vaadin.\" + this.id + \".debug\");\n    }\n  }, {\n    key: 'debug',\n    value: function debug(msg) {\n      if (this._isDebug()) {\n        console.info(this.id + \": \" + msg);\n      }\n    }\n  }]);\n  return StatisticsLogger;\n}();\n\nvar UsageStatistics = function () {\n  function UsageStatistics() {\n    classCallCheck(this, UsageStatistics);\n\n    this.now = new Date();\n    this.timeNow = this.now.getTime();\n    this.gatherDelay = 10; // Delay between loading this file and gathering stats\n    this.initialDelay = 24 * 60 * 60;\n\n    this.logger = new StatisticsLogger(\"statistics\");\n    this.storage = new StatisticsStorage(\"vaadin.statistics.basket\");\n    this.gatherer = new StatisticsGatherer(this.logger);\n    this.sender = new StatisticsSender(\"https://tools.vaadin.com/usage-stats/submit\", this.logger);\n  }\n\n  createClass(UsageStatistics, [{\n    key: 'maybeGatherAndSend',\n    value: function maybeGatherAndSend() {\n      var _this = this;\n\n      if (localStorage.getItem(UsageStatistics.optOutKey)) {\n        return;\n      }\n      this.gatherer.gather(this.storage);\n      setTimeout(function () {\n        _this.maybeSend();\n      }, this.gatherDelay * 1000);\n    }\n  }, {\n    key: 'lottery',\n    value: function lottery() {\n      return true;\n    }\n  }, {\n    key: 'currentMonth',\n    value: function currentMonth() {\n      return this.now.getYear() * 12 + this.now.getMonth();\n    }\n  }, {\n    key: 'maybeSend',\n    value: function maybeSend() {\n      var firstUse = Number(localStorage.getItem(UsageStatistics.firstUseKey));\n      var monthProcessed = Number(localStorage.getItem(UsageStatistics.monthProcessedKey));\n\n      if (!firstUse) {\n        // Use a grace period to avoid interfering with tests, incognito mode etc\n        firstUse = this.timeNow;\n        localStorage.setItem(UsageStatistics.firstUseKey, firstUse);\n      }\n\n      if (this.timeNow < firstUse + this.initialDelay * 1000) {\n        this.logger.debug(\"No statistics will be sent until the initial delay of \" + this.initialDelay + \"s has passed\");\n        return;\n      }\n      if (this.currentMonth() <= monthProcessed) {\n        this.logger.debug(\"This month has already been processed\");\n        return;\n      }\n      localStorage.setItem(UsageStatistics.monthProcessedKey, this.currentMonth());\n      // Use random sampling\n      if (this.lottery()) {\n        this.logger.debug(\"Congratulations, we have a winner!\");\n      } else {\n        this.logger.debug(\"Sorry, no stats from you this time\");\n        return;\n      }\n\n      this.send();\n    }\n  }, {\n    key: 'send',\n    value: function send() {\n      // Ensure we have the latest data\n      this.gatherer.gather(this.storage);\n\n      // Read, send and clean up\n      var data = this.storage.read();\n      data[\"firstUse\"] = Number(localStorage.getItem(UsageStatistics.firstUseKey));\n      data[\"usageStatisticsVersion\"] = UsageStatistics.version;\n      var info = 'This request contains usage statistics gathered from the application running in development mode. \\n\\nStatistics gathering is automatically disabled and excluded from production builds.\\n\\nFor details and to opt-out, see https://github.com/vaadin/vaadin-usage-statistics.\\n\\n\\n\\n';\n      var self = this;\n      this.sender.send(info + JSON.stringify(data), function () {\n        // Revert the 'month processed' flag\n        localStorage.setItem(UsageStatistics.monthProcessedKey, self.currentMonth() - 1);\n      });\n    }\n  }], [{\n    key: 'version',\n    get: function get$1() {\n      return '2.1.2';\n    }\n  }, {\n    key: 'firstUseKey',\n    get: function get$1() {\n      return 'vaadin.statistics.firstuse';\n    }\n  }, {\n    key: 'monthProcessedKey',\n    get: function get$1() {\n      return 'vaadin.statistics.monthProcessed';\n    }\n  }, {\n    key: 'optOutKey',\n    get: function get$1() {\n      return 'vaadin.statistics.optout';\n    }\n  }]);\n  return UsageStatistics;\n}();\n\ntry {\n  window.Vaadin = window.Vaadin || {};\n  window.Vaadin.usageStatsChecker = window.Vaadin.usageStatsChecker || new UsageStatistics();\n  window.Vaadin.usageStatsChecker.maybeGatherAndSend();\n} catch (e) {\n  // Intentionally ignored as this is not a problem in the app being developed\n}\n\n}());\n\n  vaadin-dev-mode:end **/\n}\n\nexport const usageStatistics = function() {\n  if (typeof runIfDevelopmentMode === 'function') {\n    return runIfDevelopmentMode(maybeGatherAndSendStats);\n  }\n};\n","const DEV_MODE_CODE_REGEXP =\n  /\\/\\*[\\*!]\\s+vaadin-dev-mode:start([\\s\\S]*)vaadin-dev-mode:end\\s+\\*\\*\\//i;\n\nconst FlowClients = window.Vaadin && window.Vaadin.Flow && window.Vaadin.Flow.clients;\n\nfunction isMinified() {\n  function test() {\n    /** vaadin-dev-mode:start\n    return false;\n    vaadin-dev-mode:end **/\n    return true;\n  }\n  return uncommentAndRun(test);\n}\n\nfunction isDevelopmentMode() {\n  try {\n    if (isForcedDevelopmentMode()) {\n      return true;\n    }\n\n    if (!isLocalhost()) {\n      return false;\n    }\n\n    if (FlowClients) {\n      return !isFlowProductionMode();\n    }\n\n    return !isMinified();\n  } catch (e) {\n    // Some error in this code, assume production so no further actions will be taken\n    return false;\n  }\n}\n\nfunction isForcedDevelopmentMode() {\n  return localStorage.getItem(\"vaadin.developmentmode.force\");\n}\n\nfunction isLocalhost() {\n  return ([\"localhost\",\"127.0.0.1\"].indexOf(window.location.hostname) >= 0);\n}\n\nfunction isFlowProductionMode() {\n  if (FlowClients) {\n    const productionModeApps = Object.keys(FlowClients)\n      .map(key => FlowClients[key])\n      .filter(client => client.productionMode);\n    if (productionModeApps.length > 0) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction uncommentAndRun(callback, args) {\n  if (typeof callback !== 'function') {\n    return;\n  }\n\n  const match = DEV_MODE_CODE_REGEXP.exec(callback.toString());\n  if (match) {\n    try {\n      // requires CSP: script-src 'unsafe-eval'\n      callback = new Function(match[1]);\n    } catch (e) {\n      // eat the exception\n      console.log('vaadin-development-mode-detector: uncommentAndRun() failed', e)\n    }\n  }\n\n  return callback(args);\n}\n\n// A guard against polymer-modulizer removing the window.Vaadin\n// initialization above.\nwindow['Vaadin'] = window['Vaadin'] || {};\n\n/**\n * Inspects the source code of the given `callback` function for\n * specially-marked _commented_ code. If such commented code is found in the\n * callback source, uncomments and runs that code instead of the callback\n * itself. Otherwise runs the callback as is.\n *\n * The optional arguments are passed into the callback / uncommented code,\n * the result is returned.\n *\n * See the `isMinified()` function source code in this file for an example.\n *\n */\nexport const runIfDevelopmentMode = function(callback, args) {\n  if (window.Vaadin.developmentMode) {\n    return uncommentAndRun(callback, args);\n  }\n};\n\nif (window.Vaadin.developmentMode === undefined) {\n  window.Vaadin.developmentMode = isDevelopmentMode();\n}\n",null,"const willAnimate = (elem: Element) => {\r\n  const name = getComputedStyle(elem).getPropertyValue('animation-name');\r\n  return name && name !== 'none';\r\n};\r\n\r\nconst waitForAnimation = (elem: Element, cb: () => void) => {\r\n  const listener = () => {\r\n    elem.removeEventListener('animationend', listener);\r\n    cb();\r\n  };\r\n  elem.addEventListener('animationend', listener);\r\n};\r\n\r\nasync function animate(elem: Element, className: string): Promise<void> {\r\n  elem.classList.add(className);\r\n\r\n  return await new Promise((resolve: () => void) => {\r\n    if (willAnimate(elem)) {\r\n      const rect = elem.getBoundingClientRect();\r\n      const size = `height: ${rect.bottom - rect.top}px; width: ${rect.right - rect.left}px`;\r\n      elem.setAttribute('style', `position: absolute; ${size}`);\r\n      waitForAnimation(elem, () => {\r\n        elem.classList.remove(className);\r\n        elem.removeAttribute('style');\r\n        resolve();\r\n      });\r\n    } else {\r\n      elem.classList.remove(className);\r\n      resolve();\r\n    }\r\n  });\r\n}\r\n\r\nexport default animate;\r\n",null,"import type { NavigationTrigger } from '../types.js';\r\nimport CLICK from './click.js';\r\nimport POPSTATE from './popstate.js';\r\n\r\nlet triggers: readonly NavigationTrigger[] = [];\r\n\r\nconst DEFAULT_TRIGGERS = {\r\n  CLICK,\r\n  POPSTATE,\r\n} as const;\r\n\r\nexport { DEFAULT_TRIGGERS };\r\n\r\nexport function setNavigationTriggers(newTriggers: readonly NavigationTrigger[] = []): void {\r\n  triggers.forEach((trigger) => trigger.inactivate());\r\n\r\n  newTriggers.forEach((trigger) => trigger.activate());\r\n\r\n  triggers = newTriggers;\r\n}\r\n",null,"import type { NavigationTrigger } from '../types.js';\r\nimport { fireRouterEvent } from '../utils.js';\r\n\r\n/* istanbul ignore next: coverage is calculated in Chrome, this code is for IE */\r\nfunction getAnchorOrigin(anchor: HTMLAnchorElement) {\r\n  // IE11: on HTTP and HTTPS the default port is not included into\r\n  // window.location.origin, so won't include it here either.\r\n  const { port, protocol } = anchor;\r\n  const defaultHttp = protocol === 'http:' && port === '80';\r\n  const defaultHttps = protocol === 'https:' && port === '443';\r\n  const host =\r\n    defaultHttp || defaultHttps\r\n      ? anchor.hostname // does not include the port number (e.g. www.example.org)\r\n      : anchor.host; // does include the port number (e.g. www.example.org:80)\r\n  return `${protocol}//${host}`;\r\n}\r\n\r\nfunction getNormalizedNodeName(e: EventTarget): string | undefined {\r\n  if (!(e instanceof Element)) {\r\n    return undefined;\r\n  }\r\n\r\n  return e.nodeName.toLowerCase();\r\n}\r\n\r\n// TODO: Name correctly when the type purpose is known\r\ntype __Pathable = Readonly<{\r\n  path?: readonly EventTarget[];\r\n}>;\r\n\r\n// The list of checks is not complete:\r\n//  - SVG support is missing\r\n//  - the 'rel' attribute is not considered\r\nfunction vaadinRouterGlobalClickHandler(event: MouseEvent & __Pathable) {\r\n  // ignore the click if the default action is prevented\r\n  if (event.defaultPrevented) {\r\n    return;\r\n  }\r\n\r\n  // ignore the click if not with the primary mouse button\r\n  if (event.button !== 0) {\r\n    return;\r\n  }\r\n\r\n  // ignore the click if a modifier key is pressed\r\n  if (event.shiftKey || event.ctrlKey || event.altKey || event.metaKey) {\r\n    return;\r\n  }\r\n\r\n  // find the <a> element that the click is at (or within)\r\n  let anchorCandidate = event.target;\r\n  const path = event instanceof MouseEvent ? event.composedPath() : ((event as __Pathable).path ?? []);\r\n\r\n  // FIXME(web-padawan): `Symbol.iterator` used by webcomponentsjs is broken for arrays\r\n  // example to check: `for...of` loop here throws the \"Not yet implemented\" error\r\n  // eslint-disable-next-line @typescript-eslint/prefer-for-of\r\n  for (let i = 0; i < path.length; i++) {\r\n    const target = path[i];\r\n    if ('nodeName' in target && (target as Element).nodeName.toLowerCase() === 'a') {\r\n      anchorCandidate = target;\r\n      break;\r\n    }\r\n  }\r\n\r\n  while (anchorCandidate && anchorCandidate instanceof Node && getNormalizedNodeName(anchorCandidate) !== 'a') {\r\n    anchorCandidate = anchorCandidate.parentNode;\r\n  }\r\n\r\n  // ignore the click if not at an <a> element\r\n  if (!anchorCandidate || getNormalizedNodeName(anchorCandidate) !== 'a') {\r\n    return;\r\n  }\r\n\r\n  const anchor = anchorCandidate as HTMLAnchorElement;\r\n\r\n  // ignore the click if the <a> element has a non-default target\r\n  if (anchor.target && anchor.target.toLowerCase() !== '_self') {\r\n    return;\r\n  }\r\n\r\n  // ignore the click if the <a> element has the 'download' attribute\r\n  if (anchor.hasAttribute('download')) {\r\n    return;\r\n  }\r\n\r\n  // ignore the click if the <a> element has the 'router-ignore' attribute\r\n  if (anchor.hasAttribute('router-ignore')) {\r\n    return;\r\n  }\r\n\r\n  // ignore the click if the target URL is a fragment on the current page\r\n  if (anchor.pathname === window.location.pathname && anchor.hash !== '') {\r\n    return;\r\n  }\r\n\r\n  // ignore the click if the target is external to the app\r\n  // In IE11 HTMLAnchorElement does not have the `origin` property\r\n  const origin = anchor.origin || getAnchorOrigin(anchor);\r\n  if (origin !== window.location.origin) {\r\n    return;\r\n  }\r\n\r\n  // if none of the above, convert the click into a navigation event\r\n  const { hash, pathname, search } = anchor;\r\n  if (fireRouterEvent('go', { hash, pathname, search }) && event instanceof MouseEvent) {\r\n    event.preventDefault();\r\n    // for a click event, the scroll is reset to the top position.\r\n    // FIXME: undefined here?\r\n    if (event.type === 'click') {\r\n      window.scrollTo(0, 0);\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * A navigation trigger for Vaadin Router that translated clicks on `<a>` links\r\n * into Vaadin Router navigation events.\r\n *\r\n * Only regular clicks on in-app links are translated (primary mouse button, no\r\n * modifier keys, the target href is within the app's URL space).\r\n */\r\nconst CLICK: NavigationTrigger = {\r\n  activate() {\r\n    window.document.addEventListener('click', vaadinRouterGlobalClickHandler);\r\n  },\r\n\r\n  inactivate() {\r\n    window.document.removeEventListener('click', vaadinRouterGlobalClickHandler);\r\n  },\r\n};\r\n\r\nexport default CLICK;\r\n",null,"import { compile } from 'path-to-regexp';\r\nimport type Resolver from './resolver/resolver.js';\r\nimport { isFunction, isObject, isString, log, toArray } from './resolver/utils.js';\r\nimport type { Router } from './router.js';\r\nimport type {\r\n  ActionResult,\r\n  AnyObject,\r\n  ChainItem,\r\n  IndexedParams,\r\n  RedirectResult,\r\n  Route,\r\n  RouteContext,\r\n  RouterLocation,\r\n  WebComponentInterface,\r\n} from './types.js';\r\n\r\nexport function ensureRoute<R extends AnyObject, C extends AnyObject>(route?: Route<R, C>): void {\r\n  if (!route || !isString(route.path)) {\r\n    throw new Error(\r\n      log(`Expected route config to be an object with a \"path\" string property, or an array of such objects`),\r\n    );\r\n  }\r\n\r\n  if (\r\n    !isFunction(route.action) &&\r\n    !Array.isArray(route.children) &&\r\n    !isFunction(route.children) &&\r\n    !isString(route.component) &&\r\n    !isString(route.redirect)\r\n  ) {\r\n    throw new Error(\r\n      log(\r\n        `Expected route config \"${route.path}\" to include either \"component, redirect\" ` +\r\n          `or \"action\" function but none found.`,\r\n      ),\r\n    );\r\n  }\r\n\r\n  if (route.redirect) {\r\n    ['bundle', 'component'].forEach((overriddenProp) => {\r\n      if (overriddenProp in route) {\r\n        console.warn(\r\n          log(\r\n            `Route config \"${String(route.path)}\" has both \"redirect\" and \"${overriddenProp}\" properties, ` +\r\n              `and \"redirect\" will always override the latter. Did you mean to only use \"${overriddenProp}\"?`,\r\n          ),\r\n        );\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nexport function ensureRoutes<R extends AnyObject, C extends AnyObject>(\r\n  routes: Route<R, C> | ReadonlyArray<Route<R, C>>,\r\n): void {\r\n  toArray(routes).forEach((route) => ensureRoute(route));\r\n}\r\n\r\nexport function copyContextWithoutNext<R extends AnyObject, C extends AnyObject>({\r\n  next: _,\r\n  ...context\r\n}: RouteContext<R, C>): Omit<RouteContext<R, C>, 'next'> {\r\n  return context;\r\n}\r\n\r\nexport function getPathnameForRouter<T, R extends AnyObject, C extends AnyObject>(\r\n  pathname: string,\r\n  router: Resolver<T, R, C>,\r\n): string {\r\n  // @ts-expect-error: __effectiveBaseUrl is a private property\r\n  const base = router.__effectiveBaseUrl;\r\n  return base ? new URL(pathname.replace(/^\\//u, ''), base).pathname : pathname;\r\n}\r\n\r\nexport function getMatchedPath(pathItems: ReadonlyArray<Readonly<{ path: string }>>): string {\r\n  return pathItems\r\n    .map((pathItem) => pathItem.path)\r\n    .reduce((a, b) => {\r\n      if (b.length) {\r\n        return `${a.replace(/\\/$/u, '')}/${b.replace(/^\\//u, '')}`;\r\n      }\r\n      return a;\r\n    }, '');\r\n}\r\n\r\nexport function getRoutePath<R extends AnyObject, C extends AnyObject>(chain: ReadonlyArray<ChainItem<R, C>>): string {\r\n  return getMatchedPath(chain.map((chainItem) => chainItem.route));\r\n}\r\n\r\nexport type ResolverOnlyContext<R extends AnyObject, C extends AnyObject> = Readonly<{ resolver: Router<R, C> }>;\r\n\r\ntype PartialRouteContext<R extends AnyObject, C extends AnyObject> = Readonly<{\r\n  chain?: ReadonlyArray<ChainItem<R, C>>;\r\n  hash?: string;\r\n  params?: IndexedParams;\r\n  pathname?: string;\r\n  resolver?: Router<R, C>;\r\n  redirectFrom?: string;\r\n  search?: string;\r\n}>;\r\n\r\nexport function createLocation<R extends AnyObject, C extends AnyObject>({\r\n  resolver,\r\n}: ResolverOnlyContext<R, C>): RouterLocation<R, C>;\r\nexport function createLocation<R extends AnyObject, C extends AnyObject>(\r\n  context: RouteContext<R, C>,\r\n  route?: Route<R, C>,\r\n): RouterLocation<R, C>;\r\nexport function createLocation<R extends AnyObject, C extends AnyObject>(\r\n  { chain = [], hash = '', params = {}, pathname = '', redirectFrom, resolver, search = '' }: PartialRouteContext<R, C>,\r\n  route?: Route<R, C>,\r\n): RouterLocation<R, C> {\r\n  const routes = chain.map((item) => item.route);\r\n  return {\r\n    baseUrl: resolver?.baseUrl ?? '',\r\n    getUrl: (userParams = {}) =>\r\n      resolver ? getPathnameForRouter(compile(getRoutePath(chain))({ ...params, ...userParams } as Partial<Record<string, string[]>>), resolver) : '',\r\n    hash,\r\n    params,\r\n    pathname,\r\n    redirectFrom,\r\n    route: route ?? (Array.isArray(routes) ? routes.at(-1) : undefined) ?? null,\r\n    routes,\r\n    search,\r\n    searchParams: new URLSearchParams(search),\r\n  };\r\n}\r\n\r\nexport function createRedirect<R extends AnyObject, C extends AnyObject>(\r\n  context: RouteContext<R, C>,\r\n  pathname: string,\r\n): RedirectResult {\r\n  const params = { ...context.params };\r\n  return {\r\n    redirect: {\r\n      from: context.pathname,\r\n      params,\r\n      pathname,\r\n    },\r\n  };\r\n}\r\n\r\nexport function renderElement<R extends AnyObject, C extends AnyObject, E extends WebComponentInterface<R, C>>(\r\n  context: RouteContext<R, C>,\r\n  element: E,\r\n): E {\r\n  element.location = createLocation(context);\r\n\r\n  if (context.chain) {\r\n    const index = context.chain.map((item) => item.route).indexOf(context.route);\r\n    context.chain[index].element = element;\r\n  }\r\n\r\n  return element;\r\n}\r\n\r\nexport function maybeCall<R, A extends unknown[], O extends object>(\r\n  callback: ((this: O, ...args: A) => R) | undefined,\r\n  thisArg: O,\r\n  ...args: A\r\n): R | undefined {\r\n  if (typeof callback === 'function') {\r\n    return callback.apply(thisArg, args);\r\n  }\r\n\r\n  return undefined;\r\n}\r\n\r\nexport function amend<\r\n  A extends readonly unknown[],\r\n  N extends keyof O,\r\n  O extends AnyObject & { [key in N]: (this: O, ...args: A) => ActionResult | undefined },\r\n>(fn: keyof O, obj: O | undefined, ...args: A): (result: ActionResult) => ActionResult | undefined {\r\n  return (result: ActionResult) => {\r\n    if (result && isObject(result) && ('cancel' in result || 'redirect' in result)) {\r\n      return result;\r\n    }\r\n\r\n    return maybeCall(obj?.[fn], obj!, ...args);\r\n  };\r\n}\r\n\r\nexport function processNewChildren<R extends AnyObject, C extends AnyObject>(\r\n  newChildren: Route<R, C> | ReadonlyArray<Route<R, C>> | undefined | void,\r\n  route: Route<R, C>,\r\n): void {\r\n  if (!Array.isArray(newChildren) && !isObject(newChildren)) {\r\n    throw new Error(\r\n      log(\r\n        `Incorrect \"children\" value for the route ${String(route.path)}: expected array or object, but got ${String(\r\n          newChildren,\r\n        )}`,\r\n      ),\r\n    );\r\n  }\r\n\r\n  const children = toArray(newChildren);\r\n  children.forEach((child) => ensureRoute(child));\r\n  route.__children = children;\r\n}\r\n\r\nexport function fireRouterEvent(type: string, detail: unknown): boolean {\r\n  return !window.dispatchEvent(new CustomEvent(`vaadin-router-${type}`, { cancelable: type === 'go', detail }));\r\n}\r\n\r\nexport function logValue(value: unknown): string {\r\n  if (typeof value !== 'object') {\r\n    return String(value);\r\n  }\r\n\r\n  const [stringType = 'Unknown'] = / (.*)\\]$/u.exec(String(value)) ?? [];\r\n  if (stringType === 'Object' || stringType === 'Array') {\r\n    return `${stringType} ${JSON.stringify(value)}`;\r\n  }\r\n  return stringType;\r\n}\r\n",null,"import type { NavigationTrigger } from '../types.js';\r\nimport { fireRouterEvent } from '../utils.js';\r\n\r\nfunction vaadinRouterGlobalPopstateHandler(event: PopStateEvent) {\r\n  if (event.state === 'vaadin-router-ignore') {\r\n    return;\r\n  }\r\n  const { hash, pathname, search } = window.location;\r\n  fireRouterEvent('go', { hash, pathname, search });\r\n}\r\n\r\n/**\r\n * A navigation trigger for Vaadin Router that translates popstate events into\r\n * Vaadin Router navigation events.\r\n */\r\nconst POPSTATE: NavigationTrigger = {\r\n  activate() {\r\n    window.addEventListener('popstate', vaadinRouterGlobalPopstateHandler);\r\n  },\r\n\r\n  inactivate() {\r\n    window.removeEventListener('popstate', vaadinRouterGlobalPopstateHandler);\r\n  },\r\n};\r\n\r\nexport default POPSTATE;\r\n","import imgLogo from \"../logo-bckg-removed.png\"\r\n\r\nclass ChatHeader extends HTMLElement{\r\n    shadow!: ShadowRoot\r\n    constructor(){\r\n        super();\r\n        this.attachShadow({ mode: \"open\" })\r\n        this.render()\r\n    }\r\nconnectedCallback(){\r\n    this.render();\r\n\r\n}\r\nrender(){\r\n    const isChatPage = window.location.pathname.includes(\"/chat/\");\r\n    \r\n    this.shadowRoot!.innerHTML=`\r\n    <style>\r\n    div.header{\r\n        width:100vw;\r\n        margin:0;\r\n        padding:0;\r\n        background: linear-gradient(to bottom,rgb(39, 160, 176),rgba(12, 129, 74, 0.1));\r\n        height:80px;\r\n        display:flex;\r\n        align-items:center;\r\n        border-bottom: solid rgb(0,0,0,0.1) 1px\r\n    }\r\n    \r\n    img.logo{\r\n        width:150px; \r\n        height:48px; \r\n        margin-left:20px;\r\n    }\r\n    @media(width<600px){\r\n        img.chat-page{\r\n            margin-left:80px;\r\n        }\r\n    \r\n    }\r\n    </style>\r\n\r\n    <div class=\"header\">\r\n        <div class=\"logo-img\">\r\n            <img class=\"logo ${isChatPage ? \"chat-page\" :\"\" } \" src=${imgLogo} alt=\"logo image\" style=\"width:150px; height:48px;\">\r\n        </div>\r\n    </div>\r\n    `\r\n\r\n}\r\n}\r\ncustomElements.define(\"header-comp\", ChatHeader);\r\n","module.exports = require('./helpers/bundle-url').getBundleURL('eL2qL') + \"logo-bckg-removed.2387797d.png\" + \"?\" + Date.now();","\"use strict\";\n\nvar bundleURL = {};\nfunction getBundleURLCached(id) {\n  var value = bundleURL[id];\n  if (!value) {\n    value = getBundleURL();\n    bundleURL[id] = value;\n  }\n  return value;\n}\nfunction getBundleURL() {\n  try {\n    throw new Error();\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      // The first two stack frames will be this function and getBundleURLCached.\n      // Use the 3rd one, which will be a runtime in the original bundle.\n      return getBaseURL(matches[2]);\n    }\n  }\n  return '/';\n}\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|(chrome|moz|safari-web)-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\n// TODO: Replace uses with `new URL(url).origin` when ie11 is no longer supported.\nfunction getOrigin(url) {\n  var matches = ('' + url).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\\/\\/[^/]+/);\n  if (!matches) {\n    throw new Error('Origin not found');\n  }\n  return matches[0];\n}\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\nexports.getOrigin = getOrigin;","import {Router} from \"@vaadin/router\"\r\nimport personIcon from \"../../person-icon.png\"\r\n\r\nclass Chatrooms extends HTMLElement{\r\n    constructor(){\r\n        super();\r\n\r\n    }\r\nconnectedCallback(){\r\n    this.render();\r\n\r\n}\r\nrender(){\r\n    this.innerHTML=`\r\n    <style>\r\n    \r\n    .private-buttons{\r\n        display: flex;\r\n        flex-direction: column;\r\n        align-items: center;\r\n        justify-content: center;\r\n        gap:10px;\r\n        padding-top: 5px;\r\n        width:80vw;\r\n    }\r\n\r\n    .public-buttons{\r\n            \r\n        display: flex;\r\n        flex-direction: row;\r\n        align-items: center;\r\n        justify-content: center;\r\n        padding-top: 5px;\r\n        width:80vw;\r\n    }\r\n    .pc-counts{\r\n        display:flex;\r\n        flex-direction:column;\r\n        gap:30px;   \r\n    }\r\n    @media(width>980px){\r\n        .pc-counts{\r\n            gap:22px;   \r\n        }\r\n    }\r\n    .chatselection-body{\r\n        height:100vh;\r\n        width: 100vw;\r\n        background:linear-gradient(to bottom,rgba(114, 232, 222, 0.87) , rgb(12, 129, 74,0.3));\r\n        display: flex;\r\n        flex-direction: column;\r\n        align-items: center;\r\n    }\r\n\r\n    h1{\r\n        margin-top: 60px;\r\n        color: rgb(255, 255, 255);\r\n        text-align: center;\r\n        -webkit-text-stroke: 0.1px rgb(0,0,0,0.5);\r\n    }\r\n\r\n    h3{\r\n        margin-top: 8px;\r\n        color: white;\r\n        text-align: center;\r\n        font-size: 25px;\r\n\r\n    }\r\n\r\n    @media(width>980px){\r\n        .chatselection-body{\r\n            \r\n        }\r\n        h1{\r\n            font-size:40px;\r\n            margin-top:30px;\r\n        }\r\n        h3{\r\n            font-size:30px;\r\n        }\r\n    }\r\n\r\n\r\n    button{\r\n        min-width:unset;\r\n        height:50px;\r\n        width:180px;\r\n        color:rgb(0,0,0,0.7);\r\n        background-color: rgba(43, 180, 198, 0.62);\r\n        border-radius:50px;\r\n        border:solid 2px rgb(255,255,255,0.5);\r\n        font-weight: bold;\r\n        font-size: 18px;\r\n        flex-shrink: 0;\r\n    }\r\n    @media(width>980px){\r\n        button{\r\n            font-size:22px;\r\n            height:55px;\r\n            width:220px;\r\n        }\r\n    }\r\n    .back-home-button{\r\n        position:absolute;\r\n        margin-top:110px;\r\n        left:20px;\r\n        min-width:unset;\r\n        width:60px;\r\n        height:30px;\r\n        background-color: rgba(43, 180, 198, 0.62);\r\n        color:rgb(0,0,0,0.7);\r\n        border-radius:50px;\r\n        border:solid 0.5px rgb(255,255,255,0.1);\r\n        font-weight: bold;\r\n        font-size:13px;\r\n    }\r\n    h2.pc-total, h2.pc1-participants, h2.pc2-participants, h2.pc3-participants{\r\n        text-align:right;\r\n        color:grey;\r\n        min-width:14px;\r\n        font-size:14px;\r\n        margin:0;\r\n        padding:0;\r\n        }\r\n    @media(width>980px){\r\n        h2.pc-total, h2.pc1-participants, h2.pc2-participants, h2.pc3-participants{\r\n            min-width:30px;\r\n            font-size:24px;\r\n        }\r\n    }\r\n    div.pc1-count, div.pc2-count, div.pc3-count{\r\n        display: flex;\r\n        flex-direction: row;\r\n        align-items:center;\r\n        justify-content:center;\r\n        width:100%;\r\n        margin:0;\r\n        padding:0;\r\n    }\r\n\r\n    div.popup-container{\r\n        display:flex;\r\n        align-items:center;\r\n        justify-content:center;\r\n        position:absolute;\r\n        z-index:100;\r\n        top:200px;\r\n        width:260px;\r\n    }\r\n    @media(width>600px){\r\n        div.popup-container{\r\n            width:50%;\r\n        \r\n        }\r\n    }\r\n    div.popup-join{\r\n        display:flex;\r\n        flex-direction:column;\r\n        width:100%;\r\n        height:100%;\r\n        border:solid 5px rgb(112, 211, 211);\r\n        border-radius:20px;\r\n        gap:20px;\r\n        background: linear-gradient(to bottom,rgba(60, 200, 220),rgb(12, 129, 140));\r\n    }\r\n    h2.insert-id{\r\n        margin:20px 20px 0 20px;\r\n        padding:0;\r\n        display:flex;\r\n        justify-content:center;\r\n        align-items:center;\r\n        text-align:center;\r\n    }\r\n    .join-form{\r\n        display:flex;\r\n        flex-direction:column;\r\n        align-items:center;\r\n        justify-content:center;\r\n        gap:10px;\r\n    }\r\n    .id-input{\r\n        width:70%;\r\n        // max-width:500px;\r\n        height:30px;\r\n        border-radius:5px;\r\n        padding-left:15px;\r\n    }\r\n\r\n    .button-join-chat{\r\n        background-color:rgba(114, 232, 222, 0.87);\r\n        margin-bottom:20px;\r\n\r\n    }\r\n    @media(width<415px){\r\n        .button-join-chat{\r\n            background-color:rgba(114, 232, 222, 0.87);\r\n            margin-bottom:20px;\r\n        }\r\n    }      \r\n\r\n    button.close-x{\r\n        all:unset;\r\n        position: absolute; \r\n        top: 10px;\r\n        right: 10px;\r\n        width: 30px;\r\n        height: 30px;\r\n        border: none;\r\n        border-radius:10px;\r\n        font-size: 20px;\r\n        font-weight: bold;\r\n        text-align: center;\r\n        line-height: 30px; \r\n        cursor: pointer;    \r\n    }\r\n\r\n    button.close-x:hover {\r\n        color:white;\r\n    }\r\n    .miss-alert-text{\r\n        color:#EA253D;\r\n        opacity:0.8;\r\n        font-size:20px;\r\n        font-weight:bold;\r\n    }\r\n    .public_chat_1, .public_chat_2, .public_chat_3{\r\n        margin-left:47px;\r\n    }\r\n    @media(width>980px){\r\n        .public_chat_1, .public_chat_2, .public_chat_3{\r\n            margin-left:99px;\r\n        }\r\n    }\r\n    \r\n    .create_private, .join_private{\r\n        margin-left:99px;\r\n        margin-right:100px;\r\n    }\r\n\r\n    img{\r\n        min-width:10px; \r\n        height:10px;\r\n        margin-left:5px;\r\n    }\r\n    @media(width>980px){\r\n        img{\r\n            min-width:20px; \r\n            height:20px;\r\n            margin-left:10px;\r\n        }\r\n    }\r\n    </style>\r\n\r\n\r\n    <button class=\"back-home-button\">BACK </button>\r\n    <div class=\"chatselection-body\">\r\n        <header-comp></header-comp>\r\n        <h1 class=\"select_chat\">Select a Chatroom</h1>\r\n        <h3 class=\"public_title\">Public</h3>\r\n        <div class=\"public-buttons\">\r\n            <div class=\"pc-buttons\">\r\n                <div class=\"pc1-button\">\r\n                    <button class=\"public_chat_1\">Chatroom 1</button>\r\n                </div>\r\n                <div class=\"pc2-button\">\r\n                    <button class=\"public_chat_2\">Chatroom 2</button>\r\n                </div>\r\n                <div class=\"pc3-button\">\r\n                    <button class=\"public_chat_3\">Chatroom 3</button>\r\n                </div>\r\n            </div>\r\n            <div class=\"pc-counts\">\r\n                <div class=\"pc1-count\">\r\n                    <h2 class=\"pc1-participants\">-</h2>\r\n                    <h2 class=\"pc-total\">/10</h2>\r\n                    <img src=${personIcon}>\r\n                </div>\r\n                <div class=\"pc2-count\">\r\n                    <h2 class=\"pc2-participants\">-</h2>\r\n                    <h2 class=\"pc-total\">/10</h2>\r\n                    <img src=${personIcon}>\r\n                </div>\r\n                <div class=\"pc3-count\">\r\n                    <h2 class=\"pc3-participants\">-</h2>\r\n                    <h2 class=\"pc-total\">/10</h2>\r\n                    <img src=${personIcon}>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <h3 class=\"private-title\">Private</h3>\r\n        <div class=\"private-buttons\">\r\n            <button class=\"create_private\">Create Chatroom</button>\r\n            <button class=\"join_private\">Join Chatroom</button>\r\n        </div>\r\n        <div class=\"popup-container\"></div>\r\n    </div>\r\n\r\n    `\r\n    const backbuttonEl = this.querySelector(\".back-home-button\")\r\n    backbuttonEl?.addEventListener(\"click\",((e)=>{\r\n        e.preventDefault();\r\n        const target = e.target as any\r\n        Router.go(\"/live-chat/\")\r\n    }));\r\n\r\n}\r\n}\r\ncustomElements.define(\"chatrooms-page\", Chatrooms);\r\n","module.exports = require('./helpers/bundle-url').getBundleURL('eL2qL') + \"person-icon.6448733c.png\" + \"?\" + Date.now();","import {Router} from \"@vaadin/router\"\r\nimport sendicon from \"../../send-icon2.png\"\r\n\r\nclass ChatPage extends HTMLElement{\r\n    constructor(){\r\n        super();\r\n    }\r\n    connectedCallback(){\r\n        this.render();\r\n        \r\n    }\r\n    render(){\r\n    var idShort=window.location.pathname.split(\"/\")[2]\r\n    this.innerHTML=`\r\n    <style>\r\n        \r\n    .chats-body{\r\n        height:100vh;\r\n        width: 100vw;\r\n        background-color:rgba(114, 232, 222, 0.1);\r\n        display: flex;\r\n        flex-direction: column;\r\n        align-items: center;\r\n    }\r\n\r\n    .back-button{\r\n        position:absolute;\r\n        margin-top:110px;\r\n        left:20px;\r\n        min-width:unset;\r\n        width:60px;\r\n        height:30px;\r\n        background-color: rgba(43, 180, 198);\r\n        color:rgb(0,0,0,0.7);\r\n        border-radius:50px;\r\n        border:solid 0.5px rgb(255,255,255,0.1);\r\n        font-weight: bold;\r\n        z-index:1000;\r\n    }\r\n    \r\n    @media(width<600px){\r\n        button.back-button{\r\n            margin-top:25px;\r\n            color:rgb(255,255,255);\r\n        }\r\n    }\r\n\r\n\r\n    form.form-send-msg{\r\n        display:flex;\r\n        justify-content:center;\r\n        position:absolute;\r\n        bottom:20px;\r\n        width:95vw;\r\n        max-width:1800px;\r\n        height:50px;\r\n        gap:5px;\r\n        padding-left:10px;\r\n    }\r\n\r\n\r\n\r\n    textarea.input-send-msg{\r\n        flex-grow:1;\r\n        height:45px;\r\n        border-radius:50px;\r\n        padding: 10px 3vw;\r\n        margin-top:5px;\r\n        max-width:1000px;\r\n        overflow-y: auto;\r\n        resize:none;\r\n        white-space: pre-wrap;\r\n        overflow-wrap: break-word;\r\n    }\r\n\r\n    button.button-send-msg{\r\n        width:50px; \r\n        height:100%;\r\n        border:none;\r\n        background-color: transparent;\r\n        cursor:pointer;\r\n        bottom:30px;\r\n        display:flex;\r\n        align-items:center;\r\n        justify-content:center;\r\n    }\r\n        \r\n    img.img-send-msg{\r\n        width: 40px;\r\n        height: 40px;\r\n        max-width: 50px ;\r\n        max-height: 50px ;\r\n        object-fit: contain;\r\n        display: block;\r\n    }\r\n\r\n    h2.id{\r\n        position:absolute;\r\n        top:30px;\r\n        right:5vw;\r\n        min-width:100px;\r\n        margin:0;\r\n        padding:0;\r\n        color: rgba(0, 140, 160);\r\n        font-size:20px;\r\n    }\r\n\r\n    \r\n    @media(width<600px){\r\n        h2.id{\r\n            font-size:14px;\r\n            padding-left:10px;\r\n        }\r\n    }\r\n        \r\n    .messages-container{\r\n        // border:solid 3px black;\r\n        flex-grow:1;\r\n        overflow-y:auto;\r\n        width:70vw;\r\n        max-width:900px;\r\n        margin-bottom: 75px;\r\n        display:flex;\r\n        flex-direction:column;\r\n    }\r\n    .message{\r\n        padding: 8px;\r\n        border-radius: 10px;\r\n        margin-bottom: 5px;\r\n        margin-left: 10px;\r\n        width: fit-content;\r\n        height: fit-content;\r\n        max-width: 80%;\r\n        word-wrap: break-word;\r\n        background:rgb(227, 253, 233);\r\n        align-self: flex-end;\r\n    }\r\n    .message.user {\r\n        background: #e3f2fd;\r\n        align-self: flex-start;\r\n    }\r\n\r\n    .user-msg.admin{\r\n        background:none;\r\n        font-weight: bold;\r\n        align-self: flex-end;\r\n    }\r\n    .user-msg{\r\n        background:none;\r\n        font-weight: bold;\r\n        align-self: flex-start;\r\n        padding-left:20px;\r\n        padding-top:10px;\r\n    }\r\n\r\n    </style>\r\n\r\n    <div class=\"chats-body\">\r\n        <header-comp></header-comp>\r\n        <h2 class=\"id\">ID: ${idShort}</h2>\r\n        <div class=\"messages-container\">\r\n        </div>\r\n        <button class=\"back-button\">BACK </button>\r\n        <form class=\"form-send-msg\">\r\n            <textarea  class=\"input-send-msg\" type=\"text\" placeholder=\"Write a message\"></textarea>\r\n            <button class=\"button-send-msg\">\r\n                <img class=\"img-send-msg\" src=\"${sendicon}\" >\r\n            </button>\r\n        </form>\r\n    </div>\r\n\r\n    `\r\n        };\r\n}\r\ncustomElements.define(\"chats-page\", ChatPage);\r\n","module.exports = require('./helpers/bundle-url').getBundleURL('eL2qL') + \"send-icon2.edc4bab5.png\" + \"?\" + Date.now();","\r\nimport {Router} from \"@vaadin/router\"\r\nimport \"../router.ts\"\r\n// import {rtdb} from \"../backend/db.ts\"\r\n\r\n\r\n\r\n\r\n// const API_BASE_URL = \"http://localhost:3000\";\r\nconst API_BASE_URL = \"https://backend-live-chat.onrender.com\";\r\n\r\n// Check rooms and messages to delete\r\nfunction checkRooms(){\r\n  const username=localStorage.getItem(\"name\")\r\n  const color=localStorage.getItem(\"color\")\r\n\r\n  fetch(API_BASE_URL + \"/checkrooms\", {\r\n    method: \"PUT\",\r\n    headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({username: username, color: color}),\r\n\r\n  })\r\n    .then((res) => res.json())\r\n    .then((data) => {\r\n      console.log(data);\r\n      \r\n    });\r\n}\r\n\r\n// Get all users\r\nfunction getAllUsers() {\r\n  const username=localStorage.getItem(\"name\")\r\n  \r\n  fetch(API_BASE_URL + \"/getusers\", {\r\n    method: \"GET\",\r\n    headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n  })\r\n    .then((res) => res.json())\r\n    .then((data) => {\r\n      console.log(\"All users in chats are:\", data);\r\n      \r\n    });\r\n  }\r\n\r\n// Create a chatroom\r\nfunction createChatroom() {\r\n  const username=localStorage.getItem(\"name\")\r\n  const color=localStorage.getItem(\"color\")\r\n  \r\n  fetch(API_BASE_URL + \"/createchat\", {\r\n    method: \"POST\",\r\n    headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    body: JSON.stringify({name: username, color: color}),\r\n  })\r\n    .then((res) => res.json())\r\n    .then((data) => {\r\n      console.log(\"Room created with ID:\", data.idShort);\r\n      Router.go(\"/chat/\"+data.idShort)\r\n    });\r\n}\r\n\r\n// Add a participant to the db\r\nasync function addParticipant(idShort:string) {\r\n  const username=localStorage.getItem(\"name\")\r\n  const color=localStorage.getItem(\"color\")\r\n  const data= await listenRoom(idShort)\r\n  const fullid=data.idFull\r\n\r\n  fetch(API_BASE_URL + \"/chat/\" + idShort +\"/addparticipant\", {\r\n    method: \"PUT\",\r\n    headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    body: JSON.stringify({name: username, color: color, idShort: idShort, fullid:fullid}),\r\n  })\r\n    .then((res) => res.json())\r\n    .then((data) => {\r\n\r\n      console.log(\"The room \" + idShort + \" added the participant:\", username);\r\n    });\r\n}\r\n\r\n// Remove a participant from the db\r\nasync function removeParticipant() {\r\n  const username=localStorage.getItem(\"name\")\r\n  const idShort=window.location.pathname.split(\"/\")[2]\r\n  const data= await listenRoom(idShort)\r\n  const fullid=data.idFull\r\n\r\n  await fetch(API_BASE_URL + \"/chat/\"+ idShort +\"/removeparticipant\", {\r\n    method: \"PUT\",\r\n    headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({name: username, idShort: idShort, fullid:fullid}),\r\n    })\r\n\r\n  console.log(\"The room \" + idShort + \" removed the participant:\", username);\r\n    \r\n  await checkAndDeleteChatroom(idShort)\r\n}\r\n\r\n// Delete empty room\r\nasync function checkAndDeleteChatroom(idShort:string) {\r\n  const dataRoom= await listenRoom(idShort)\r\n  const numPart = dataRoom.chatroom.participants ? Object.keys(dataRoom.chatroom.participants).length : 0;\r\n  const fullid=dataRoom.idFull\r\n  if (numPart==1){\r\n  fetch(API_BASE_URL + \"/chat/\"+ idShort +\"/deletechatroom\", {\r\n    method: \"PUT\",\r\n    headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({ idShort: idShort, fullid:fullid}),\r\n    })\r\n    .then((res) => res.json())\r\n    .then((data) => {\r\n      console.log(\"The room \" + idShort + \" is deleted\");\r\n    });\r\n}}\r\n\r\n// Listen changes in a specific room\r\nasync function listenRoom(idShort: string) {\r\n  try{\r\n    const response = await fetch(API_BASE_URL + \"/chat/\" + idShort ,{\r\n      method: \"GET\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n\r\n    });\r\n    if (!response.ok) throw new Error(\"Error en la solicitud\")\r\n      const data = await response.json();\r\n    return data;\r\n  }catch (error){\r\n    console.log(\"ERROR at listening room\")\r\n    return null\r\n  }\r\n}\r\n\r\nfunction publicParticipantsLoad(){\r\n  listenToParticipants(\"22338437\")\r\n  listenToParticipants(\"4f94d8d9\")\r\n  listenToParticipants(\"96479775\")\r\n}  \r\n\r\n  // Listen to change in participant numbers \r\nasync function listenToParticipants(idShort:string) {\r\n  const roomData= await listenRoom(idShort)\r\n  const fullid=roomData.idFull\r\n  \r\n  const numPart=Object.keys(roomData.chatroom.participants).length-1\r\n  \r\n  if (idShort==\"22338437\"){\r\n    const counterEl = document.querySelector(\".pc1-participants\");\r\n    if (counterEl) counterEl.textContent = JSON.stringify(numPart)\r\n  }else if (idShort==\"4f94d8d9\"){\r\n    const counterEl = document.querySelector(\".pc2-participants\");\r\n    if (counterEl) counterEl.textContent = JSON.stringify(numPart)\r\n  }else if (idShort==\"96479775\"){\r\n    const counterEl = document.querySelector(\".pc3-participants\");\r\n    if (counterEl) counterEl.textContent = JSON.stringify(numPart)\r\n  }\r\n  return numPart\r\n}  \r\n\r\n// Write messages in the database\r\nasync function writeMessages(user: string, message: string) {\r\n  const idShort=window.location.pathname.split(\"/\")[2]\r\n  const time=Date.now()\r\n  const color= localStorage.getItem(\"color\")\r\n\r\n  const roomData= await listenRoom(idShort)\r\n  const fullid=roomData.idFull\r\n\r\n    fetch(API_BASE_URL + `/chat/${idShort}/writemessages`, {\r\n        method: \"PUT\",\r\n        headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n          body: JSON.stringify({ idShort: idShort, fullid:fullid, user:user, message:message, timestamp:time, color:color}),\r\n        })\r\n        .then((res) => res.json())\r\n        .then((data) => {\r\n          console.log(\"The message has been written.\")\r\n    }\r\n    );\r\n  }\r\n  \r\n// Listen messages on change\r\nasync function listenMessages(idShort: string) {\r\n  const roomData = await listenRoom(idShort);\r\n  const fullid = roomData.idFull;\r\n  const username=localStorage.getItem(\"name\")\r\n  console.log(\"the username is:\", username)\r\n  \r\n\r\n  const eventSource = new EventSource(`${API_BASE_URL}/chat/${idShort}/listenmessages?fullid=${fullid}`);\r\n\r\n  eventSource.onmessage = (event) => {\r\n      const data = JSON.parse(event.data);\r\n      \r\n      if (data.messages!=null){\r\n        console.log(\"Messages updated:\", data.messages); \r\n        renderMessages(data.messages);\r\n      }\r\n  };\r\n\r\n  eventSource.onerror = (error) => {\r\n      console.error(\"Error in the SSE:\", error);\r\n      eventSource.close();\r\n  };\r\n}\r\n\r\n\r\nfunction renderMessages(messages: Record<string, {username:string, color:string, message:string, timeInDB: number}>) {\r\n  const container = document.querySelector(\".messages-container\");\r\n  container!.innerHTML = \"\"; \r\n  \r\n  let previousUserMsg=\"\";\r\n  let n=0;\r\n  Object.entries(messages).forEach(([idTime, msgData]) => {\r\n    if (idTime!=\"0\"){\r\n      const messageEl = document.createElement(\"div\");\r\n      messageEl.classList.add(\"message\");\r\n      if (msgData.username==localStorage.getItem(\"name\") && msgData.color==localStorage.getItem(\"color\")){\r\n        var userAdmin=\"admin\"  \r\n      }else{\r\n        var userAdmin=\"user\"  \r\n        \r\n      }\r\n      messageEl.classList.add(`${userAdmin}`);\r\n      messageEl.textContent = msgData.message;\r\n      const userEl = document.createElement(\"p\");\r\n      userEl.classList.add(\"user-msg\");\r\n      userEl.classList.add(`${userAdmin}`);\r\n\r\n      const colorUser=msgData.color;\r\n      if(colorUser!=null){\r\n        userEl.style.color=colorUser;\r\n      }\r\n      if (userAdmin==\"user\"&&previousUserMsg!=msgData.username){\r\n        userEl.textContent = msgData.username;\r\n      }\r\n\r\n      container!.appendChild(userEl);\r\n      container!.appendChild(messageEl);\r\n      previousUserMsg=msgData.username\r\n      n+=1\r\n    }\r\n  });\r\n  if (container){\r\n    container.scrollTop=container.scrollHeight\r\n  }\r\n}\r\n\r\n\r\nexport {listenRoom, createChatroom, writeMessages, removeParticipant, addParticipant, \r\n  listenToParticipants, publicParticipantsLoad, checkAndDeleteChatroom, listenMessages,\r\n  getAllUsers, checkRooms}","import {Router} from '@vaadin/router';\r\n\r\nimport \"./pages/chatselection/index.ts\";\r\nimport \"./pages/homepage/index.ts\";\r\nimport \"./pages/chat/index.ts\";\r\n\r\nconst initURL=''\r\n\r\n\r\nconst router = new Router(document.querySelector(\".root\"), {\r\n  baseUrl: initURL,\r\n});\r\nconsole.log(\"se ha iniciado el router.\")\r\n\r\nconsole.log(\"la abse url del router es: \",router.baseUrl)\r\nrouter.setRoutes([\r\n  {path: '/', component: 'home-page'},\r\n  {path: '/chatrooms', component: 'chatrooms-page'},\r\n  {path: '/chat/:id', component: 'chats-page'},\r\n]);\r\n\r\n\r\n"],"names":["nextContext"],"version":3,"file":"index.01440a15.js.map","sourceRoot":"/__parcel_source_root/"}